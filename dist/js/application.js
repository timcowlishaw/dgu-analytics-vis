!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){function n(t){return t||0===t?t:""}function i(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function r(t){return"true"===u.getAttribute(t,"data-anddom-hidden")}function o(t){u.setAttribute(t,"data-anddom-display",t.style.display)}function s(t){t.style.display=u.getAttribute(t,"data-anddom-display")||"",u.removeAttribute(t,"data-anddom-hidden")}function a(t){u.setAttribute(t,"data-anddom-hidden","true"),t.style.display="none"}var u=e.exports={text:function(t,e){t.textContent=n(e)},addClass:function(t,e){e=n(e),e&&(t.classList?t.classList.add(e):i(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e))},removeClass:function(t,e){t.classList?t.classList.remove(n(e)):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:i,switchClass:function(t,e,n){e&&this.removeClass(t,e),this.addClass(t,n)},addAttribute:function(t,e){t.setAttribute(e,"")},removeAttribute:function(t,e){t.removeAttribute(e)},setAttribute:function(t,e,i){t.setAttribute(e,n(i))},getAttribute:function(t,e){return t.getAttribute(e)},hide:function(t){r(t)||(o(t),a(t))},show:function(t){s(t)},html:function(t,e){t.innerHTML=e}}},{}],2:[function(t,e){"use strict";e.exports=function(t){function e(t){var e=new n(t),i=e.promise();return i.isRejected()?i:(e.setHowMany(1),e.setUnwrap(),e.init(),i)}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],3:[function(t,e){(function(n){"use strict";function i(){this._isTickUsed=!1,this._schedule=r,this._length=0,this._lateBuffer=new o(16),this._functionBuffer=new o(65536);var t=this;this.consumeFunctionBuffer=function(){t._consumeFunctionBuffer()}}var r=t("./schedule.js"),o=t("./queue.js"),s=t("./util.js").errorObj,a=t("./util.js").tryCatch1,u="undefined"!=typeof n?n:void 0;i.prototype.haveItemsQueued=function(){return this._length>0},i.prototype.invokeLater=function(t,e,n){void 0===u||null==u.domain||t.domain||(t=u.domain.bind(t)),this._lateBuffer.push(t,e,n),this._queueTick()},i.prototype.invoke=function(t,e,n){void 0===u||null==u.domain||t.domain||(t=u.domain.bind(t));var i=this._functionBuffer;i.push(t,e,n),this._length=i.length(),this._queueTick()},i.prototype._consumeFunctionBuffer=function(){for(var t=this._functionBuffer;t.length()>0;){var e=t.shift(),n=t.shift(),i=t.shift();e.call(n,i)}this._reset(),this._consumeLateBuffer()},i.prototype._consumeLateBuffer=function(){for(var t=this._lateBuffer;t.length()>0;){var e=t.shift(),n=t.shift(),i=t.shift(),r=a(e,n,i);if(r===s){if(this._queueTick(),null==e.domain)throw r.e;e.domain.emit("error",r.e)}}},i.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},i.prototype._reset=function(){this._isTickUsed=!1,this._length=0},e.exports=new i}).call(this,t("FWaASH"))},{"./queue.js":26,"./schedule.js":29,"./util.js":36,FWaASH:37}],4:[function(t,e){"use strict";var n=t("./promise.js")();e.exports=n},{"./promise.js":21}],5:[function(t,e){"use strict";var n=Object.create;if(n){var i=n(null),r=n(null);i[" size"]=r[" size"]=0}e.exports=function(e){function n(t){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,t))}function o(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))}function s(t,e,n){var i=n[t];if("function"!=typeof i){if(!d(t))return null;if(i=e(t),n[t]=i,n[" size"]++,n[" size"]>512){for(var r=Object.keys(n),o=0;256>o;++o)delete n[r[o]];n[" size"]=r.length-256}}return i}function a(t){return s(t,n,i)}function u(t){return s(t,o,r)}function l(t){return t[this.pop()].apply(t,this)}function c(t){return t[this]}function h(t){return t[this]}var f=t("./util.js"),p=f.canEvaluate,d=f.isIdentifier;e.prototype.call=function(t){for(var e=arguments.length,n=new Array(e-1),i=1;e>i;++i)n[i-1]=arguments[i];if(p){var r=a(t);if(null!==r)return this._then(r,void 0,void 0,n,void 0)}return n.push(t),this._then(l,void 0,void 0,n,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=h;else if(p){var i=u(t);e=null!==i?i:c}else e=c;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":36}],6:[function(t,e){"use strict";e.exports=function(e,n){var i=t("./errors.js"),r=i.canAttach,o=t("./async.js"),s=i.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;n._attachExtraTrace(t),n._rejectUnchecked(t)},e.prototype.cancel=function(t){return this.isCancellable()?(t=void 0!==t?r(t)?t:new Error(t+""):new s,o.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=new e(n);return t._propagateFrom(this,6),t._follow(this),t._unsetCancellable(),t},e.prototype.fork=function(t,e,n){var i=this._then(t,e,n,void 0,void 0);return i._setCancellable(),i._cancellationParent=void 0,i}}},{"./async.js":3,"./errors.js":11}],7:[function(t,e){"use strict";e.exports=function(){function e(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var i=/\[object [a-zA-Z0-9$_]+\]/;if(i.test(e))try{var r=JSON.stringify(t);e=r}catch(o){}0===e.length&&(e="(empty array)")}return"(<"+n(e)+">, no stack trace)"}function n(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function i(t,e){this.captureStackTrace(i,e)}var r=t("./util.js").inherits,o=t("./es5.js").defineProperty,s=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),a=null,u=null;r(i,Error),i.prototype.captureStackTrace=function(t,e){l(this,t,e)},i.possiblyUnhandledRejection=function(t){if("object"==typeof console){var e;if("object"==typeof t||"function"==typeof t){var n=t.stack;e="Possibly unhandled "+u(n,t)}else e="Possibly unhandled "+String(t);"function"==typeof console.error||"object"==typeof console.error?console.error(e):("function"==typeof console.log||"object"==typeof console.log)&&console.log(e)}},i.combine=function(t,e){for(var n=t.length-1,i=e.length-1;i>=0;--i){var r=e[i];if(t[n]!==r)break;t.pop(),n--}t.push("From previous event:");for(var o=t.concat(e),u=[],i=0,l=o.length;l>i;++i)s.test(o[i])&&a.test(o[i])||i>0&&!a.test(o[i])&&"From previous event:"!==o[i]||u.push(o[i]);return u},i.protectErrorMessageNewlines=function(t){for(var e=0;e<t.length&&!a.test(t[e]);++e);if(!(1>=e)){for(var n=[],i=0;e>i;++i)n.push(t.shift());t.unshift(n.join("\x00"))}},i.isSupported=function(){return"function"==typeof l};var l=function c(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){a=/^\s*at\s*/,u=function(t,n){return"string"==typeof t?t:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:e(n)};var t=Error.captureStackTrace;return function(e,n){t(e,n)}}var n=new Error;if("string"==typeof n.stack&&"function"==typeof"".startsWith&&n.stack.startsWith("stackDetection@")&&"stackDetection"===c.name){o(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),a=/@/;var i=/[@\n]/;return u=function(t,n){return"string"==typeof t?n.name+". "+n.message+"\n"+t:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:e(n)},function(t){for(var e=(new Error).stack,n=e.split(i),r=n.length,o="",s=0;r>s;s+=2)o+=n[s],o+="@",o+=n[s+1],o+="\n";t.stack=o}}return u=function(t,n){return"string"==typeof t?t:"object"!=typeof n&&"function"!=typeof n||void 0===n.name||void 0===n.message?e(n):n.name+". "+n.message},null}();return i}},{"./es5.js":13,"./util.js":36}],8:[function(t,e){"use strict";e.exports=function(e){function n(t,e,n){this._instances=t,this._callback=e,this._promise=n}function i(t,e){var n={},i=s(t,n,e);if(i===a)return i;var r=u(n);return r.length?(a.e=new l("Catch filter must inherit from Error or be a simple predicate function"),a):i}var r=t("./util.js"),o=t("./errors.js"),s=r.tryCatch1,a=r.errorObj,u=t("./es5.js").keys,l=o.TypeError;return n.prototype.doFilter=function(t){for(var n=this._callback,r=this._promise,u=r._boundTo,l=0,c=this._instances.length;c>l;++l){var h=this._instances[l],f=h===Error||null!=h&&h.prototype instanceof Error;if(f&&t instanceof h){var p=s(n,u,t);return p===a?(e.e=p.e,e):p}if("function"==typeof h&&!f){var d=i(h,t);if(d===a){var _=o.canAttach(a.e)?a.e:new Error(a.e+"");this._promise._attachExtraTrace(_),t=a.e;break}if(d){var p=s(n,u,t);return p===a?(e.e=p.e,e):p}}}return e.e=t,e},n}},{"./errors.js":11,"./es5.js":13,"./util.js":36}],9:[function(t,e){"use strict";var n=t("./util.js"),i=n.isPrimitive,r=n.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},n=function(){throw this},o=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return r&&i(t)?this._then(o(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return r&&i(t)?this._then(o(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},{"./util.js":36}],10:[function(t,e){"use strict";e.exports=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,i){return n(t,i,null,e)}}},{}],11:[function(t,e){"use strict";function n(t){try{p(t,"isOperational",!0)}catch(e){}}function i(t){return null==t?!1:t instanceof a||t.isOperational===!0}function r(t){return t instanceof Error}function o(t){return r(t)}function s(t,e){function n(i){return this instanceof n?(this.message="string"==typeof i?i:e,this.name=t,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new n(i)}return f(n,Error),n}function a(t){this.name="OperationalError",this.message=t,this.cause=t,this.isOperational=!0,t instanceof Error?(this.message=t.message,this.stack=t.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var u,l,c=t("./es5.js").freeze,h=t("./util.js"),f=h.inherits,p=h.notEnumerableProp,d=s("CancellationError","cancellation error"),_=s("TimeoutError","timeout error"),m=s("AggregateError","aggregate error");try{u=TypeError,l=RangeError}catch(g){u=s("TypeError","type error"),l=s("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(m.prototype[v[y]]=Array.prototype[v[y]]);m.prototype.length=0,m.prototype.isOperational=!0;var b=0;m.prototype.toString=function(){var t=Array(4*b+1).join(" "),e="\n"+t+"AggregateError of:\n";b++,t=Array(4*b+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),o=0;o<r.length;++o)r[o]=t+r[o];i=r.join("\n"),e+=i+"\n"}return b--,e},f(a,Error);var w="__BluebirdErrorTypes__",x=Error[w];x||(x=c({CancellationError:d,TimeoutError:_,OperationalError:a,RejectionError:a,AggregateError:m}),p(Error,w,x)),e.exports={Error:Error,TypeError:u,RangeError:l,CancellationError:x.CancellationError,OperationalError:x.OperationalError,TimeoutError:x.TimeoutError,AggregateError:x.AggregateError,originatesFromRejection:i,markAsOriginatingFromRejection:n,canAttach:o}},{"./es5.js":13,"./util.js":36}],12:[function(t,e){"use strict";e.exports=function(e){function n(t){var n=new i(t),r=e.rejected(n),o=r._peekContext();return null!=o&&o._attachExtraTrace(n),r}var i=t("./errors.js").TypeError;return n}},{"./errors.js":11}],13:[function(t,e){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n};else{var i={}.hasOwnProperty,r={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},a=function(t,e,n){return t[e]=n.value,t},u=function(t){return t},l=function(t){try{return Object(t).constructor.prototype}catch(e){return o}},c=function(t){try{return"[object Array]"===r.call(t)}catch(e){return!1}};e.exports={isArray:c,keys:s,defineProperty:a,freeze:u,getPrototypeOf:l,isES5:n}}},{}],14:[function(t,e){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,i){return n(this,t,i,e)},t.filter=function(t,i,r){return n(t,i,r,e)}}},{}],15:[function(t,e){"use strict";e.exports=function(e,n,i){function r(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,n){var i;return i=f&&p(e)?n?s(e):a(e):n?r:o,t._then(i,d,void 0,e,void 0)}function l(t){var r=this.promise,o=this.handler,s=r._isBound()?o.call(r._boundTo):o();if(void 0!==s){var a=i(s,void 0);if(a instanceof e)return u(a,t,r.isFulfilled())}return r.isRejected()?(n.e=t,n):t}function c(t){var n=this.promise,r=this.handler,o=n._isBound()?r.call(n._boundTo,t):r(t);if(void 0!==o){var s=i(o,void 0);if(s instanceof e)return u(s,t,!0)}return t}var h=t("./util.js"),f=h.wrapsPrimitiveReceiver,p=h.isPrimitive,d=h.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?l:c,e?l:void 0,void 0,n,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":36}],16:[function(t,e){"use strict";e.exports=function(e,n,i,r){function o(t,n){for(var i=h,s=e,a=n.length,u=0;a>u;++u){var l=f(n[u],void 0,t);if(l===i)return s.reject(i.e);var c=r(l,o);if(c instanceof s)return c}return null}function s(t,n,r){var o=this._promise=new e(i);o._setTrace(void 0),this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(p):p}var a=t("./errors.js"),u=a.TypeError,l=t("./util.js").deprecated,c=t("./util.js"),h=c.errorObj,f=c.tryCatch1,p=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===h){this._generator=void 0;var n=a.canAttach(t.e)?t.e:new Error(t.e+"");return this._promise._attachExtraTrace(n),void this._promise._reject(t.e,n)}var i=t.value;if(t.done===!0)this._generator=void 0,this._promise._tryFollow(i)||this._promise._fulfill(i);else{var s=r(i,void 0);if(!(s instanceof e)&&(s=o(s,this._yieldHandlers),null===s))return void this._throw(new u("A value was yielded that could not be treated as a promise"));s._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){a.canAttach(t)&&this._promise._attachExtraTrace(t),this._continue(f(this._generator["throw"],this._generator,t))},s.prototype._next=function(t){this._continue(f(this._generator.next,this._generator,t))},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function");var n=Object(e).yieldHandler,i=s;return function(){var e=t.apply(this,arguments),r=new i(void 0,void 0,n);return r._generator=e,r._next(void 0),r.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("fn must be a function");p.push(t)},e.spawn=function(t){if(l("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof t)return n("generatorFunction must be a function");var i=new s(t,this),r=i.promise();return i._run(e.spawn),r}}},{"./errors.js":11,"./util.js":36}],17:[function(t,e){"use strict";e.exports=function(e,n,i,r){var o=t("./util.js"),s=o.canEvaluate,a=o.tryCatch1,u=o.errorObj;if(s){for(var l=function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))},c=function(t){for(var e=[],n=1;t>=n;++n)e.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))},h=[],f=[void 0],p=1;5>=p;++p)h.push(l(p)),f.push(c(p));var d=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};d.prototype.callers=f,d.prototype.checkFulfillment=function(t){var e=this.now;e++;var n=this.total;if(e>=n){var i=this.callers[n],r=a(i,void 0,this);r===u?t._rejectUnchecked(r.e):t._tryFollow(r)||t._fulfillUnchecked(r)}else this.now=e}}e.join=function(){var t,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(t=arguments[o],6>o&&s)){var a=new e(r);a._setTrace(void 0);for(var u=new d(o,t),l=a._reject,c=h,f=0;o>f;++f){var p=i(arguments[f],void 0);p instanceof e?p.isPending()?p._then(c[f],l,void 0,a,u):p.isFulfilled()?c[f].call(a,p._settledValue,u):(a._reject(p._settledValue),p._unsetRejectionIsUnhandled()):c[f].call(a,p,u)}return a}for(var _=arguments.length,m=new Array(_),g=0;_>g;++g)m[g]=arguments[g];var a=new n(m).promise();return void 0!==t?a.spread(t):a}}},{"./util.js":36}],18:[function(t,e){"use strict";e.exports=function(e,n,i,r,o){function s(t,e,n,i){this.constructor$(t),this._callback=e,this._preservedValues=i===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:f,this._init$(void 0,-2)}function a(t,e,n,i){var r="object"==typeof n&&null!==n?n.concurrency:0;return r="number"==typeof r&&isFinite(r)&&r>=1?r:0,new s(t,e,r,i)}var u=t("./util.js"),l=u.tryCatch3,c=u.errorObj,h={},f=[];u.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var i=this._values;if(null!==i){var o=this.length(),s=this._preservedValues,a=this._limit;if(i[n]===h){if(i[n]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return i[n]=t,void this._queue.push(n);null!==s&&(s[n]=t);var u=this._callback,f=this._promise._boundTo,p=l(u,f,t,n,o);if(p===c)return this._reject(p.e);var d=r(p,void 0);if(d instanceof e){if(d.isPending())return a>=1&&this._inFlight++,i[n]=h,d._proxyPromiseArray(this,n);if(!d.isFulfilled())return d._unsetRejectionIsUnhandled(),this._reject(d.reason());p=d.value()}i[n]=p}var _=++this._totalResolved;_>=o&&(null!==s?this._filter(i,s):this._resolve(i))}},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){var i=t.pop();this._promiseFulfilled(n[i],i)}},s.prototype._filter=function(t,e){for(var n=e.length,i=new Array(n),r=0,o=0;n>o;++o)t[o]&&(i[r++]=e[o]);i.length=r,this._resolve(i)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?i("fn must be a function"):a(this,t,e,null).promise()},e.map=function(t,e,n,r){return"function"!=typeof e?i("fn must be a function"):a(t,e,n,r).promise()}}},{"./util.js":36}],19:[function(t,e){"use strict";e.exports=function(e){function n(t){throw t}function i(t,e){if(!s.isArray(t))return r(t,e);var i=s.tryCatchApply(this,[null].concat(t),e);i===c&&a.invokeLater(n,void 0,i.e)}function r(t,e){var i=this,r=void 0===t?l(i,e,null):u(i,e,null,t);r===c&&a.invokeLater(n,void 0,r.e)}function o(t,e){var i=this,r=l(i,e,t);r===c&&a.invokeLater(n,void 0,r.e)}var s=t("./util.js"),a=t("./async.js"),u=s.tryCatch2,l=s.tryCatch1,c=s.errorObj;e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=r;void 0!==e&&Object(e).spread&&(n=i),this._then(n,o,void 0,t,this._boundTo)}return this}}},{"./async.js":3,"./util.js":36}],20:[function(t,e){"use strict";e.exports=function(e,n){var i=t("./util.js"),r=t("./async.js"),o=t("./errors.js"),s=i.tryCatch1,a=i.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(t)},e.prototype._clearFirstHandlerData$Base=e.prototype._clearFirstHandlerData,e.prototype._clearFirstHandlerData=function(){this._clearFirstHandlerData$Base(),this._progressHandler0=void 0},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var n=t.value,i=t.handler,r=t.promise,u=t.receiver,l=s(i,u,n);if(l===a){if(null!=l.e&&"StopProgressPropagation"!==l.e.name){var c=o.canAttach(l.e)?l.e:new Error(l.e+"");r._attachExtraTrace(c),r._progress(l.e)}}else l instanceof e?l._then(r._progress,null,null,r,void 0):r._progress(l)},e.prototype._progressUnchecked=function(t){if(this.isPending())for(var i=this._length(),o=this._progress,s=0;i>s;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?r.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:t}):r.invoke(o,u,t);else{var l=this._receiverAt(s);"function"==typeof a?a.call(l,t,u):l instanceof e&&l._isProxied()?l._progressUnchecked(t):l instanceof n&&l._promiseProgressed(t,u)}}}}},{"./async.js":3,"./errors.js":11,"./util.js":36}],21:[function(t,e){(function(n){"use strict";function i(t){try{Promise===t&&(Promise=r)}catch(e){}return t}var r;"undefined"!=typeof Promise&&(r=Promise),e.exports=function(){function e(t){if("function"!=typeof t)throw new x("the promise constructor requires a resolver function");if(this.constructor!==e)throw new x("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,t!==u&&this._resolveFromResolver(t)}function r(t){return t[0]}var o=t("./util.js"),s=t("./async.js"),a=t("./errors.js"),u=function(){},l={},c={e:null},h=t("./thenables.js")(e,u),f=t("./promise_array.js")(e,u,h),p=t("./captured_trace.js")(),d=t("./catch_filter.js")(c),_=t("./promise_resolver.js"),m=o.isArray,g=o.errorObj,v=o.tryCatch1,y=o.tryCatch2,b=o.tryCatchApply,w=a.RangeError,x=a.TypeError,M=a.CancellationError,P=a.TimeoutError,k=a.OperationalError,E=a.originatesFromRejection,S=a.markAsOriginatingFromRejection,L=a.canAttach,C=o.thrower,T=t("./errors_api_rejection")(e),A=function(){return new x("circular promise resolution chain")};e.prototype.bind=function(t){var n=h(t,void 0),i=new e(u);if(n instanceof e){var o=n.then(function(t){i._setBoundTo(t)}),s=e.all([this,o]).then(r);i._follow(s)}else i._follow(this),i._setBoundTo(t);return i._propagateFrom(this,3),i},e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var n=arguments.length;if(n>1){var i,r=new Array(n-1),o=0;for(i=0;n-1>i;++i){var s=arguments[i];if("function"!=typeof s){var a=new x("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(a),e.reject(a)}r[o++]=s}r.length=o,t=arguments[i],this._resetTrace();var u=new d(r,t,this);return this._then(void 0,u.doFilter,void 0,u,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.then=function(t,e,n){return this._then(t,e,n,void 0,void 0)},e.prototype.done=function(t,e,n){var i=this._then(t,e,n,void 0,void 0);i._setIsFinal()},e.prototype.spread=function(t,e){return this._then(t,e,void 0,l,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this._settledValue,t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this._settledValue,t.isRejected=!0),t},e.prototype.all=function(){return new f(this).promise()},e.is=function(t){return t instanceof e},e.all=function(t){return new f(t).promise()},e.prototype.error=function(t){return this.caught(E,t)},e.prototype._resolveFromSyncValue=function(t){if(t===g)this._cleanValues(),this._setRejected(),this._settledValue=t.e,this._ensurePossibleRejectionHandled();else{var n=h(t,void 0);n instanceof e?this._follow(n):(this._cleanValues(),this._setFulfilled(),this._settledValue=t)}},e.method=function(t){if("function"!=typeof t)throw new x("fn must be a function");return function(){var n;switch(arguments.length){case 0:n=v(t,this,void 0);break;case 1:n=v(t,this,arguments[0]);break;case 2:n=y(t,this,arguments[0],arguments[1]);break;default:for(var i=arguments.length,r=new Array(i),o=0;i>o;++o)r[o]=arguments[o];n=b(t,r,this)}var s=new e(u);return s._setTrace(void 0),s._resolveFromSyncValue(n),s}},e.attempt=e["try"]=function(t,n,i){if("function"!=typeof t)return T("fn must be a function");var r=m(n)?b(t,n,i):v(t,i,n),o=new e(u);return o._setTrace(void 0),o._resolveFromSyncValue(r),o},e.defer=e.pending=function(){var t=new e(u);return t._setTrace(void 0),new _(t)},e.bind=function(t){var n=h(t,void 0),i=new e(u);if(i._setTrace(void 0),n instanceof e){var r=n.then(function(t){i._setBoundTo(t)});i._follow(r)}else i._setBoundTo(t),i._setFulfilled();return i},e.cast=function(t){var n=h(t,void 0);if(!(n instanceof e)){var i=n;n=new e(u),n._setTrace(void 0),n._setFulfilled(),n._cleanValues(),n._settledValue=i}return n},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var n=new e(u);if(n._setTrace(void 0),S(t),n._cleanValues(),n._setRejected(),n._settledValue=t,!L(t)){var i=new Error(t+"");n._setCarriedStackTrace(i)}return n._ensurePossibleRejectionHandled(),n},e.onPossiblyUnhandledRejection=function(t){p.possiblyUnhandledRejection="function"==typeof t?t:void 0};var D;e.onUnhandledRejectionHandled=function(t){D="function"==typeof t?t:void 0};var j=!1||!("undefined"==typeof n||"string"!=typeof n.execPath||"object"!=typeof n.env||!n.env.BLUEBIRD_DEBUG&&"development"!==n.env.NODE_ENV);e.longStackTraces=function(){if(s.haveItemsQueued()&&j===!1)throw new Error("cannot enable long stack traces after promises have been created");j=p.isSupported()},e.hasLongStackTraces=function(){return j&&p.isSupported()},e.prototype._then=function(t,n,i,r,o){var a=void 0!==o,l=a?o:new e(u);if(!a){if(j){var c=this._peekContext()===this._traceParent;l._traceParent=c?this._traceParent:this}l._propagateFrom(this,7)}var h=this._addCallbacks(t,n,i,l,r);return this.isResolved()&&s.invoke(this._queueSettleAt,this,h),l},e.prototype._length=function(){return 262143&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-262144&this._bitField|262143&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[(t<<2)+t-5+4];return this._isBound()&&void 0===e?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[(t<<2)+t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[(t<<2)+t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[(t<<2)+t-5+1]},e.prototype._addCallbacks=function(t,e,n,i,r){var o=this._length();if(o>=262138&&(o=0,this._setLength(0)),0===o)this._promise0=i,void 0!==r&&(this._receiver0=r),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof n&&(this._progressHandler0=n);else{var s=(o<<2)+o-5;this[s+3]=i,this[s+4]=r,this[s+0]="function"==typeof t?t:void 0,this[s+1]="function"==typeof e?e:void 0,this[s+2]="function"==typeof n?n:void 0}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var n=this._length();if(n>=262138&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var i=(n<<2)+n-5;this[i+3]=e,this[i+4]=t,this[i+0]=this[i+1]=this[i+2]=void 0}this._setLength(n+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._proxyPromise=function(t){t._setProxied(),this._setProxyHandlers(t,-15)},e.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=8388608|this._bitField,this._boundTo=t):this._bitField=-8388609&this._bitField},e.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},e.prototype._resolveFromResolver=function(t){function e(t){i._tryFollow(t)||i._fulfill(t)}function n(t){var e=L(t)?t:new Error(t+"");i._attachExtraTrace(e),S(t),i._reject(t,e===t?void 0:e)}var i=this;this._setTrace(void 0),this._pushContext();var r=y(t,void 0,e,n);if(this._popContext(),void 0!==r&&r===g){var o=r.e,s=L(o)?o:new Error(o+"");
i._reject(o,s)}},e.prototype._spreadSlowCase=function(t,e,n,i){var r=new f(n).promise(),o=r._then(function(){return t.apply(i,arguments)},void 0,void 0,l,void 0);e._follow(o)},e.prototype._callSpread=function(t,n,i){var r=this._boundTo;if(m(i))for(var o=0,s=i.length;s>o;++o)if(h(i[o],void 0)instanceof e)return void this._spreadSlowCase(t,n,i,r);return n._pushContext(),b(t,i,r)},e.prototype._callHandler=function(t,e,n,i){var r;return e!==l||this.isRejected()?(n._pushContext(),r=v(t,e,i)):r=this._callSpread(t,n,i),n._popContext(),r},e.prototype._settlePromiseFromHandler=function(t,n,i,r){if(!(r instanceof e))return void t.call(n,i,r);var o=this._callHandler(t,n,r,i);if(!r._isFollowing())if(o===g||o===r||o===c){var s=o===r?A():o.e,a=L(s)?s:new Error(s+"");o!==c&&r._attachExtraTrace(a),r._rejectUnchecked(s,a)}else{var u=h(o,r);if(u instanceof e){if(u.isRejected()&&!u._isCarryingStackTrace()&&!L(u._settledValue)){var a=new Error(u._settledValue+"");r._attachExtraTrace(a),u._setCarriedStackTrace(a)}r._follow(u),r._propagateFrom(u,1)}else r._fulfillUnchecked(o)}},e.prototype._follow=function(t){this._setFollowing(),t.isPending()?(this._propagateFrom(t,1),t._proxyPromise(this)):t.isFulfilled()?this._fulfillUnchecked(t._settledValue):this._rejectUnchecked(t._settledValue,t._getCarriedStackTrace()),t._isRejectionUnhandled()&&t._unsetRejectionIsUnhandled(),j&&null==t._traceParent&&(t._traceParent=this)},e.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var n=h(t,void 0);return n instanceof e?(this._follow(n),!0):!1},e.prototype._resetTrace=function(){j&&(this._trace=new p(void 0===this._peekContext()))},e.prototype._setTrace=function(t){if(j){var e=this._peekContext();this._traceParent=e;var n=void 0===e;this._trace=void 0!==t&&t._traceParent===e?t._trace:new p(n)}return this},e.prototype._attachExtraTrace=function(t){if(j){var e=this,n=t.stack;n="string"==typeof n?n.split("\n"):[],p.protectErrorMessageNewlines(n);for(var i=1,r=1;null!=e&&null!=e._trace;)n=p.combine(n,e._trace.stack.split("\n")),e=e._traceParent,r++;var o=Error.stackTraceLimit||10,s=(o+i)*r,a=n.length;a>s&&(n.length=s),a>0&&(n[0]=n[0].split("\x00").join("\n")),t.stack=n.length<=i?"(No stack trace)":n.join("\n")}},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&this._setBoundTo(t._boundTo),(2&e)>0&&this._setTrace(t)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var n=this.isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),i=this._settledValue,r=this._receiverAt(t),o=this._promiseAt(t);if("function"==typeof n)this._settlePromiseFromHandler(n,r,i,o);else{var s=!1,a=this.isFulfilled();void 0!==r&&(r instanceof e&&r._isProxied()?(r._unsetProxied(),a?r._fulfillUnchecked(i):r._rejectUnchecked(i,this._getCarriedStackTrace()),s=!0):r instanceof f&&(a?r._promiseFulfilled(i,o):r._promiseRejected(i,o),s=!0)),s||(a?o._fulfill(i):o._reject(i,this._getCarriedStackTrace()))}t>=4&&this._queueGC()},e.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},e.prototype._setProxied=function(){this._bitField=4194304|this._bitField},e.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},e.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),s.invokeLater(this._gc,this,void 0))},e.prototype._gc=function(){for(var t=5*this._length()-5,e=0;t>e;e++)delete this[e];this._clearFirstHandlerData(),this._setLength(0),this._unsetGcQueued()},e.prototype._clearFirstHandlerData=function(){this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0},e.prototype._queueSettleAt=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),s.invoke(this._settlePromiseAt,this,t)},e.prototype._fulfillUnchecked=function(t){if(this.isPending()){if(t===this){var e=A();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=t;var n=this._length();n>0&&s.invoke(this._settlePromises,this,n)}},e.prototype._rejectUncheckedCheckError=function(t){var e=L(t)?t:new Error(t+"");this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(this.isPending()){if(t===this){var n=A();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._cleanValues(),this._setRejected(),this._settledValue=t,this._isFinal())return void s.invokeLater(C,void 0,void 0===e?t:e);var i=this._length();void 0!==e&&this._setCarriedStackTrace(e),i>0?s.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},e.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},e.prototype._settlePromises=function(){for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==p.possiblyUnhandledRejection&&s.invokeLater(this._notifyUnhandledRejection,this,void 0)},e.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof D&&s.invokeLater(D,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue,e=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==e&&(this._unsetCarriedStackTrace(),t=e),"function"==typeof p.possiblyUnhandledRejection&&p.possiblyUnhandledRejection(t,this)}};var O=[];return e.prototype._peekContext=function(){var t=O.length-1;return t>=0?O[t]:void 0},e.prototype._pushContext=function(){j&&O.push(this)},e.prototype._popContext=function(){j&&O.pop()},e.noConflict=function(){return i(e)},e.setScheduler=function(t){if("function"!=typeof t)throw new x("fn must be a function");s._schedule=t},p.isSupported()||(e.longStackTraces=function(){},j=!1),e._makeSelfResolutionError=A,t("./finally.js")(e,c,h),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,f,h,u),e.RangeError=w,e.CancellationError=M,e.TimeoutError=P,e.TypeError=x,e.OperationalError=k,e.RejectionError=k,e.AggregateError=a.AggregateError,o.toFastProperties(e),o.toFastProperties(e.prototype),e.Promise=e,t("./timers.js")(e,u,h),t("./race.js")(e,u,h),t("./call_get.js")(e),t("./generators.js")(e,T,u,h),t("./map.js")(e,f,T,h,u),t("./nodeify.js")(e),t("./promisify.js")(e,u),t("./props.js")(e,f,h),t("./reduce.js")(e,f,T,h,u),t("./settle.js")(e,f),t("./some.js")(e,f,T),t("./progress.js")(e,f),t("./cancel.js")(e,u),t("./filter.js")(e,u),t("./any.js")(e,f),t("./each.js")(e,u),t("./using.js")(e,T,h),e.prototype=e.prototype,e}}).call(this,t("FWaASH"))},{"./any.js":2,"./async.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./direct_resolve.js":9,"./each.js":10,"./errors.js":11,"./errors_api_rejection":12,"./filter.js":14,"./finally.js":15,"./generators.js":16,"./join.js":17,"./map.js":18,"./nodeify.js":19,"./progress.js":20,"./promise_array.js":22,"./promise_resolver.js":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection.js":32,"./thenables.js":33,"./timers.js":34,"./using.js":35,"./util.js":36,FWaASH:37}],22:[function(t,e){"use strict";e.exports=function(e,n,i){function r(t){switch(t){case-1:return void 0;case-2:return[];case-3:return{}}}function o(t){var i=this._promise=new e(n),r=void 0;t instanceof e&&(r=t,i._propagateFrom(r,5)),i._setTrace(r),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=t("./errors.js").canAttach,a=t("./util.js"),u=a.isArray;return o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function l(t,n){var o=i(this._values,void 0);if(o instanceof e){if(this._values=o,o._setBoundTo(this._promise._boundTo),!o.isFulfilled())return o.isPending()?void o._then(l,this._reject,void 0,this,n):(o._unsetRejectionIsUnhandled(),void this._reject(o._settledValue));if(o=o._settledValue,!u(o)){var s=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(s)}}else if(!u(o)){var s=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(s)}if(0===o.length)return void(-5===n?this._resolveEmptyArray():this._resolve(r(n)));for(var a=this.getActualLength(o.length),c=a,h=this.shouldCopyValues()?new Array(a):this._values,f=!1,p=0;a>p;++p){var d=i(o[p],void 0);d instanceof e?d.isPending()?d._proxyPromiseArray(this,p):(d._unsetRejectionIsUnhandled(),f=!0):f=!0,h[p]=d}this._values=h,this._length=c,f&&this._scanDirectValues(a)},o.prototype._settlePromiseAt=function(t){var n=this._values[t];n instanceof e?n.isFulfilled()?this._promiseFulfilled(n._settledValue,t):n.isRejected()&&this._promiseRejected(n._settledValue,t):this._promiseFulfilled(n,t)},o.prototype._scanDirectValues=function(t){for(var e=0;t>e&&!this._isResolved();++e)this._settlePromiseAt(e)},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},o.prototype.__hardReject__=o.prototype._reject=function(t){this._values=null;var e=s(t)?t:new Error(t+"");this._promise._attachExtraTrace(e),this._promise._reject(t,e)},o.prototype._promiseProgressed=function(t,e){this._isResolved()||this._promise._progress({index:e,value:t})},o.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)}},o.prototype._promiseRejected=function(t){this._isResolved()||(this._totalResolved++,this._reject(t))},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(t){return t},o}},{"./errors.js":11,"./util.js":36}],23:[function(t,e){"use strict";function n(t){return t instanceof Error&&p.getPrototypeOf(t)===Error.prototype}function i(t){var e;return e=n(t)?new c(t):t,u.markAsOriginatingFromRejection(e),e}function r(t){function e(e,n){if(null!==t){if(e){var r=i(a(e));t._attachExtraTrace(r),t._reject(r)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),u=1;o>u;++u)s[u-1]=arguments[u];t._fulfill(s)}else t._fulfill(n);t=null}}return e}var o,s=t("./util.js"),a=s.maybeWrapAsError,u=t("./errors.js"),l=u.TimeoutError,c=u.OperationalError,h=t("./async.js"),f=s.haveGetters,p=t("./es5.js");if(o=f?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=r(t),this.callback=this.asCallback},f){var d={get:function(){return r(this.promise)}};p.defineProperty(o.prototype,"asCallback",d),p.defineProperty(o.prototype,"callback",d)}o._nodebackForPromise=r,o.prototype.toString=function(){return"[object PromiseResolver]"},o.prototype.resolve=o.prototype.fulfill=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;e._tryFollow(t)||h.invoke(e._fulfill,e,t)},o.prototype.reject=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;u.markAsOriginatingFromRejection(t);var n=u.canAttach(t)?t:new Error(t+"");e._attachExtraTrace(n),h.invoke(e._reject,e,t),n!==t&&h.invoke(this._setCarriedStackTrace,this,n)},o.prototype.progress=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");h.invoke(this.promise._progress,this.promise,t)},o.prototype.cancel=function(){h.invoke(this.promise.cancel,this.promise,void 0)},o.prototype.timeout=function(){this.reject(new l("timeout"))},o.prototype.isResolved=function(){return this.promise.isResolved()},o.prototype.toJSON=function(){return this.promise.toJSON()},o.prototype._setCarriedStackTrace=function(t){this.promise.isRejected()&&this.promise._setCarriedStackTrace(t)},e.exports=o},{"./async.js":3,"./errors.js":11,"./es5.js":13,"./util.js":36}],24:[function(t,e){"use strict";e.exports=function(e,n){function i(t){return t.replace(/([$])/,"\\$")}function r(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var i=v.getDataPropertyOrDefault(t,e+n,E);return i?r(i):!1}function s(t,e,n){for(var i=0;i<t.length;i+=2){var r=t[i];if(n.test(r))for(var o=r.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new M("Cannot promisify an API that has normal methods with '"+e+"'-suffix")}}function a(t,e,n,i){for(var a=v.inheritedDataKeys(t),u=[],l=0;l<a.length;++l){var c=a[l],h=t[c];"function"!=typeof h||r(h)||o(t,c,e)||!i(c,h,t)||u.push(c,h)}return s(u,e,n),u}function u(t){for(var e=[t],n=Math.max(0,t-1-5),i=t-1;i>=n;--i)i!==t&&e.push(i);for(var i=t+1;5>=i;++i)e.push(i);return e}function l(t){return v.filledRange(t,"arguments[","]")}function c(t){return v.filledRange(t,"_arg","")}function h(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0}function f(t){return v.isIdentifier(t)?"."+t:"['"+t.replace(/(['\\])/g,"\\$1")+"']"}function p(t,i,r,o,s){function a(e){var n,r=l(e).join(", "),o=e>0?", ":"";return n="string"==typeof t?"                                                          \n                this.method(args, fn);                                       \n                break;                                                       \n            ".replace(".method",f(t)):i===g?"                                                         \n                callback.call(this, args, fn);                               \n                break;                                                       \n            ":void 0!==i?"                                                         \n                callback.call(receiver, args, fn);                           \n                break;                                                       \n            ":"                                                         \n                callback(args, fn);                                          \n                break;                                                       \n            ",n.replace("args",r).replace(", ",o)}function p(){for(var e="",n=0;n<_.length;++n)e+="case "+_[n]+":"+a(_[n]);var r;return r="string"==typeof t?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",f(t)):i===g?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ",e+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",r)}var d=Math.max(0,h(o)-1),_=u(d),m="string"==typeof r&&v.isIdentifier(r)?r+s:"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",m).replace("Parameters",c(d)).replace("[CodeForSwitchCase]",p()))(e,t,i,b,w,y,n)}function d(t,i){function r(){var r=i;i===g&&(r=this),"string"==typeof t&&(t=r[t]);var o=new e(n);o._setTrace(void 0);var s=y(o);try{t.apply(r,b(arguments,s))}catch(a){var u=w(a);o._attachExtraTrace(u),o._reject(u)}return o}return r.__isPromisified__=!0,r}function _(t,e,n,r){for(var o=new RegExp(i(e)+"$"),s=a(t,e,o,n),u=0,l=s.length;l>u;u+=2){var c=s[u],h=s[u+1],f=c+e;t[f]=r===S?S(c,g,c,h,e):r(h)}return v.toFastProperties(t),t}function m(t,e){return S(t,e,void 0,t)}var g={},v=t("./util.js"),y=t("./promise_resolver.js")._nodebackForPromise,b=v.withAppended,w=v.maybeWrapAsError,x=v.canEvaluate,M=t("./errors").TypeError,P="Async",k=function(t,e){return v.isIdentifier(t)&&"_"!==t.charAt(0)&&!v.isClass(e)},E={__isPromisified__:!0},S=x?p:d;e.promisify=function(t,e){if("function"!=typeof t)throw new M("fn must be a function");return r(t)?t:m(t,arguments.length<2?g:e)},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new M("the target of promisifyAll must be an object or a function");e=Object(e);var n=e.suffix;"string"!=typeof n&&(n=P);var i=e.filter;"function"!=typeof i&&(i=k);var r=e.promisifier;if("function"!=typeof r&&(r=S),!v.isIdentifier(n))throw new RangeError("suffix must be a valid identifier");for(var o=v.inheritedDataKeys(t,{includeHidden:!0}),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&v.isClass(a)&&(_(a.prototype,n,i,r),_(a,n,i,r))}return _(t,n,i,r)}}},{"./errors":11,"./promise_resolver.js":23,"./util.js":36}],25:[function(t,e){"use strict";e.exports=function(e,n,i){function r(t){for(var e=l.keys(t),n=e.length,i=new Array(2*n),r=0;n>r;++r){var o=e[r];i[r]=t[o],i[r+n]=o}this.constructor$(i)}function o(t){var n,o=i(t,void 0);return u(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new r(o).promise(),o instanceof e&&n._propagateFrom(o,4),n):a("cannot await properties of a non-object")}var s=t("./util.js"),a=t("./errors_api_rejection")(e),u=s.isObject,l=t("./es5.js");s.inherits(r,n),r.prototype._init=function(){this._init$(void 0,-3)},r.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){for(var i={},r=this.length(),o=0,s=this.length();s>o;++o)i[this._values[o+r]]=this._values[o];this._resolve(i)}}},r.prototype._promiseProgressed=function(t,e){this._isResolved()||this._promise._progress({key:this._values[e+this.length()],value:t})},r.prototype.shouldCopyValues=function(){return!1},r.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return o(this)},e.props=function(t){return o(t)}}},{"./errors_api_rejection":12,"./es5.js":13,"./util.js":36}],26:[function(t,e){"use strict";function n(t,e,n,i,r){for(var o=0;r>o;++o)n[o+i]=t[o+e]}function i(t){this._capacity=t,this._length=0,this._front=0,this._makeCapacity()}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype.push=function(t,e,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[r+0&o]=t,this[r+1&o]=e,this[r+2&o]=n,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._makeCapacity=function(){for(var t=this._capacity,e=0;t>e;++e)this[e]=void 0},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<3)},i.prototype._resizeTo=function(t){var e=this._front,i=this._capacity,r=new Array(i),o=this.length();if(n(this,0,r,0,i),this._capacity=t,this._makeCapacity(),this._front=0,i>=e+o)n(r,e,this,0,o);else{var s=o-(e+o&i-1);n(r,e,this,0,s),n(r,0,this,s,o-s)}},e.exports=i},{}],27:[function(t,e){"use strict";e.exports=function(e,n,i){function r(t,r){var l=i(t,void 0);if(l instanceof e)return a(l);if(!s(t))return o("expecting an array, a promise or a thenable");var c=new e(n);void 0!==r?c._propagateFrom(r,7):c._setTrace(void 0);for(var h=c._fulfill,f=c._reject,p=0,d=t.length;d>p;++p){var _=t[p];(void 0!==_||u.call(t,p))&&e.cast(_)._then(h,f,void 0,c,null)}return c}var o=t("./errors_api_rejection.js")(e),s=t("./util.js").isArray,a=function(t){return t.then(function(e){return r(e,t)})},u={}.hasOwnProperty;e.race=function(t){return r(t,void 0)},e.prototype.race=function(){return r(this,void 0)}}},{"./errors_api_rejection.js":12,"./util.js":36}],28:[function(t,e){"use strict";e.exports=function(e,n,i,r,o){function s(t,n,i,s){this.constructor$(t),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===i,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var a=r(i,void 0),u=!1,l=a instanceof e;l&&(a.isPending()?a._proxyPromiseArray(this,-1):a.isFulfilled()?(i=a.value(),this._gotAccum=!0):(a._unsetRejectionIsUnhandled(),this._reject(a.reason()),u=!0)),l||this._zerothIsAccum||(this._gotAccum=!0),this._callback=n,this._accum=i,u||this._init$(void 0,-5)}function a(t,e,n,r){if("function"!=typeof e)return i("fn must be a function");var o=new s(t,e,n,r);return o.promise()}var u=t("./util.js"),l=u.tryCatch4,c=u.tryCatch3,h=u.errorObj;u.inherits(s,n),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,n){var i=this._values;if(null!==i){var o,s=this.length(),a=this._preservedValues,u=null!==a,f=this._gotAccum,p=this._valuesPhase;if(!p)for(p=this._valuesPhase=Array(s),o=0;s>o;++o)p[o]=0;if(o=p[n],0===n&&this._zerothIsAccum?(f||(this._accum=t,this._gotAccum=f=!0),p[n]=0===o?1:2):-1===n?f||(this._accum=t,this._gotAccum=f=!0):0===o?p[n]=1:(p[n]=2,f&&(this._accum=t)),f){for(var d,_=this._callback,m=this._promise._boundTo,g=this._reducingIndex;s>g;++g)if(o=p[g],2!==o){if(1!==o)return;if(t=i[g],t instanceof e){if(!t.isFulfilled())return t.isPending()?void 0:(t._unsetRejectionIsUnhandled(),this._reject(t.reason()));t=t._settledValue}if(u?(a.push(t),d=c(_,m,t,g,s)):d=l(_,m,this._accum,t,g,s),d===h)return this._reject(d.e);var v=r(d,void 0);if(v instanceof e){if(v.isPending())return p[g]=4,v._proxyPromiseArray(this,g);if(!v.isFulfilled())return v._unsetRejectionIsUnhandled(),this._reject(v.reason());d=v.value()}this._reducingIndex=g+1,this._accum=d}else this._reducingIndex=g+1;this._reducingIndex<s||this._resolve(u?a:this._accum)}}},e.prototype.reduce=function(t,e){return a(this,t,e,null)},e.reduce=function(t,e,n,i){return a(t,e,n,i)}}},{"./util.js":36}],29:[function(t,e){(function(t){"use strict";var n,i;if("object"==typeof t&&"string"==typeof t.version)n=function(e){t.nextTick(e)};else if("undefined"!=typeof MutationObserver&&(i=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(i=WebKitMutationObserver))n=function(){var t=document.createElement("div"),e=void 0,n=new i(function(){var t=e;e=void 0,t()});return n.observe(t,{attributes:!0}),function(n){e=n,t.classList.toggle("foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");n=function(t){setTimeout(t,0)}}e.exports=n}).call(this,t("FWaASH"))},{FWaASH:37}],30:[function(t,e){"use strict";e.exports=function(e,n){function i(t){this.constructor$(t)}var r=e.PromiseInspection,o=t("./util.js");o.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},i.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){var n=new r;n._bitField=268435456,n._settledValue=t,this._promiseResolved(e,n)}},i.prototype._promiseRejected=function(t,e){if(!this._isResolved()){var n=new r;n._bitField=134217728,n._settledValue=t,this._promiseResolved(e,n)}},e.settle=function(t){return new i(t).promise()},e.prototype.settle=function(){return new i(this).promise()}}},{"./util.js":36}],31:[function(t,e){"use strict";e.exports=function(e,n,i){function r(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return i("expecting a positive integer");var n=new r(t),o=n.promise();return o.isRejected()?o:(n.setHowMany(e),n.init(),o)}var s=t("./util.js"),a=t("./errors.js").RangeError,u=t("./errors.js").AggregateError,l=s.isArray;s.inherits(r,n),r.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},r.prototype.init=function(){this._initialized=!0,this._init()},r.prototype.setUnwrap=function(){this._unwrap=!0},r.prototype.howMany=function(){return this._howMany},r.prototype.setHowMany=function(t){this._isResolved()||(this._howMany=t)},r.prototype._promiseFulfilled=function(t){this._isResolved()||(this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values)))},r.prototype._promiseRejected=function(t){if(!this._isResolved()&&(this._addRejected(t),this.howMany()>this._canPossiblyFulfill())){for(var e=new u,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},r.prototype._fulfilled=function(){return this._totalResolved},r.prototype._rejected=function(){return this._values.length-this.length()},r.prototype._addRejected=function(t){this._values.push(t)},r.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},r.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},r.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},r.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=r}},{"./errors.js":11,"./util.js":36}],32:[function(t,e){"use strict";e.exports=function(t){function e(t){void 0!==t?(this._bitField=t._bitField,this._settledValue=t.isResolved()?t._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}e.prototype.isFulfilled=t.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype.isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype.isPending=function(){return 0===(402653184&this._bitField)},e.prototype.value=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},e.prototype.error=e.prototype.reason=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},e.prototype.isResolved=t.prototype.isResolved=function(){return(402653184&this._bitField)>0},t.PromiseInspection=e}},{}],33:[function(t,e){"use strict";e.exports=function(e,n){function i(t){try{return t.then}catch(e){return l.e=e,l}}function r(t,r){if(c(t)){if(t instanceof e)return t;if(o(t)){var a=new e(n);return a._setTrace(void 0),t._then(a._fulfillUnchecked,a._rejectUncheckedCheckError,a._progressUnchecked,a,null),a._setFollowing(),a}var h=i(t);if(h===l)return void 0!==r&&u(h.e)&&r._attachExtraTrace(h.e),e.reject(h.e);if("function"==typeof h)return s(t,h,r)}return t}function o(t){return h.call(t,"_promise0")}function s(t,n,i){function r(n){if(!l){if(l=!0,t===n){var r=e._makeSelfResolutionError();return void 0!==i&&i._attachExtraTrace(r),void a.promise._reject(r,void 0)}a.resolve(n)}}function o(t){if(!l){l=!0;var e=u(t)?t:new Error(t+"");void 0!==i&&i._attachExtraTrace(e),a.promise._reject(t,e)}}function s(t){if(!l){var e=a.promise;"function"==typeof e._progress&&e._progress(t)}}var a=e.defer(),l=!1;try{n.call(t,r,o,s)}catch(c){if(!l){l=!0;var h=u(c)?c:new Error(c+"");void 0!==i&&i._attachExtraTrace(h),a.promise._reject(c,h)}}return a.promise}var a=t("./util.js"),u=t("./errors.js").canAttach,l=a.errorObj,c=a.isObject,h={}.hasOwnProperty;return r}},{"./errors.js":11,"./util.js":36}],34:[function(t,e){"use strict";var n=function(t,e){var n=arguments.length,i=arguments[2],r=arguments[3],o=n>=5?arguments[4]:void 0;setTimeout(function(){t(i,r,o)},0|e)};e.exports=function(e,i,r){var o=(t("./util.js"),t("./errors.js")),s=(t("./errors_api_rejection")(e),e.TimeoutError),a=function(t,e,n){if(t.isPending()){"string"!=typeof e&&(e="operation timed out after "+n+" ms");var i=new s(e);o.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._cancel(i)}},u=function(t,e){e._fulfill(t)},l=e.delay=function(t,o){void 0===o&&(o=t,t=void 0),o=+o;var s=r(t,void 0),a=new e(i);return s instanceof e?(a._propagateFrom(s,7),a._follow(s),a.then(function(t){return e.delay(t,o)})):(a._setTrace(void 0),n(u,o,t,a),a)};e.prototype.delay=function(t){return l(this,t)},e.prototype.timeout=function(t,r){t=+t;var o=new e(i);return o._propagateFrom(this,7),o._follow(this),n(a,t,o,r,t),o.cancellable()}}},{"./errors.js":11,"./errors_api_rejection":12,"./util.js":36}],35:[function(t,e){"use strict";e.exports=function(e,n,i){function r(t){for(var n=t.length,i=0;n>i;++i){var r=t[i];if(r.isRejected())return e.reject(r.error());t[i]=r.value()}return t}function o(t){setTimeout(function(){throw t},0)}function s(t){var e=i(t,void 0);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function a(t,n){function r(){if(a>=u)return l.resolve();var c=s(t[a++]);if(c instanceof e&&c._isDisposable()){try{c=i(c._getDisposer().tryDispose(n),void 0)}catch(h){return o(h)
}if(c instanceof e)return c._then(r,o,null,null,null)}r()}var a=0,u=t.length,l=e.defer();return r(),l.promise}function u(t){var e=new d;return e._settledValue=t,e._bitField=268435456,a(this,e).thenReturn(t)}function l(t){var e=new d;return e._settledValue=t,e._bitField=134217728,a(this,e).thenThrow(t)}function c(t,e){this._data=t,this._promise=e}function h(t,e){this.constructor$(t,e)}var f=t("./errors.js").TypeError,p=t("./util.js").inherits,d=e.PromiseInspection;c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},c.prototype.tryDispose=function(t){var e=this.resource(),n=null!==e?this.doDispose(e,t):null;return this._promise._unsetDisposable(),this._data=this._promise=null,n},c.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},p(h,c),h.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("fn must be a function");t--;for(var o=new Array(t),s=0;t>s;++s){var a=arguments[s];if(c.isDisposer(a)){var h=a;a=a.promise(),a._setDisposable(h)}o[s]=a}return e.settle(o).then(r).spread(i)._then(u,l,void 0,o,void 0)},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this);throw new f}}},{"./errors.js":11,"./util.js":36}],36:[function(t,e,n){"use strict";function i(t,e,n){try{return t.call(e,n)}catch(i){return M.e=i,M}}function r(t,e,n,i){try{return t.call(e,n,i)}catch(r){return M.e=r,M}}function o(t,e,n,i,r){try{return t.call(e,n,i,r)}catch(o){return M.e=o,M}}function s(t,e,n,i,r,o){try{return t.call(e,n,i,r,o)}catch(s){return M.e=s,M}}function a(t,e,n){try{return t.apply(n,e)}catch(i){return M.e=i,M}}function u(t){return"string"==typeof t?t:""+t}function l(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function c(t){return!l(t)}function h(t){return l(t)?new Error(u(t)):t}function f(t,e){var n,i=t.length,r=new Array(i+1);for(n=0;i>n;++n)r[n]=t[n];return r[n]=e,r}function p(t,e,n){if(!b.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function d(t,e,n){if(l(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return b.defineProperty(t,e,i),t}function _(t){throw t}function m(t){try{if("function"==typeof t){var e=b.keys(t.prototype);return e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(n){return!1}}function g(t){function e(){}return e.prototype=t,e}function v(t){return S.test(t)}function y(t,e,n){for(var i=new Array(t),r=0;t>r;++r)i[r]=e+r+n;return i}var b=t("./es5.js"),w=function(){try{var t={};return b.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),x="undefined"==typeof navigator,M={e:{}},P=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)i.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var i={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},k=function(){return"string"!==this}.call("string"),E=function(){return b.isES5?function(t,e){for(var n=[],i=Object.create(null),r=Object(e).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=t;){var o;try{o=r(t)}catch(s){return n}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var l=Object.getOwnPropertyDescriptor(t,u);null!=l&&null==l.get&&null==l.set&&n.push(u)}}t=b.getPrototypeOf(t)}return n}:function(t){var e=[];for(var n in t)e.push(n);return e}}(),S=/^[a-z$_][a-z$_0-9]*$/i,L={isClass:m,isIdentifier:v,inheritedDataKeys:E,getDataPropertyOrDefault:p,thrower:_,isArray:b.isArray,haveGetters:w,notEnumerableProp:d,isPrimitive:l,isObject:c,canEvaluate:x,errorObj:M,tryCatch1:i,tryCatch2:r,tryCatch3:o,tryCatch4:s,tryCatchApply:a,inherits:P,withAppended:f,asString:u,maybeWrapAsError:h,wrapsPrimitiveReceiver:k,toFastProperties:g,filledRange:y};e.exports=L},{"./es5.js":13}],37:[function(t,e){function n(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],38:[function(t,e){e.exports=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function i(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function r(){}function o(){}function s(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function a(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,i=fa.length;i>n;++n){var r=fa[n]+e;if(r in t)return r}}function u(){}function l(){}function c(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new r;return e.on=function(e,r){var o,s=i.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function h(){$s.event.preventDefault()}function f(){for(var t,e=$s.event;t=e.sourceEvent;)e=t;return e}function p(t){for(var e=new l,n=0,i=arguments.length;++n<i;)e[arguments[n]]=c(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=$s.event;r.target=t,$s.event=r,e[r.type].apply(n,i)}finally{$s.event=o}}},e}function d(t){return da(t,ya),t}function _(t){return"function"==typeof t?t:function(){return _a(t,this)}}function m(t){return"function"==typeof t?t:function(){return ma(t,this)}}function g(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=$s.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?a:s:t.local?o:r}function v(t){return t.trim().replace(/\s+/g," ")}function y(t){return new RegExp("(?:^|\\s+)"+$s.requote(t)+"(?:\\s+|$)","g")}function b(t){return t.trim().split(/^|\s+/)}function w(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=b(t).map(x);var r=t.length;return"function"==typeof e?i:n}function x(t){var e=y(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",v(r+" "+t))):n.setAttribute("class",v(r.replace(e," ")))}}function M(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function P(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function k(t){return"function"==typeof t?t:(t=$s.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function E(t){return{__data__:t}}function S(t){return function(){return va(this,t)}}function L(t){return arguments.length||(t=$s.ascending),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function C(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,o=t[n],s=0,a=o.length;a>s;s++)(r=o[s])&&e(r,s,n);return t}function T(t){return da(t,wa),t}function A(t){var e,n;return function(i,r,o){var s,a=t[o].update,u=a.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(s=a[e])&&++e<u;);return s}}function D(){var t=this.__transition__;t&&++t.active}function j(t,e,n){function i(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function r(){var r=l(e,Js(arguments));i.call(this),this.addEventListener(t,this[s]=r,r.$=n),r._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+$s.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var s="__on"+t,a=t.indexOf("."),l=O;a>0&&(t=t.substring(0,a));var c=Ma.get(t);return c&&(t=c,l=N),a?e?r:i:e?u:o}function O(t,e){return function(n){var i=$s.event;$s.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{$s.event=i}}}function N(t,e){var n=O(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function R(){var t=".dragsuppress-"+ ++ka,e="click"+t,n=$s.select(ta).on("touchmove"+t,h).on("dragstart"+t,h).on("selectstart"+t,h);if(Pa){var i=Qs.style,r=i[Pa];i[Pa]="none"}return function(o){function s(){n.on(e,null)}n.on(t,null),Pa&&(i[Pa]=r),o&&(n.on(e,function(){h(),s()},!0),setTimeout(s,0))}}function U(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Ea&&(ta.scrollX||ta.scrollY)){n=$s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=n[0][0].getScreenCTM();Ea=!(r.f||r.e),n.remove()}return Ea?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function I(t){return t>0?1:0>t?-1:0}function B(t){return t>1?0:-1>t?Sa:Math.acos(t)}function F(t){return t>1?Ca:-1>t?-Ca:Math.asin(t)}function z(t){return((t=Math.exp(t))-1/t)/2}function H(t){return((t=Math.exp(t))+1/t)/2}function Z(t){return((t=Math.exp(2*t))-1)/(t+1)}function q(t){return(t=Math.sin(t/2))*t}function V(){}function W(t,e,n){return new G(t,e,n)}function G(t,e,n){this.h=t,this.s=e,this.l=n}function K(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,s;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,ae(r(t+120),r(t),r(t-120))}function $(t,e,n){return new Y(t,e,n)}function Y(t,e,n){this.h=t,this.c=e,this.l=n}function J(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),X(n,Math.cos(t*=Da)*e,Math.sin(t)*e)}function X(t,e,n){return new Q(t,e,n)}function Q(t,e,n){this.l=t,this.a=e,this.b=n}function te(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=ne(r)*Za,i=ne(i)*qa,o=ne(o)*Va,ae(re(3.2404542*r-1.5371385*i-.4985314*o),re(-.969266*r+1.8760108*i+.041556*o),re(.0556434*r-.2040259*i+1.0572252*o))}function ee(t,e,n){return t>0?$(Math.atan2(n,e)*ja,Math.sqrt(e*e+n*n),t):$(0/0,0/0,t)}function ne(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ie(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function re(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function oe(t){return ae(t>>16,t>>8&255,255&t)}function se(t){return oe(t)+""}function ae(t,e,n){return new ue(t,e,n)}function ue(t,e,n){this.r=t,this.g=e,this.b=n}function le(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,n){var i,r,o,s=0,a=0,u=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(de(r[0]),de(r[1]),de(r[2]))}return(o=Ka.get(t))?e(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,a=t.charAt(2),a+=a,u=t.charAt(3),u+=u):7===t.length&&(s=t.substring(1,3),a=t.substring(3,5),u=t.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),u=parseInt(u,16)),e(s,a,u))}function he(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,u=(s+o)/2;return a?(r=.5>u?a/(s+o):a/(2-s-o),i=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):(i=0/0,r=u>0&&1>u?0:i),W(i,r,u)}function fe(t,e,n){t=pe(t),e=pe(e),n=pe(n);var i=ie((.4124564*t+.3575761*e+.1804375*n)/Za),r=ie((.2126729*t+.7151522*e+.072175*n)/qa),o=ie((.0193339*t+.119192*e+.9503041*n)/Va);return X(116*r-16,500*(i-r),200*(r-o))}function pe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function de(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function _e(t){return"function"==typeof t?t:function(){return t}}function me(t){return t}function ge(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),ve(e,n,t,i)}}function ve(t,e,n,i){function r(){var t,e=u.status;if(!e&&u.responseText||e>=200&&300>e||304===e){try{t=n.call(o,u)}catch(i){return void s.error.call(o,i)}s.load.call(o,t)}else s.error.call(o,u)}var o={},s=$s.dispatch("beforesend","progress","load","error"),a={},u=new XMLHttpRequest,l=null;return!ta.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=r:u.onreadystatechange=function(){u.readyState>3&&r()},u.onprogress=function(t){var e=$s.event;$s.event=t;try{s.progress.call(o,u)}finally{$s.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a[t]:(null==e?delete a[t]:a[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(Js(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),u.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),u.setRequestHeader)for(var c in a)u.setRequestHeader(c,a[c]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=l&&(u.responseType=l),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),s.beforesend.call(o,u),u.send(null==i?null:i),o},o.abort=function(){return u.abort(),o},$s.rebind(o,s,"on"),null==i?o:o.get(ye(i))}function ye(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function be(){var t=we(),e=xe()-t;e>24?(isFinite(e)&&(clearTimeout(Xa),Xa=setTimeout(be,e)),Ja=0):(Ja=1,tu(be))}function we(){var t=Date.now();for(Qa=$a;Qa;)t>=Qa.t&&(Qa.f=Qa.c(t-Qa.t)),Qa=Qa.n;return t}function xe(){for(var t,e=$a,n=1/0;e;)e.f?e=t?t.n=e.n:$a=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Ya=t,n}function Me(t,e){var n=Math.pow(10,3*la(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Pe(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function ke(t){return t+""}function Ee(){}function Se(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function Le(t,e){t&&fu.hasOwnProperty(t.type)&&fu[t.type](t,e)}function Ce(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Te(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ce(t[n],e,1);e.polygonEnd()}function Ae(){function t(t,e){t*=Da,e=e*Da/2+Sa/4;var n=t-i,s=Math.cos(e),a=Math.sin(e),u=o*a,l=r*s+u*Math.cos(n),c=u*Math.sin(n);du.add(Math.atan2(c,l)),i=t,r=s,o=a}var e,n,i,r,o;_u.point=function(s,a){_u.point=t,i=(e=s)*Da,r=Math.cos(a=(n=a)*Da/2+Sa/4),o=Math.sin(a)},_u.lineEnd=function(){t(e,n)}}function De(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function je(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Oe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ne(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Re(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ue(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ie(t){return[Math.atan2(t[1],t[0]),F(t[2])]}function Be(t,e){return la(t[0]-e[0])<Ta&&la(t[1]-e[1])<Ta}function Fe(t,e){t*=Da;var n=Math.cos(e*=Da);ze(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ze(t,e,n){++mu,vu+=(t-vu)/mu,yu+=(e-yu)/mu,bu+=(n-bu)/mu}function He(){function t(t,r){t*=Da;var o=Math.cos(r*=Da),s=o*Math.cos(t),a=o*Math.sin(t),u=Math.sin(r),l=Math.atan2(Math.sqrt((l=n*u-i*a)*l+(l=i*s-e*u)*l+(l=e*a-n*s)*l),e*s+n*a+i*u);gu+=l,wu+=l*(e+(e=s)),xu+=l*(n+(n=a)),Mu+=l*(i+(i=u)),ze(e,n,i)}var e,n,i;Su.point=function(r,o){r*=Da;var s=Math.cos(o*=Da);e=s*Math.cos(r),n=s*Math.sin(r),i=Math.sin(o),Su.point=t,ze(e,n,i)}}function Ze(){Su.point=Fe}function qe(){function t(t,e){t*=Da;var n=Math.cos(e*=Da),s=n*Math.cos(t),a=n*Math.sin(t),u=Math.sin(e),l=r*u-o*a,c=o*s-i*u,h=i*a-r*s,f=Math.sqrt(l*l+c*c+h*h),p=i*s+r*a+o*u,d=f&&-B(p)/f,_=Math.atan2(f,p);Pu+=d*l,ku+=d*c,Eu+=d*h,gu+=_,wu+=_*(i+(i=s)),xu+=_*(r+(r=a)),Mu+=_*(o+(o=u)),ze(i,r,o)}var e,n,i,r,o;Su.point=function(s,a){e=s,n=a,Su.point=t,s*=Da;var u=Math.cos(a*=Da);i=u*Math.cos(s),r=u*Math.sin(s),o=Math.sin(a),ze(i,r,o)},Su.lineEnd=function(){t(e,n),Su.lineEnd=Ze,Su.point=Fe}}function Ve(){return!0}function We(t,e,n,i,r){var o=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Be(n,i)){r.lineStart();for(var a=0;e>a;++a)r.point((n=t[a])[0],n[1]);return void r.lineEnd()}var u=new Ke(n,t,null,!0),l=new Ke(n,null,u,!1);u.o=l,o.push(u),s.push(l),u=new Ke(i,t,null,!1),l=new Ke(i,null,u,!0),u.o=l,o.push(u),s.push(l)}}),s.sort(e),Ge(o),Ge(s),o.length){for(var a=0,u=n,l=s.length;l>a;++a)s[a].e=u=!u;for(var c,h,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;c=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var a=0,l=c.length;l>a;++a)r.point((h=c[a])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(d){c=p.p.z;for(var a=c.length-1;a>=0;--a)r.point((h=c[a])[0],h[1])}else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);r.lineEnd()}}}function Ge(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Ke(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function $e(t,e,n,i){return function(r,o){function s(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function a(t,e){var n=r(t,e);m.point(n[0],n[1])}function u(){v.point=a,m.lineStart()}function l(){v.point=s,m.lineEnd()}function c(t,e){_.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function h(){b.lineStart(),_=[]}function f(){c(_[0][0],_[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),i=n.length;if(_.pop(),d.push(_),_=null,i){if(1&e){t=n[0];var r,i=t.length-1,s=-1;for(o.lineStart();++s<i;)o.point((r=t[s])[0],r[1]);return void o.lineEnd()}i>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Ye))}}var p,d,_,m=e(o),g=r.invert(i[0],i[1]),v={point:s,lineStart:u,lineEnd:l,polygonStart:function(){v.point=c,v.lineStart=h,v.lineEnd=f,p=[],d=[],o.polygonStart()},polygonEnd:function(){v.point=s,v.lineStart=u,v.lineEnd=l,p=$s.merge(p);var t=Qe(g,d);p.length?We(p,Xe,t,n,o):t&&(o.lineStart(),n(null,null,1,o),o.lineEnd()),o.polygonEnd(),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},y=Je(),b=e(y);return v}}function Ye(t){return t.length>1}function Je(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:u,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Xe(t,e){return((t=t.x)[0]<0?t[1]-Ca-Ta:Ca-t[1])-((e=e.x)[0]<0?e[1]-Ca-Ta:Ca-e[1])}function Qe(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,s=0;du.reset();for(var a=0,u=e.length;u>a;++a){var l=e[a],c=l.length;if(c)for(var h=l[0],f=h[0],p=h[1]/2+Sa/4,d=Math.sin(p),_=Math.cos(p),m=1;;){m===c&&(m=0),t=l[m];var g=t[0],v=t[1]/2+Sa/4,y=Math.sin(v),b=Math.cos(v),w=g-f,x=la(w)>Sa,M=d*y;if(du.add(Math.atan2(M*Math.sin(w),_*b+M*Math.cos(w))),o+=x?w+(w>=0?La:-La):w,x^f>=n^g>=n){var P=Oe(De(h),De(t));Ue(P);var k=Oe(r,P);Ue(k);var E=(x^w>=0?-1:1)*F(k[2]);(i>E||i===E&&(P[0]||P[1]))&&(s+=x^w>=0?1:-1)}if(!m++)break;f=g,d=y,_=b,h=t}}return(-Ta>o||Ta>o&&0>du)^1&s}function tn(t){var e,n=0/0,i=0/0,r=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Sa:-Sa,u=la(o-n);la(u-Sa)<Ta?(t.point(n,i=(i+s)/2>0?Ca:-Ca),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&u>=Sa&&(la(n-r)<Ta&&(n-=r*Ta),la(o-a)<Ta&&(o-=a*Ta),i=en(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=0/0},clean:function(){return 2-e}}}function en(t,e,n,i){var r,o,s=Math.sin(t-n);return la(s)>Ta?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*s)):(e+i)/2}function nn(t,e,n,i){var r;if(null==t)r=n*Ca,i.point(-Sa,r),i.point(0,r),i.point(Sa,r),i.point(Sa,0),i.point(Sa,-r),i.point(0,-r),i.point(-Sa,-r),i.point(-Sa,0),i.point(-Sa,r);else if(la(t[0]-e[0])>Ta){var o=t[0]<e[0]?Sa:-Sa;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function rn(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],_=e(h,f),m=s?_?0:r(h,f):_?r(h+(0>h?Sa:-Sa),f):0;if(!n&&(l=u=_)&&t.lineStart(),_!==u&&(p=i(n,d),(Be(n,p)||Be(d,p))&&(d[0]+=Ta,d[1]+=Ta,_=e(d[0],d[1]))),_!==u)c=0,_?(t.lineStart(),p=i(d,n),t.point(p[0],p[1])):(p=i(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(a&&n&&s^_){var g;m&o||!(g=i(d,n,!0))||(c=0,s?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!_||n&&Be(n,d)||t.point(d[0],d[1]),n=d,u=_,o=m},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function i(t,e,n){var i=De(t),r=De(e),s=[1,0,0],a=Oe(i,r),u=je(a,a),l=a[0],c=u-l*l;if(!c)return!n&&t;var h=o*u/c,f=-o*l/c,p=Oe(s,a),d=Re(s,h),_=Re(a,f);Ne(d,_);var m=p,g=je(d,m),v=je(m,m),y=g*g-v*(je(d,d)-1);if(!(0>y)){var b=Math.sqrt(y),w=Re(m,(-g-b)/v);if(Ne(w,d),w=Ie(w),!n)return w;var x,M=t[0],P=e[0],k=t[1],E=e[1];M>P&&(x=M,M=P,P=x);var S=P-M,L=la(S-Sa)<Ta,C=L||Ta>S;if(!L&&k>E&&(x=k,k=E,E=x),C?L?k+E>0^w[1]<(la(w[0]-M)<Ta?k:E):k<=w[1]&&w[1]<=E:S>Sa^(M<=w[0]&&w[0]<=P)){var T=Re(m,(-g+b)/v);return Ne(T,d),[w,Ie(T)]}}}function r(e,n){var i=s?t:Sa-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),s=o>0,a=la(o)>Ta,u=Dn(t,6*Da);return $e(e,n,u,s?[0,-t]:[-Sa,t-Sa])}function on(t,e,n,i){return function(r){var o,s=r.a,a=r.b,u=s.x,l=s.y,c=a.x,h=a.y,f=0,p=1,d=c-u,_=h-l;if(o=t-u,d||!(o>0)){if(o/=d,0>d){if(f>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=n-u,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>f&&(f=o)}else if(d>0){if(f>o)return;p>o&&(p=o)}if(o=e-l,_||!(o>0)){if(o/=_,0>_){if(f>o)return;p>o&&(p=o)}else if(_>0){if(o>p)return;o>f&&(f=o)}if(o=i-l,_||!(0>o)){if(o/=_,0>_){if(o>p)return;o>f&&(f=o)}else if(_>0){if(f>o)return;p>o&&(p=o)}return f>0&&(r.a={x:u+f*d,y:l+f*_}),1>p&&(r.b={x:u+p*d,y:l+p*_}),r}}}}}}function sn(t,e,n,i){function r(i,r){return la(i[0]-t)<Ta?r>0?0:3:la(i[0]-n)<Ta?r>0?2:1:la(i[1]-e)<Ta?r>0?1:0:r>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t){for(var e=0,n=g.length,i=t[1],r=0;n>r;++r)for(var o,s=1,a=g[r],u=a.length,c=a[0];u>s;++s)o=a[s],c[1]<=i?o[1]>i&&l(c,o,t)>0&&++e:o[1]<=i&&l(c,o,t)<0&&--e,c=o;return 0!==e}function l(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function c(o,a,u,l){var c=0,h=0;if(null==o||(c=r(o,u))!==(h=r(a,u))||s(o,a)<0^u>0){do l.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+u+4)%4)!==h)}else l.point(a[0],a[1])}function h(r,o){return r>=t&&n>=r&&o>=e&&i>=o}function f(t,e){h(t,e)&&a.point(t,e)}function p(){T.point=_,g&&g.push(v=[]),k=!0,P=!1,x=M=0/0}function d(){m&&(_(y,b),w&&P&&L.rejoin(),m.push(L.buffer())),T.point=f,P&&a.lineEnd()}function _(t,e){t=Math.max(-Cu,Math.min(Cu,t)),e=Math.max(-Cu,Math.min(Cu,e));var n=h(t,e);if(g&&v.push([t,e]),k)y=t,b=e,w=n,k=!1,n&&(a.lineStart(),a.point(t,e));else if(n&&P)a.point(t,e);else{var i={a:{x:x,y:M},b:{x:t,y:e}};C(i)?(P||(a.lineStart(),a.point(i.a.x,i.a.y)),a.point(i.b.x,i.b.y),n||a.lineEnd(),E=!1):n&&(a.lineStart(),a.point(t,e),E=!1)}x=t,M=e,P=n}var m,g,v,y,b,w,x,M,P,k,E,S=a,L=Je(),C=on(t,e,n,i),T={point:f,lineStart:p,lineEnd:d,polygonStart:function(){a=L,m=[],g=[],E=!0},polygonEnd:function(){a=S,m=$s.merge(m);var e=u([t,i]),n=E&&e,r=m.length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),c(null,null,1,a),a.lineEnd()),r&&We(m,o,e,c,a),a.polygonEnd()),m=g=v=null}};return T}}function an(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function un(t){var e=0,n=Sa/3,i=Pn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Sa/180,n=t[1]*Sa/180):[e/Sa*180,n/Sa*180]},r}function ln(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),s-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),s=Math.sqrt(o)/r;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/r,F((o-(t*t+n*n)*r*r)/(2*r))]},n}function cn(){function t(t,e){Au+=r*t-i*e,i=t,r=e}var e,n,i,r;Ru.point=function(o,s){Ru.point=t,e=i=o,n=r=s},Ru.lineEnd=function(){t(e,n)}}function hn(t,e){Du>t&&(Du=t),t>Ou&&(Ou=t),ju>e&&(ju=e),e>Nu&&(Nu=e)}function fn(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function i(){a.point=t}function r(){s.push("Z")}var o=pn(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=r},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(t){return o=pn(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function pn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function dn(t,e){vu+=t,yu+=e,++bu}function _n(){function t(t,i){var r=t-e,o=i-n,s=Math.sqrt(r*r+o*o);wu+=s*(e+t)/2,xu+=s*(n+i)/2,Mu+=s,dn(e=t,n=i)}var e,n;Iu.point=function(i,r){Iu.point=t,dn(e=i,n=r)}}function mn(){Iu.point=dn}function gn(){function t(t,e){var n=t-i,o=e-r,s=Math.sqrt(n*n+o*o);wu+=s*(i+t)/2,xu+=s*(r+e)/2,Mu+=s,s=r*t-i*e,Pu+=s*(i+t),ku+=s*(r+e),Eu+=3*s,dn(i=t,r=e)}var e,n,i,r;Iu.point=function(o,s){Iu.point=t,dn(e=i=o,n=r=s)},Iu.lineEnd=function(){t(e,n)}}function vn(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,s,0,La)}function n(e,n){t.moveTo(e,n),a.point=i}function i(e,n){t.lineTo(e,n)}function r(){a.point=e}function o(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:r,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=r,a.point=e},pointRadius:function(t){return s=t,a},result:u};return a}function yn(t){function e(t){return(a?i:n)(t)}function n(e){return xn(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){y=0/0,P.point=o,e.lineStart()}function o(n,i){var o=De([n,i]),s=t(n,i);r(y,b,v,w,x,M,y=s[0],b=s[1],v=n,w=o[0],x=o[1],M=o[2],a,e),e.point(y,b)}function s(){P.point=n,e.lineEnd()}function u(){i(),P.point=l,P.lineEnd=c}function l(t,e){o(h=t,f=e),p=y,d=b,_=w,m=x,g=M,P.point=o}function c(){r(y,b,v,w,x,M,p,d,h,_,m,g,a,e),P.lineEnd=s,s()}var h,f,p,d,_,m,g,v,y,b,w,x,M,P={point:n,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),P.lineStart=u},polygonEnd:function(){e.polygonEnd(),P.lineStart=i}};return P}function r(e,n,i,a,u,l,c,h,f,p,d,_,m,g){var v=c-e,y=h-n,b=v*v+y*y;if(b>4*o&&m--){var w=a+p,x=u+d,M=l+_,P=Math.sqrt(w*w+x*x+M*M),k=Math.asin(M/=P),E=la(la(M)-1)<Ta||la(i-f)<Ta?(i+f)/2:Math.atan2(x,w),S=t(E,k),L=S[0],C=S[1],T=L-e,A=C-n,D=y*T-v*A;(D*D/b>o||la((v*T+y*A)/b-.5)>.3||s>a*p+u*d+l*_)&&(r(e,n,i,a,u,l,L,C,E,w/=P,x/=P,M,m,g),g.point(L,C),r(L,C,E,w,x,M,c,h,f,p,d,_,m,g))}}var o=.5,s=Math.cos(30*Da),a=16;return e.precision=function(t){return arguments.length?(a=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function bn(t){var e=yn(function(e,n){return t([e*ja,n*ja])});return function(t){return kn(e(t))}}function wn(t){this.stream=t}function xn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Mn(t){return Pn(function(){return t})()}function Pn(t){function e(t){return t=a(t[0]*Da,t[1]*Da),[t[0]*f+u,l-t[1]*f]}function n(t){return t=a.invert((t[0]-u)/f,(l-t[1])/f),t&&[t[0]*ja,t[1]*ja]}function i(){a=an(s=Ln(g,v,y),o);var t=o(_,m);return u=p-t[0]*f,l=d+t[1]*f,r()}function r(){return c&&(c.valid=!1,c=null),e}var o,s,a,u,l,c,h=yn(function(t,e){return t=o(t,e),[t[0]*f+u,l-t[1]*f]}),f=150,p=480,d=250,_=0,m=0,g=0,v=0,y=0,b=Lu,w=me,x=null,M=null;return e.stream=function(t){return c&&(c.valid=!1),c=kn(b(s,h(w(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(b=null==t?(x=t,Lu):rn((x=+t)*Da),r()):x},e.clipExtent=function(t){return arguments.length?(M=t,w=t?sn(t[0][0],t[0][1],t[1][0],t[1][1]):me,r()):M},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],i()):[p,d]},e.center=function(t){return arguments.length?(_=t[0]%360*Da,m=t[1]%360*Da,i()):[_*ja,m*ja]},e.rotate=function(t){return arguments.length?(g=t[0]%360*Da,v=t[1]%360*Da,y=t.length>2?t[2]%360*Da:0,i()):[g*ja,v*ja,y*ja]},$s.rebind(e,h,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function kn(t){return xn(t,function(e,n){t.point(e*Da,n*Da)})}function En(t,e){return[t,e]}function Sn(t,e){return[t>Sa?t-La:-Sa>t?t+La:t,e]}function Ln(t,e,n){return t?e||n?an(Tn(t),An(e,n)):Tn(t):e||n?An(e,n):Sn}function Cn(t){return function(e,n){return e+=t,[e>Sa?e-La:-Sa>e?e+La:e,n]}}function Tn(t){var e=Cn(t);return e.invert=Cn(-t),e}function An(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*i+a*r;return[Math.atan2(u*o-c*s,a*i-l*r),F(c*o+u*s)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*o-u*s;return[Math.atan2(u*o+l*s,a*i+c*r),F(c*i-a*r)]},n}function Dn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,s,a){var u=s*e;null!=r?(r=jn(n,r),o=jn(n,o),(s>0?o>r:r>o)&&(r+=s*La)):(r=t+s*La,o=t-.5*u);for(var l,c=r;s>0?c>o:o>c;c-=u)a.point((l=Ie([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],l[1])}}function jn(t,e){var n=De(e);n[0]-=t,Ue(n);var i=B(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Ta)%(2*Math.PI)}function On(t,e,n){var i=$s.range(t,e-Ta,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function Nn(t,e,n){var i=$s.range(t,e-Ta,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function Rn(t){return t.source}function Un(t){return t.target}function In(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),s=Math.cos(i),a=Math.sin(i),u=r*Math.cos(t),l=r*Math.sin(t),c=s*Math.cos(n),h=s*Math.sin(n),f=2*Math.asin(Math.sqrt(q(i-e)+r*s*q(n-t))),p=1/Math.sin(f),d=f?function(t){var e=Math.sin(t*=f)*p,n=Math.sin(f-t)*p,i=n*u+e*c,r=n*l+e*h,s=n*o+e*a;
return[Math.atan2(r,i)*ja,Math.atan2(s,Math.sqrt(i*i+r*r))*ja]}:function(){return[t*ja,e*ja]};return d.distance=f,d}function Bn(){function t(t,r){var o=Math.sin(r*=Da),s=Math.cos(r),a=la((t*=Da)-e),u=Math.cos(a);Bu+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=i*o-n*s*u)*a),n*o+i*s*u),e=t,n=o,i=s}var e,n,i;Fu.point=function(r,o){e=r*Da,n=Math.sin(o*=Da),i=Math.cos(o),Fu.point=t},Fu.lineEnd=function(){Fu.point=Fu.lineEnd=u}}function Fn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),s=Math.cos(r);return[Math.atan2(t*o,i*s),Math.asin(i&&n*o/i)]},n}function zn(t,e){function n(t,e){var n=la(la(e)-Ca)<Ta?0:s/Math.pow(r(e),o);return[n*Math.sin(o*t),s-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Sa/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),s=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=s-e,i=I(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(s/i,1/o))-Ca]},n):Zn}function Hn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return la(r)<Ta?En:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-I(r)*Math.sqrt(t*t+n*n)]},n)}function Zn(t,e){return[t,Math.log(Math.tan(Sa/4+e/2))]}function qn(t){var e,n=Mn(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var a=Sa*i(),u=r();o([[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function Vn(t,e){return[Math.log(Math.tan(Sa/4+e/2)),-t]}function Wn(t){return t[0]}function Gn(t){return t[1]}function Kn(t,e,n,i){var r,o,s,a,u,l,c;return r=i[t],o=r[0],s=r[1],r=i[e],a=r[0],u=r[1],r=i[n],l=r[0],c=r[1],(c-s)*(a-o)-(u-s)*(l-o)>0}function $n(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Yn(t,e,n,i){var r=t[0],o=n[0],s=e[0]-r,a=i[0]-o,u=t[1],l=n[1],c=e[1]-u,h=i[1]-l,f=(a*(u-l)-h*(r-o))/(h*s-a*c);return[r+f*s,u+f*c]}function Jn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Xn(){yi(this),this.edge=this.site=this.circle=null}function Qn(t){var e=Xu.pop()||new Xn;return e.site=t,e}function ti(t){ci(t),$u.remove(t),Xu.push(t),yi(t)}function ei(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,s=t.N,a=[t];ti(t);for(var u=o;u.circle&&la(n-u.circle.x)<Ta&&la(i-u.circle.cy)<Ta;)o=u.P,a.unshift(u),ti(u),u=o;a.unshift(u),ci(u);for(var l=s;l.circle&&la(n-l.circle.x)<Ta&&la(i-l.circle.cy)<Ta;)s=l.N,a.push(l),ti(l),l=s;a.push(l),ci(l);var c,h=a.length;for(c=1;h>c;++c)l=a[c],u=a[c-1],mi(l.edge,u.site,l.site,r);u=a[0],l=a[h-1],l.edge=di(u.site,l.site,null,r),li(u),li(l)}function ni(t){for(var e,n,i,r,o=t.x,s=t.y,a=$u._;a;)if(i=ii(a,s)-o,i>Ta)a=a.L;else{if(r=o-ri(a,s),!(r>Ta)){i>-Ta?(e=a.P,n=a):r>-Ta?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}var u=Qn(t);if($u.insert(e,u),e||n){if(e===n)return ci(e),n=Qn(e.site),$u.insert(u,n),u.edge=n.edge=di(e.site,u.site),li(e),void li(n);if(!n)return void(u.edge=di(e.site,u.site));ci(e),ci(n);var l=e.site,c=l.x,h=l.y,f=t.x-c,p=t.y-h,d=n.site,_=d.x-c,m=d.y-h,g=2*(f*m-p*_),v=f*f+p*p,y=_*_+m*m,b={x:(m*v-p*y)/g+c,y:(f*y-_*v)/g+h};mi(n.edge,l,d,b),u.edge=di(l,t,null,b),n.edge=di(t,d,null,b),li(e),li(n)}}function ii(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;n=s.site;var a=n.x,u=n.y,l=u-e;if(!l)return a;var c=a-i,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+r-o/2)))/h+i:(i+a)/2}function ri(t,e){var n=t.N;if(n)return ii(n,e);var i=t.site;return i.y===e?i.x:1/0}function oi(t){this.site=t,this.edges=[]}function si(t){for(var e,n,i,r,o,s,a,u,l,c,h=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],_=Ku,m=_.length;m--;)if(o=_[m],o&&o.prepare())for(a=o.edges,u=a.length,s=0;u>s;)c=a[s].end(),i=c.x,r=c.y,l=a[++s%u].start(),e=l.x,n=l.y,(la(i-e)>Ta||la(r-n)>Ta)&&(a.splice(s,0,new gi(_i(o.site,c,la(i-h)<Ta&&d-r>Ta?{x:h,y:la(e-h)<Ta?n:d}:la(r-d)<Ta&&f-i>Ta?{x:la(n-d)<Ta?e:f,y:d}:la(i-f)<Ta&&r-p>Ta?{x:f,y:la(e-f)<Ta?n:p}:la(r-p)<Ta&&i-h>Ta?{x:la(n-p)<Ta?e:h,y:p}:null),o.site,null)),++u)}function ai(t,e){return e.angle-t.angle}function ui(){yi(this),this.x=this.y=this.arc=this.site=this.cy=null}function li(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r.x,a=r.y,u=i.x-s,l=i.y-a,c=o.x-s,h=o.y-a,f=2*(u*h-l*c);if(!(f>=-Aa)){var p=u*u+l*l,d=c*c+h*h,_=(h*p-l*d)/f,m=(u*d-c*p)/f,h=m+a,g=Qu.pop()||new ui;g.arc=t,g.site=r,g.x=_+s,g.y=h+Math.sqrt(_*_+m*m),g.cy=h,t.circle=g;for(var v=null,y=Ju._;y;)if(g.y<y.y||g.y===y.y&&g.x<=y.x){if(!y.L){v=y.P;break}y=y.L}else{if(!y.R){v=y;break}y=y.R}Ju.insert(v,g),v||(Yu=g)}}}}function ci(t){var e=t.circle;e&&(e.P||(Yu=e.N),Ju.remove(e),Qu.push(e),yi(e),t.circle=null)}function hi(t){for(var e,n=Gu,i=on(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!fi(e,t)||!i(e)||la(e.a.x-e.b.x)<Ta&&la(e.a.y-e.b.y)<Ta)&&(e.a=e.b=null,n.splice(r,1))}function fi(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,s=e[0][0],a=e[1][0],u=e[0][1],l=e[1][1],c=t.l,h=t.r,f=c.x,p=c.y,d=h.x,_=h.y,m=(f+d)/2,g=(p+_)/2;if(_===p){if(s>m||m>=a)return;if(f>d){if(o){if(o.y>=l)return}else o={x:m,y:u};n={x:m,y:l}}else{if(o){if(o.y<u)return}else o={x:m,y:l};n={x:m,y:u}}}else if(i=(f-d)/(_-p),r=g-i*m,-1>i||i>1)if(f>d){if(o){if(o.y>=l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else if(_>p){if(o){if(o.x>=a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}else{if(o){if(o.x<s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}return t.a=o,t.b=n,!0}function pi(t,e){this.l=t,this.r=e,this.a=this.b=null}function di(t,e,n,i){var r=new pi(t,e);return Gu.push(r),n&&mi(r,t,e,n),i&&mi(r,e,t,i),Ku[t.i].edges.push(new gi(r,t,e)),Ku[e.i].edges.push(new gi(r,e,t)),r}function _i(t,e,n){var i=new pi(t,null);return i.a=e,i.b=n,Gu.push(i),i}function mi(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function gi(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function vi(){this._=null}function yi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function bi(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function wi(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function xi(t){for(;t.L;)t=t.L;return t}function Mi(t,e){var n,i,r,o=t.sort(Pi).pop();for(Gu=[],Ku=new Array(t.length),$u=new vi,Ju=new vi;;)if(r=Yu,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==n||o.y!==i)&&(Ku[o.i]=new oi(o),ni(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;ei(r.arc)}e&&(hi(e),si(e));var s={cells:Ku,edges:Gu};return $u=Ju=Gu=Ku=null,s}function Pi(t,e){return e.y-t.y||e.x-t.x}function ki(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function Ei(t){return t.x}function Si(t){return t.y}function Li(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ci(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var s=.5*(n+r),a=.5*(i+o),u=e.nodes;u[0]&&Ci(t,u[0],n,i,s,a),u[1]&&Ci(t,u[1],s,i,r,a),u[2]&&Ci(t,u[2],n,a,s,o),u[3]&&Ci(t,u[3],s,a,r,o)}}function Ti(t,e){t=$s.rgb(t),e=$s.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,s=e.g-i,a=e.b-r;return function(t){return"#"+le(Math.round(n+o*t))+le(Math.round(i+s*t))+le(Math.round(r+a*t))}}function Ai(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Oi(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function Di(t,e){return e-=t=+t,function(n){return t+e*n}}function ji(t,e){var n,i,r,o,s,a=0,u=0,l=[],c=[];for(t+="",e+="",el.lastIndex=0,i=0;n=el.exec(e);++i)n.index&&l.push(e.substring(a,u=n.index)),c.push({i:l.length,x:n[0]}),l.push(null),a=el.lastIndex;for(a<e.length&&l.push(e.substring(a)),i=0,o=c.length;(n=el.exec(t))&&o>i;++i)if(s=c[i],s.x==n[0]){if(s.i)if(null==l[s.i+1])for(l[s.i-1]+=s.x,l.splice(s.i,1),r=i+1;o>r;++r)c[r].i--;else for(l[s.i-1]+=s.x+l[s.i+1],l.splice(s.i,2),r=i+1;o>r;++r)c[r].i-=2;else if(null==l[s.i+1])l[s.i]=s.x;else for(l[s.i]=s.x+l[s.i+1],l.splice(s.i+1,1),r=i+1;o>r;++r)c[r].i--;c.splice(i,1),o--,i--}else s.x=Di(parseFloat(n[0]),parseFloat(s.x));for(;o>i;)s=c.pop(),null==l[s.i+1]?l[s.i]=s.x:(l[s.i]=s.x+l[s.i+1],l.splice(s.i+1,1)),o--;return 1===l.length?null==l[0]?(s=c[0].x,function(t){return s(t)+""}):function(){return e}:function(t){for(i=0;o>i;++i)l[(s=c[i]).i]=s.x(t);return l.join("")}}function Oi(t,e){for(var n,i=$s.interpolators.length;--i>=0&&!(n=$s.interpolators[i](t,e)););return n}function Ni(t,e){var n,i=[],r=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)i.push(Oi(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;s>n;++n)r[n]=e[n];return function(t){for(n=0;a>n;++n)r[n]=i[n](t);return r}}function Ri(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Ui(t){return function(e){return 1-t(1-e)}}function Ii(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Bi(t){return t*t}function Fi(t){return t*t*t}function zi(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Hi(t){return function(e){return Math.pow(e,t)}}function Zi(t){return 1-Math.cos(t*Ca)}function qi(t){return Math.pow(2,10*(t-1))}function Vi(t){return 1-Math.sqrt(1-t*t)}function Wi(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/La*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*La/e)}}function Gi(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Ki(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function $i(t,e){t=$s.hcl(t),e=$s.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,s=e.c-i,a=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return J(n+o*t,i+s*t,r+a*t)+""}}function Yi(t,e){t=$s.hsl(t),e=$s.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,s=e.s-i,a=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return K(n+o*t,i+s*t,r+a*t)+""}}function Ji(t,e){t=$s.lab(t),e=$s.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,s=e.a-i,a=e.b-r;return function(t){return te(n+o*t,i+s*t,r+a*t)+""}}function Xi(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Qi(t){var e=[t.a,t.b],n=[t.c,t.d],i=er(e),r=tr(e,n),o=er(nr(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*ja,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*ja:0}function tr(t,e){return t[0]*e[0]+t[1]*e[1]}function er(t){var e=Math.sqrt(tr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function nr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function ir(t,e){var n,i=[],r=[],o=$s.transform(t),s=$s.transform(e),a=o.translate,u=s.translate,l=o.rotate,c=s.rotate,h=o.skew,f=s.skew,p=o.scale,d=s.scale;return a[0]!=u[0]||a[1]!=u[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:Di(a[0],u[0])},{i:3,x:Di(a[1],u[1])})):i.push(u[0]||u[1]?"translate("+u+")":""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:Di(l,c)})):c&&i.push(i.pop()+"rotate("+c+")"),h!=f?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:Di(h,f)}):f&&i.push(i.pop()+"skewX("+f+")"),p[0]!=d[0]||p[1]!=d[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:Di(p[0],d[0])},{i:n-2,x:Di(p[1],d[1])})):(1!=d[0]||1!=d[1])&&i.push(i.pop()+"scale("+d+")"),n=r.length,function(t){for(var e,o=-1;++o<n;)i[(e=r[o]).i]=e.x(t);return i.join("")}}function rr(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function or(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function sr(t){for(var e=t.source,n=t.target,i=ur(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function ar(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ur(t,e){if(t===e)return t;for(var n=ar(t),i=ar(e),r=n.pop(),o=i.pop(),s=null;r===o;)s=r,r=n.pop(),o=i.pop();return s}function lr(t){t.fixed|=2}function cr(t){t.fixed&=-7}function hr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function fr(t){t.fixed&=-5}function pr(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,u=-1;++u<a;)o=s[u],null!=o&&(pr(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,i+=l*t.point.x,r+=l*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function dr(t,e){return $s.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=vr,t}function _r(t){return t.children}function mr(t){return t.value}function gr(t,e){return e.value-t.value}function vr(t){return $s.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function yr(t){return t.x}function br(t){return t.y}function wr(t,e,n){t.y0=e,t.y=n}function xr(t){return $s.range(t.length)}function Mr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Pr(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function kr(t){return t.reduce(Er,0)}function Er(t,e){return t+e[1]}function Sr(t,e){return Lr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Lr(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function Cr(t){return[$s.min(t),$s.max(t)]}function Tr(t,e){return t.parent==e.parent?1:2}function Ar(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function Dr(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function jr(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,o=-1;++o<r;)e(i=jr(n[o],e),t)>0&&(t=i);return t}function Or(t,e){return t.x-e.x}function Nr(t,e){return e.x-t.x}function Rr(t,e){return t.depth-e.depth}function Ur(t,e){function n(t,i){var r=t.children;if(r&&(s=r.length))for(var o,s,a=null,u=-1;++u<s;)o=r[u],n(o,a),a=o;e(t,i)}n(t,null)}function Ir(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function Br(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function Fr(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function zr(t,e){return t.value-e.value}function Hr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Zr(t,e){t._pack_next=e,e._pack_prev=t}function qr(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Vr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(l=n.length)){var n,i,r,o,s,a,u,l,c=1/0,h=-1/0,f=1/0,p=-1/0;if(n.forEach(Wr),i=n[0],i.x=-i.r,i.y=0,e(i),l>1&&(r=n[1],r.x=r.r,r.y=0,e(r),l>2))for(o=n[2],$r(i,r,o),e(o),Hr(i,o),i._pack_prev=o,Hr(o,r),r=i._pack_next,s=3;l>s;s++){$r(i,r,o=n[s]);var d=0,_=1,m=1;for(a=r._pack_next;a!==r;a=a._pack_next,_++)if(qr(a,o)){d=1;break}if(1==d)for(u=i._pack_prev;u!==a._pack_prev&&!qr(u,o);u=u._pack_prev,m++);d?(m>_||_==m&&r.r<i.r?Zr(i,r=a):Zr(i=u,r),s--):(Hr(i,o),r=o,e(o))}var g=(c+h)/2,v=(f+p)/2,y=0;for(s=0;l>s;s++)o=n[s],o.x-=g,o.y-=v,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=y,n.forEach(Gr)}}function Wr(t){t._pack_next=t._pack_prev=t}function Gr(t){delete t._pack_next,delete t._pack_prev}function Kr(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,s=r.length;++o<s;)Kr(r[o],e,n,i)}function $r(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var s=e.r+n.r,a=r*r+o*o;s*=s,i*=i;var u=.5+(i-s)/(2*a),l=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=t.x+u*r+l*o,n.y=t.y+u*o-l*r}else n.x=t.x+i,n.y=t.y}function Yr(t){return 1+$s.max(t,function(t){return t.y})}function Jr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Xr(t){var e=t.children;return e&&e.length?Xr(e[0]):t}function Qr(t){var e,n=t.children;return n&&(e=n.length)?Qr(n[e-1]):t}function to(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function eo(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function no(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function io(t){return t.rangeExtent?t.rangeExtent():no(t.range())}function ro(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function oo(t,e){var n,i=0,r=t.length-1,o=t[i],s=t[r];return o>s&&(n=i,i=r,r=n,n=o,o=s,s=n),t[i]=e.floor(o),t[r]=e.ceil(s),t}function so(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:hl}function ao(t,e,n,i){var r=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)r.push(n(t[s-1],t[s])),o.push(i(e[s-1],e[s]));return function(e){var n=$s.bisect(t,e,1,a)-1;return o[n](r[n](e))}}function uo(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?ao:ro,u=i?or:rr;return s=r(t,e,u,n),a=r(e,t,u,Oi),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Xi)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return fo(t,e)},o.tickFormat=function(e,n){return po(t,e,n)},o.nice=function(e){return co(t,e),r()},o.copy=function(){return uo(t,e,n,i)},r()}function lo(t,e){return $s.rebind(t,e,"range","rangeRound","interpolate","clamp")}function co(t,e){return oo(t,so(ho(t,e)[2]))}function ho(t,e){null==e&&(e=10);var n=no(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function fo(t,e){return $s.range.apply($s,ho(t,e))}function po(t,e,n){var i=ho(t,e);return $s.format(n?n.replace(su,function(t,e,n,r,o,s,a,u,l,c){return[e,n,r,o,s,a,u,l||"."+mo(c,i),c].join("")}):",."+_o(i[2])+"f")}function _o(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function mo(t,e){var n=_o(e[2]);return t in fl?Math.abs(n-_o(Math.max(Math.abs(e[0]),Math.abs(e[1]))))+ +("e"!==t):n-2*("%"===t)}function go(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(r(e))}return s.invert=function(e){return o(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),s):i},s.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),s):e},s.nice=function(){var e=oo(i.map(r),n?Math:dl);return t.domain(e),i=e.map(o),s},s.ticks=function(){var t=no(i),s=[],a=t[0],u=t[1],l=Math.floor(r(a)),c=Math.ceil(r(u)),h=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var f=1;h>f;f++)s.push(o(l)*f);s.push(o(l))}else for(s.push(o(l));l++<c;)for(var f=h-1;f>0;f--)s.push(o(l)*f);for(l=0;s[l]<a;l++);for(c=s.length;s[c-1]>u;c--);s=s.slice(l,c)}return s},s.tickFormat=function(t,e){if(!arguments.length)return pl;arguments.length<2?e=pl:"function"!=typeof e&&(e=$s.format(e));var i,a=Math.max(.1,t/s.ticks().length),u=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return t/o(u(r(t)+i))<=a?e(t):""}},s.copy=function(){return go(t.copy(),e,n,i)},lo(s,t)}function vo(t,e,n){function i(e){return t(r(e))}var r=yo(e),o=yo(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return fo(n,t)},i.tickFormat=function(t,e){return po(n,t,e)},i.nice=function(t){return i.domain(co(n,t))},i.exponent=function(s){return arguments.length?(r=yo(e=s),o=yo(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return vo(t.copy(),e,n)},lo(i,t)}function yo(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function bo(t,e){function n(n){return s[((o.get(n)||"range"===e.t&&o.set(n,t.push(n)))-1)%s.length]}function i(e,n){return $s.range(t.length).map(function(t){return e+n*t})}var o,s,a;return n.domain=function(i){if(!arguments.length)return t;t=[],o=new r;for(var s,a=-1,u=i.length;++a<u;)o.has(s=i[a])||o.set(s,t.push(s));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",a:arguments},n):s},n.rangePoints=function(r,o){arguments.length<2&&(o=0);var u=r[0],l=r[1],c=(l-u)/(Math.max(1,t.length-1)+o);return s=i(t.length<2?(u+l)/2:u+c*o/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,o,u){arguments.length<2&&(o=0),arguments.length<3&&(u=o);var l=r[1]<r[0],c=r[l-0],h=r[1-l],f=(h-c)/(t.length-o+2*u);return s=i(c+f*u,f),l&&s.reverse(),a=f*(1-o),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,o,u){arguments.length<2&&(o=0),arguments.length<3&&(u=o);var l=r[1]<r[0],c=r[l-0],h=r[1-l],f=Math.floor((h-c)/(t.length-o+2*u)),p=h-c-(t.length-o)*f;return s=i(c+Math.round(p/2),f),l&&s.reverse(),a=Math.round(f*(1-o)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return no(e.a[0])},n.copy=function(){return bo(t,e)},n.domain(t)}function wo(t,e){function n(){var n=0,o=e.length;for(r=[];++n<o;)r[n-1]=$s.quantile(t,n/o);return i}function i(t){return isNaN(t=+t)?void 0:e[$s.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort($s.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.invertExtent=function(n){return n=e.indexOf(n),0>n?[0/0,0/0]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},i.copy=function(){return wo(t,e)},n()}function xo(t,e,n){function i(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),s=n.length-1,i}var o,s;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},i.copy=function(){return xo(t,e,n)},r()}function Mo(t,e){function n(n){return n>=n?e[$s.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return Mo(t,e)},n}function Po(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return fo(t,e)},e.tickFormat=function(e,n){return po(t,e,n)},e.copy=function(){return Po(t)},e}function ko(t){return t.innerRadius}function Eo(t){return t.outerRadius}function So(t){return t.startAngle}function Lo(t){return t.endAngle}function Co(t){function e(e){function s(){l.push("M",o(t(c),a))}for(var u,l=[],c=[],h=-1,f=e.length,p=_e(n),d=_e(i);++h<f;)r.call(this,u=e[h],h)?c.push([+p.call(this,u,h),+d.call(this,u,h)]):c.length&&(s(),c=[]);return c.length&&s(),l.length?l.join(""):null}var n=Wn,i=Gn,r=Ve,o=To,s=o.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=wl.get(t)||To).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function To(t){return t.join("L")}function Ao(t){return To(t)+"Z"}function Do(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function jo(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Oo(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function No(t,e){return t.length<4?To(t):t[1]+Io(t.slice(1,t.length-1),Bo(t,e))}function Ro(t,e){return t.length<3?To(t):t[0]+Io((t.push(t[0]),t),Bo([t[t.length-2]].concat(t,[t[1]]),e))}function Uo(t,e){return t.length<3?To(t):t[0]+Io(t,Bo(t,e))}function Io(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return To(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],s=e[0],a=s,u=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=t[1],u=2),e.length>1){a=e[1],o=t[u],u++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,u++)o=t[u],a=e[l],i+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var c=t[u];i+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function Bo(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],s=t[1],a=1,u=t.length;++a<u;)n=o,o=s,s=t[a],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function Fo(t){if(t.length<3)return To(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],s=[r,r,r,(i=t[1])[0]],a=[o,o,o,i[1]],u=[r,",",o,"L",qo(Pl,s),",",qo(Pl,a)];for(t.push(t[n-1]);++e<=n;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Vo(u,s,a);return t.pop(),u.push("L",i),u.join("")}function zo(t){if(t.length<4)return To(t);for(var e,n=[],i=-1,r=t.length,o=[0],s=[0];++i<3;)e=t[i],o.push(e[0]),s.push(e[1]);for(n.push(qo(Pl,o)+","+qo(Pl,s)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),Vo(n,o,s);return n.join("")}function Ho(t){for(var e,n,i=-1,r=t.length,o=r+4,s=[],a=[];++i<4;)n=t[i%r],s.push(n[0]),a.push(n[1]);for(e=[qo(Pl,s),",",qo(Pl,a)],--i;++i<o;)n=t[i%r],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Vo(e,s,a);return e.join("")}function Zo(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],s=t[0][1],a=t[n][0]-o,u=t[n][1]-s,l=-1;++l<=n;)i=t[l],r=l/n,i[0]=e*i[0]+(1-e)*(o+r*a),i[1]=e*i[1]+(1-e)*(s+r*u);return Fo(t)}function qo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Vo(t,e,n){t.push("C",qo(xl,e),",",qo(xl,n),",",qo(Ml,e),",",qo(Ml,n),",",qo(Pl,e),",",qo(Pl,n))}function Wo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Go(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],s=i[0]=Wo(r,o);++e<n;)i[e]=(s+(s=Wo(r=o,o=t[e+1])))/2;return i[e]=s,i}function Ko(t){for(var e,n,i,r,o=[],s=Go(t),a=-1,u=t.length-1;++a<u;)e=Wo(t[a],t[a+1]),la(e)<Ta?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),s[a]=r*n,s[a+1]=r*i));for(a=-1;++a<=u;)r=(t[Math.min(u,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([r||0,s[a]*r||0]);return o}function $o(t){return t.length<3?To(t):t[0]+Io(t,Ko(t))}function Yo(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]+yl,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Jo(t){function e(e){function u(){_.push("M",a(t(g),h),c,l(t(m.reverse()),h),"Z")}for(var f,p,d,_=[],m=[],g=[],v=-1,y=e.length,b=_e(n),w=_e(r),x=n===i?function(){return p}:_e(i),M=r===o?function(){return d}:_e(o);++v<y;)s.call(this,f=e[v],v)?(m.push([p=+b.call(this,f,v),d=+w.call(this,f,v)]),g.push([+x.call(this,f,v),+M.call(this,f,v)])):m.length&&(u(),m=[],g=[]);return m.length&&u(),_.length?_.join(""):null}var n=Wn,i=Wn,r=0,o=Gn,s=Ve,a=To,u=a.key,l=a,c="L",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?a=t:(a=wl.get(t)||To).key,l=a.reverse||a,c=a.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Xo(t){return t.radius}function Qo(t){return[t.x,t.y]}function ts(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+yl;return[n*Math.cos(i),n*Math.sin(i)]}}function es(){return 64}function ns(){return"circle"}function is(t){var e=Math.sqrt(t/Sa);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function rs(t,e){return da(t,Tl),t.id=e,t}function os(t,e,n,i){var r=t.id;return C(t,"function"==typeof n?function(t,o,s){t.__transition__[r].tween.set(e,i(n.call(t,t.__data__,o,s)))}:(n=i(n),function(t){t.__transition__[r].tween.set(e,n)}))}function ss(t){return null==t&&(t=""),function(){this.textContent=t}}function as(t,e,n,i){var o=t.__transition__||(t.__transition__={active:0,count:0}),s=o[n];if(!s){var a=i.time;s=o[n]={tween:new r,time:a,ease:i.ease,delay:i.delay,duration:i.duration},++o.count,$s.timer(function(i){function r(i){return o.active>n?l():(o.active=n,s.event&&s.event.start.call(t,c,e),s.tween.forEach(function(n,i){(i=i.call(t,c,e))&&_.push(i)}),void $s.timer(function(){return d.c=u(i||1)?Ve:u,1},0,a))}function u(i){if(o.active!==n)return l();for(var r=i/p,a=h(r),u=_.length;u>0;)_[--u].call(t,a);return r>=1?(s.event&&s.event.end.call(t,c,e),l()):void 0}function l(){return--o.count?delete o[n]:delete t.__transition__,1}var c=t.__data__,h=s.ease,f=s.delay,p=s.duration,d=Qa,_=[];return d.t=f+a,i>=f?r(i-f):void(d.c=r)},0,a)}}function us(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function ls(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function cs(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function hs(t,e,n){function i(e){var n=t(e),i=o(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new Ul(n-1)),1),n}function o(t,n){return e(t=new Ul(+t),n),t}function s(t,i,o){var s=r(t),a=[];if(o>1)for(;i>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;i>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{Ul=cs;var i=new cs;return i._=t,s(i,e,n)}finally{Ul=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=s;var u=t.utc=fs(t);return u.floor=u,u.round=fs(i),u.ceil=fs(r),u.offset=fs(o),u.range=a,t}function fs(t){return function(e,n){try{Ul=cs;var i=new cs;return i._=e,t(i,n)._}finally{Ul=Date}}}function ps(t){function e(e){for(var i,r,o,s=[],a=-1,u=0;++a<n;)37===t.charCodeAt(a)&&(s.push(t.substring(u,a)),null!=(r=nc[i=t.charAt(++a)])&&(i=t.charAt(++a)),(o=ic[i])&&(i=o(e,null==r?"e"===i?" ":"0":r)),s.push(i),u=a+1);return s.push(t.substring(u,a)),s.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=ds(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Ul!==cs,o=new(r?cs:Ul);return"j"in n?o.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(o.setFullYear(n.y,0,1),o.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(o.getDay()+5)%7:n.w+7*n.U-(o.getDay()+6)%7)):o.setFullYear(n.y,n.m,n.d),o.setHours(n.H+Math.floor(n.Z/100),n.M+n.Z%100,n.S,n.L),r?o._:o},e.toString=function(){return t},e}function ds(t,e,n,i){for(var r,o,s,a=0,u=e.length,l=n.length;u>a;){if(i>=l)return-1;if(r=e.charCodeAt(a++),37===r){if(s=e.charAt(a++),o=rc[s in nc?e.charAt(a++):s],!o||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function _s(t){return new RegExp("^(?:"+t.map($s.requote).join("|")+")","i")}function ms(t){for(var e=new r,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function gs(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(e)+r:r)}function vs(t,e,n){$l.lastIndex=0;var i=$l.exec(e.substring(n));return i?(t.w=Yl.get(i[0].toLowerCase()),n+i[0].length):-1}function ys(t,e,n){Gl.lastIndex=0;var i=Gl.exec(e.substring(n));return i?(t.w=Kl.get(i[0].toLowerCase()),n+i[0].length):-1}function bs(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function ws(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n));return i?(t.U=+i[0],n+i[0].length):-1}function xs(t,e,n){oc.lastIndex=0;
var i=oc.exec(e.substring(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ms(t,e,n){Ql.lastIndex=0;var i=Ql.exec(e.substring(n));return i?(t.m=tc.get(i[0].toLowerCase()),n+i[0].length):-1}function Ps(t,e,n){Jl.lastIndex=0;var i=Jl.exec(e.substring(n));return i?(t.m=Xl.get(i[0].toLowerCase()),n+i[0].length):-1}function ks(t,e,n){return ds(t,ic.c.toString(),e,n)}function Es(t,e,n){return ds(t,ic.x.toString(),e,n)}function Ss(t,e,n){return ds(t,ic.X.toString(),e,n)}function Ls(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Cs(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+2));return i?(t.y=As(+i[0]),n+i[0].length):-1}function Ts(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=+e,n+5):-1}function As(t){return t+(t>68?1900:2e3)}function Ds(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function js(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Os(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Ns(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Rs(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Us(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Is(t,e,n){oc.lastIndex=0;var i=oc.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Bs(t,e,n){var i=sc.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}function Fs(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(la(e)/60),r=la(e)%60;return n+gs(i,"0",2)+gs(r,"0",2)}function zs(t,e,n){ec.lastIndex=0;var i=ec.exec(e.substring(n,n+1));return i?n+i[0].length:-1}function Hs(t){function e(t){try{Ul=cs;var e=new Ul;return e._=t,n(e)}finally{Ul=Date}}var n=ps(t);return e.parse=function(t){try{Ul=cs;var e=n.parse(t);return e&&e._}finally{Ul=Date}},e.toString=n.toString,e}function Zs(t){return t.toISOString()}function qs(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,o=$s.bisect(uc,r);return o==uc.length?[e.year,ho(t.map(function(t){return t/31536e6}),n)[2]]:o?e[r/uc[o-1]<uc[o]/r?o-1:o]:[fc,ho(t,n)[2]]}return i.invert=function(e){return Vs(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Vs)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Vs(+n+1),e).length}var o=i.domain(),s=no(o),a=null==t?r(s,10):"number"==typeof t&&r(s,t);return a&&(t=a[0],e=a[1]),i.domain(oo(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Vs(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Vs(+e+1);return e}}:t))},i.ticks=function(t,e){var n=no(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Vs(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return qs(t.copy(),e,n)},lo(i,t)}function Vs(t){return new Date(t)}function Ws(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function Gs(t){return JSON.parse(t.responseText)}function Ks(t){var e=Xs.createRange();return e.selectNode(Xs.body),e.createContextualFragment(t.responseText)}var $s={version:"3.3.13"};Date.now||(Date.now=function(){return+new Date});var Ys=[].slice,Js=function(t){return Ys.call(t)},Xs=document,Qs=Xs.documentElement,ta=window;try{Js(Qs.childNodes)[0].nodeType}catch(ea){Js=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Xs.createElement("div").style.setProperty("opacity",0,"")}catch(na){var ia=ta.Element.prototype,ra=ia.setAttribute,oa=ia.setAttributeNS,sa=ta.CSSStyleDeclaration.prototype,aa=sa.setProperty;ia.setAttribute=function(t,e){ra.call(this,t,e+"")},ia.setAttributeNS=function(t,e,n){oa.call(this,t,e,n+"")},sa.setProperty=function(t,e,n){aa.call(this,t,e+"",n)}}$s.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},$s.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},$s.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},$s.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},$s.extent=function(t,e){var n,i,r,o=-1,s=t.length;if(1===arguments.length){for(;++o<s&&!(null!=(n=r=t[o])&&n>=n);)n=r=void 0;for(;++o<s;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<s&&!(null!=(n=r=e.call(t,t[o],o))&&n>=n);)n=void 0;for(;++o<s;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},$s.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)isNaN(n=+t[o])||(i+=n);else for(;++o<r;)isNaN(n=+e.call(t,t[o],o))||(i+=n);return i},$s.mean=function(e,n){var i,r=e.length,o=0,s=-1,a=0;if(1===arguments.length)for(;++s<r;)t(i=e[s])&&(o+=(i-o)/++a);else for(;++s<r;)t(i=n.call(e,e[s],s))&&(o+=(i-o)/++a);return a?o:void 0},$s.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},$s.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?$s.quantile(e.sort($s.ascending),.5):void 0},$s.bisector=function(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t.call(e,e[o],o)<n?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;n<t.call(e,e[o],o)?r=o:i=o+1}return i}}};var ua=$s.bisector(function(t){return t});$s.bisectLeft=ua.left,$s.bisect=$s.bisectRight=ua.right,$s.shuffle=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t},$s.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},$s.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],o=new Array(0>i?0:i);i>n;)o[n]=[e=r,r=t[++n]];return o},$s.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=$s.min(arguments,e),i=new Array(n);++t<n;)for(var r,o=-1,s=i[t]=new Array(r);++o<r;)s[o]=arguments[o][t];return i},$s.transpose=function(t){return $s.zip.apply($s,t)},$s.keys=function(t){var e=[];for(var n in t)e.push(n);return e},$s.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},$s.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},$s.merge=function(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--s]=i[e];return n};var la=Math.abs;$s.range=function(t,e,i){if(arguments.length<3&&(i=1,arguments.length<2&&(e=t,t=0)),(e-t)/i===1/0)throw new Error("infinite range");var r,o=[],s=n(la(i)),a=-1;if(t*=s,e*=s,i*=s,0>i)for(;(r=t+i*++a)>e;)o.push(r/s);else for(;(r=t+i*++a)<e;)o.push(r/s);return o},$s.map=function(t){var e=new r;if(t instanceof r)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},i(r,{has:function(t){return ca+t in this},get:function(t){return this[ca+t]},set:function(t,e){return this[ca+t]=e},remove:function(t){return t=ca+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===ha&&t.call(this,e.substring(1),this[e])}});var ca="\x00",ha=ca.charCodeAt(0);$s.nest=function(){function t(e,a,u){if(u>=s.length)return i?i.call(o,a):n?a.sort(n):a;for(var l,c,h,f,p=-1,d=a.length,_=s[u++],m=new r;++p<d;)(f=m.get(l=_(c=a[p])))?f.push(c):m.set(l,[c]);return e?(c=e(),h=function(n,i){c.set(n,t(e,i,u))}):(c={},h=function(n,i){c[n]=t(e,i,u)}),m.forEach(h),c}function e(t,n){if(n>=s.length)return t;var i=[],r=a[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,o={},s=[],a=[];return o.map=function(e,n){return t(n,e,0)},o.entries=function(n){return e(t($s.map,n,0),0)},o.key=function(t){return s.push(t),o},o.sortKeys=function(t){return a[s.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return i=t,o},o},$s.set=function(t){var e=new o;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},i(o,{has:function(t){return ca+t in this},add:function(t){return this[ca+t]=!0,t},remove:function(t){return t=ca+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===ha&&t.call(this,e.substring(1))}}),$s.behavior={},$s.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=s(t,e,e[n]);return t};var fa=["webkit","ms","moz","Moz","o","O"];$s.dispatch=function(){for(var t=new l,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=c(t);return t},l.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},$s.event=null,$s.requote=function(t){return t.replace(pa,"\\$&")};var pa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,da={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},_a=function(t,e){return e.querySelector(t)},ma=function(t,e){return e.querySelectorAll(t)},ga=Qs[a(Qs,"matchesSelector")],va=function(t,e){return ga.call(t,e)};"function"==typeof Sizzle&&(_a=function(t,e){return Sizzle(t,e)[0]||null},ma=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},va=Sizzle.matchesSelector),$s.selection=function(){return xa};var ya=$s.selection.prototype=[];ya.select=function(t){var e,n,i,r,o=[];t=_(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var u=-1,l=i.length;++u<l;)(r=i[u])?(e.push(n=t.call(r,r.__data__,u,s)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return d(o)},ya.selectAll=function(t){var e,n,i=[];t=m(t);for(var r=-1,o=this.length;++r<o;)for(var s=this[r],a=-1,u=s.length;++a<u;)(n=s[a])&&(i.push(e=Js(t.call(n,n.__data__,a,r))),e.parentNode=n);return d(i)};var ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};$s.ns={prefix:ba,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),ba.hasOwnProperty(n)?{space:ba[n],local:t}:t}},ya.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=$s.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(g(e,t[e]));return this}return this.each(g(t,e))},ya.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=b(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!y(t[r]).test(e))return!1;return!0}for(e in t)this.each(w(e,t[e]));return this}return this.each(w(t,e))},ya.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(M(n,t[n],e));return this}if(2>i)return ta.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(M(t,e,n))},ya.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},ya.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ya.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ya.append=function(t){return t=k(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ya.insert=function(t,e){return t=k(t),e=_(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ya.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},ya.data=function(t,e){function n(t,n){var i,o,s,a=t.length,h=n.length,f=Math.min(a,h),p=new Array(h),d=new Array(h),_=new Array(a);if(e){var m,g=new r,v=new r,y=[];for(i=-1;++i<a;)m=e.call(o=t[i],o.__data__,i),g.has(m)?_[i]=o:g.set(m,o),y.push(m);for(i=-1;++i<h;)m=e.call(n,s=n[i],i),(o=g.get(m))?(p[i]=o,o.__data__=s):v.has(m)||(d[i]=E(s)),v.set(m,s),g.remove(m);for(i=-1;++i<a;)g.has(y[i])&&(_[i]=t[i])}else{for(i=-1;++i<f;)o=t[i],s=n[i],o?(o.__data__=s,p[i]=o):d[i]=E(s);for(;h>i;++i)d[i]=E(n[i]);for(;a>i;++i)_[i]=t[i]}d.update=p,d.parentNode=p.parentNode=_.parentNode=t.parentNode,u.push(d),l.push(p),c.push(_)}var i,o,s=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(i=this[0]).length);++s<a;)(o=i[s])&&(t[s]=o.__data__);return t}var u=T([]),l=d([]),c=d([]);if("function"==typeof t)for(;++s<a;)n(i=this[s],t.call(i,i.parentNode.__data__,s));else for(;++s<a;)n(i=this[s],t);return l.enter=function(){return u},l.exit=function(){return c},l},ya.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ya.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=S(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,u=n.length;u>a;a++)(i=n[a])&&t.call(i,i.__data__,a,o)&&e.push(i)}return d(r)},ya.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},ya.sort=function(t){t=L.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},ya.each=function(t){return C(this,function(e,n,i){t.call(e,e.__data__,n,i)})},ya.call=function(t){var e=Js(arguments);return t.apply(e[0]=this,e),this},ya.empty=function(){return!this.node()},ya.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},ya.size=function(){var t=0;return this.each(function(){++t}),t};var wa=[];$s.selection.enter=T,$s.selection.enter.prototype=wa,wa.append=ya.append,wa.empty=ya.empty,wa.node=ya.node,wa.call=ya.call,wa.size=ya.size,wa.select=function(t){for(var e,n,i,r,o,s=[],a=-1,u=this.length;++a<u;){i=(r=this[a]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var l=-1,c=r.length;++l<c;)(o=r[l])?(e.push(i[l]=n=t.call(r.parentNode,o.__data__,l,a)),n.__data__=o.__data__):e.push(null)}return d(s)},wa.insert=function(t,e){return arguments.length<2&&(e=A(this)),ya.insert.call(this,t,e)},ya.transition=function(){for(var t,e,n=El||++Al,i=[],r=Sl||{time:Date.now(),ease:zi,delay:0,duration:250},o=-1,s=this.length;++o<s;){i.push(t=[]);for(var a=this[o],u=-1,l=a.length;++u<l;)(e=a[u])&&as(e,u,n,r),t.push(e)}return rs(i,n)},ya.interrupt=function(){return this.each(D)},$s.select=function(t){var e=["string"==typeof t?_a(t,Xs):t];return e.parentNode=Qs,d([e])},$s.selectAll=function(t){var e=Js("string"==typeof t?ma(t,Xs):t);return e.parentNode=Qs,d([e])};var xa=$s.select(Qs);ya.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(j(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(j(t,e,n))};var Ma=$s.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ma.forEach(function(t){"on"+t in Xs&&Ma.remove(t)});var Pa="onselectstart"in Xs?null:a(Qs.style,"userSelect"),ka=0;$s.mouse=function(t){return U(t,f())};var Ea=/WebKit/.test(ta.navigator.userAgent)?-1:0;$s.touches=function(t,e){return arguments.length<2&&(e=f().touches),e?Js(e).map(function(e){var n=U(t,e);return n.identifier=e.identifier,n}):[]},$s.behavior.drag=function(){function t(){this.on("mousedown.drag",s).on("touchstart.drag",a)}function e(){return $s.event.changedTouches[0].identifier}function n(t,e){return $s.touches(t).filter(function(t){return t.identifier===e})[0]}function i(t,e,n,i){return function(){function s(){var t=e(c,p),n=t[0]-_[0],i=t[1]-_[1];m|=n|i,_=t,h({type:"drag",x:t[0]+u[0],y:t[1]+u[1],dx:n,dy:i})}function a(){g.on(n+"."+d,null).on(i+"."+d,null),v(m&&$s.event.target===f),h({type:"dragend"})}var u,l=this,c=l.parentNode,h=r.of(l,arguments),f=$s.event.target,p=t(),d=null==p?"drag":"drag-"+p,_=e(c,p),m=0,g=$s.select(ta).on(n+"."+d,s).on(i+"."+d,a),v=R();o?(u=o.apply(l,arguments),u=[u.x-_[0],u.y-_[1]]):u=[0,0],h({type:"dragstart"})}}var r=p(t,"drag","dragstart","dragend"),o=null,s=i(u,$s.mouse,"mousemove","mouseup"),a=i(e,n,"touchmove","touchend");return t.origin=function(e){return arguments.length?(o=e,t):o},$s.rebind(t,r,"on")};var Sa=Math.PI,La=2*Sa,Ca=Sa/2,Ta=1e-6,Aa=Ta*Ta,Da=Sa/180,ja=180/Sa,Oa=Math.SQRT2,Na=2,Ra=4;$s.interpolateZoom=function(t,e){function n(t){var e=t*v;if(g){var n=H(_),s=o/(Na*f)*(n*Z(Oa*e+_)-z(_));return[i+s*l,r+s*c,o*n/H(Oa*e+_)]}return[i+t*l,r+t*c,o*Math.exp(Oa*e)]}var i=t[0],r=t[1],o=t[2],s=e[0],a=e[1],u=e[2],l=s-i,c=a-r,h=l*l+c*c,f=Math.sqrt(h),p=(u*u-o*o+Ra*h)/(2*o*Na*f),d=(u*u-o*o-Ra*h)/(2*u*Na*f),_=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-_,v=(g||Math.log(u/o))/Oa;return n.duration=1e3*v,n},$s.behavior.zoom=function(){function t(t){t.on(S,l).on(Ba+".zoom",f).on(L,d).on("dblclick.zoom",_).on(T,c)}function e(t){return[(t[0]-P.x)/P.k,(t[1]-P.y)/P.k]}function n(t){return[t[0]*P.k+P.x,t[1]*P.k+P.y]}function i(t){P.k=Math.max(E[0],Math.min(E[1],t))}function r(t,e){e=n(e),P.x+=t[0]-e[0],P.y+=t[1]-e[1]}function o(){w&&w.domain(b.range().map(function(t){return(t-P.x)/P.k}).map(b.invert)),M&&M.domain(x.range().map(function(t){return(t-P.y)/P.k}).map(x.invert))}function s(t){t({type:"zoomstart"})}function a(t){o(),t({type:"zoom",scale:P.k,translate:[P.x,P.y]})}function u(t){t({type:"zoomend"})}function l(){function t(){c=1,r($s.mouse(i),f),a(o)}function n(){h.on(L,ta===i?d:null).on(C,null),p(c&&$s.event.target===l),u(o)}var i=this,o=A.of(i,arguments),l=$s.event.target,c=0,h=$s.select(ta).on(L,t).on(C,n),f=e($s.mouse(i)),p=R();D.call(i),s(o)}function c(){function t(){var t=$s.touches(d);return p=P.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){for(var e=$s.event.changedTouches,n=0,o=e.length;o>n;++n)m[e[n].identifier]=null;var s=t(),u=Date.now();if(1===s.length){if(500>u-y){var l=s[0],c=m[l.identifier];i(2*P.k),r(l,c),h(),a(_)}y=u}else if(s.length>1){var l=s[0],f=s[1],p=l[0]-f[0],d=l[1]-f[1];g=p*p+d*d}}function o(){for(var t,e,n,o,s=$s.touches(d),u=0,l=s.length;l>u;++u,o=null)if(n=s[u],o=m[n.identifier]){if(e)break;t=n,e=o}if(o){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=g&&Math.sqrt(c/g);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],i(h*p)}y=null,r(t,e),a(_)}function f(){if($s.event.touches.length){for(var e=$s.event.changedTouches,n=0,i=e.length;i>n;++n)delete m[e[n].identifier];for(var r in m)return void t()}x.on(b,null).on(w,null),M.on(S,l).on(T,c),k(),u(_)}var p,d=this,_=A.of(d,arguments),m={},g=0,v=$s.event.changedTouches[0].identifier,b="touchmove.zoom-"+v,w="touchend.zoom-"+v,x=$s.select(ta).on(b,o).on(w,f),M=$s.select(d).on(S,null).on(T,n),k=R();D.call(d),n(),s(_)}function f(){var t=A.of(this,arguments);v?clearTimeout(v):(D.call(this),s(t)),v=setTimeout(function(){v=null,u(t)},50),h();var n=g||$s.mouse(this);m||(m=e(n)),i(Math.pow(2,.002*Ua())*P.k),r(n,m),a(t)}function d(){m=null}function _(){var t=A.of(this,arguments),n=$s.mouse(this),o=e(n),l=Math.log(P.k)/Math.LN2;s(t),i(Math.pow(2,$s.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1)),r(n,o),a(t),u(t)}var m,g,v,y,b,w,x,M,P={x:0,y:0,k:1},k=[960,500],E=Ia,S="mousedown.zoom",L="mousemove.zoom",C="mouseup.zoom",T="touchstart.zoom",A=p(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=A.of(this,arguments),e=P;El?$s.select(this).transition().each("start.zoom",function(){P=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=k[0],i=k[1],r=n/2,o=i/2,s=$s.interpolateZoom([(r-P.x)/P.k,(o-P.y)/P.k,n/P.k],[(r-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var i=s(e),u=n/i[2];this.__chart__=P={x:r-i[0]*u,y:o-i[1]*u,k:u},a(t)}}).each("end.zoom",function(){u(t)}):(this.__chart__=P,s(t),a(t),u(t))})},t.translate=function(e){return arguments.length?(P={x:+e[0],y:+e[1],k:P.k},o(),t):[P.x,P.y]},t.scale=function(e){return arguments.length?(P={x:P.x,y:P.y,k:+e},o(),t):P.k},t.scaleExtent=function(e){return arguments.length?(E=null==e?Ia:[+e[0],+e[1]],t):E},t.center=function(e){return arguments.length?(g=e&&[+e[0],+e[1]],t):g},t.size=function(e){return arguments.length?(k=e&&[+e[0],+e[1]],t):k},t.x=function(e){return arguments.length?(w=e,b=e.copy(),P={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(M=e,x=e.copy(),P={x:0,y:0,k:1},t):M},$s.rebind(t,A,"on")};var Ua,Ia=[0,1/0],Ba="onwheel"in Xs?(Ua=function(){return-$s.event.deltaY*($s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Xs?(Ua=function(){return $s.event.wheelDelta},"mousewheel"):(Ua=function(){return-$s.event.detail},"MozMousePixelScroll");V.prototype.toString=function(){return this.rgb()+""},$s.hsl=function(t,e,n){return 1===arguments.length?t instanceof G?W(t.h,t.s,t.l):ce(""+t,he,W):W(+t,+e,+n)};var Fa=G.prototype=new V;Fa.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),W(this.h,this.s,this.l/t)},Fa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),W(this.h,this.s,t*this.l)},Fa.rgb=function(){return K(this.h,this.s,this.l)},$s.hcl=function(t,e,n){return 1===arguments.length?t instanceof Y?$(t.h,t.c,t.l):t instanceof Q?ee(t.l,t.a,t.b):ee((t=fe((t=$s.rgb(t)).r,t.g,t.b)).l,t.a,t.b):$(+t,+e,+n)};var za=Y.prototype=new V;za.brighter=function(t){return $(this.h,this.c,Math.min(100,this.l+Ha*(arguments.length?t:1)))},za.darker=function(t){return $(this.h,this.c,Math.max(0,this.l-Ha*(arguments.length?t:1)))},za.rgb=function(){return J(this.h,this.c,this.l).rgb()},$s.lab=function(t,e,n){return 1===arguments.length?t instanceof Q?X(t.l,t.a,t.b):t instanceof Y?J(t.l,t.c,t.h):fe((t=$s.rgb(t)).r,t.g,t.b):X(+t,+e,+n)};var Ha=18,Za=.95047,qa=1,Va=1.08883,Wa=Q.prototype=new V;Wa.brighter=function(t){return X(Math.min(100,this.l+Ha*(arguments.length?t:1)),this.a,this.b)},Wa.darker=function(t){return X(Math.max(0,this.l-Ha*(arguments.length?t:1)),this.a,this.b)},Wa.rgb=function(){return te(this.l,this.a,this.b)},$s.rgb=function(t,e,n){return 1===arguments.length?t instanceof ue?ae(t.r,t.g,t.b):ce(""+t,ae,K):ae(~~t,~~e,~~n)};var Ga=ue.prototype=new V;Ga.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),ae(Math.min(255,~~(e/t)),Math.min(255,~~(n/t)),Math.min(255,~~(i/t)))):ae(r,r,r)},Ga.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),ae(~~(t*this.r),~~(t*this.g),~~(t*this.b))},Ga.hsl=function(){return he(this.r,this.g,this.b)},Ga.toString=function(){return"#"+le(this.r)+le(this.g)+le(this.b)};var Ka=$s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ka.forEach(function(t,e){Ka.set(t,oe(e))}),$s.functor=_e,$s.xhr=ge(me),$s.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var s=ve(t,e,null==n?i:r(n),o);return s.row=function(t){return arguments.length?s.response(null==(n=t)?i:r(t)):n},s}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function s(e){return e.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=u)return s;if(r)return r=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;u>c;){var i=t.charCodeAt(c++),a=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++a);else if(i!==l)continue;return t.substring(e,c-a)}return t.substring(e)}for(var i,r,o={},s={},a=[],u=t.length,c=0,h=0;(i=n())!==s;){for(var f=[];i!==o&&i!==s;)f.push(i),i=n();(!e||(f=e(f,h++)))&&a.push(f)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new o,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(s).join("\n")},n},$s.csv=$s.dsv(",","text/csv"),$s.tsv=$s.dsv("	","text/tab-separated-values");var $a,Ya,Ja,Xa,Qa,tu=ta[a(ta,"requestAnimationFrame")]||function(t){setTimeout(t,17)};$s.timer=function(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,o={c:t,t:r,f:!1,n:null};Ya?Ya.n=o:$a=o,Ya=o,Ja||(Xa=clearTimeout(Xa),Ja=1,tu(be))},$s.timer.flush=function(){we(),xe()};var eu=".",nu=",",iu=[3,3],ru="$",ou=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Me);$s.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=$s.round(t,Pe(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ou[8+n/3]},$s.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},$s.format=function(t){var e=su.exec(t),n=e[1]||" ",i=e[2]||">",r=e[3]||"",o=e[4]||"",s=e[5],a=+e[6],u=e[7],l=e[8],c=e[9],h=1,f="",p=!1;switch(l&&(l=+l.substring(1)),(s||"0"===n&&"="===i)&&(s=n="0",i="=",u&&(a-=Math.floor((a-1)/4))),c){case"n":u=!0,c="g";break;case"%":h=100,f="%",c="f";break;case"p":h=100,f="%",c="r";break;case"b":case"o":case"x":case"X":"#"===o&&(o="0"+c.toLowerCase());case"c":case"d":p=!0,l=0;break;case"s":h=-1,c="r"}"#"===o?o="":"$"===o&&(o=ru),"r"!=c||l||(c="g"),null!=l&&("g"==c?l=Math.max(1,Math.min(21,l)):("e"==c||"f"==c)&&(l=Math.max(0,Math.min(20,l)))),c=au.get(c)||ke;var d=s&&u;return function(t){if(p&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):r;if(0>h){var _=$s.formatPrefix(t,l);t=_.scale(t),f=_.symbol}else t*=h;t=c(t,l);var m=t.lastIndexOf("."),g=0>m?t:t.substring(0,m),v=0>m?"":eu+t.substring(m+1);!s&&u&&(g=uu(g));var y=o.length+g.length+v.length+(d?0:e.length),b=a>y?new Array(y=a-y+1).join(n):"";return d&&(g=uu(b+g)),e+=o,t=g+v,("<"===i?e+t+b:">"===i?b+e+t:"^"===i?b.substring(0,y>>=1)+e+t+b.substring(y):e+(d?t:b+t))+f}};var su=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,au=$s.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=$s.round(t,Pe(t,e))).toFixed(Math.max(0,Math.min(20,Pe(t*(1+1e-15),e))))}}),uu=me;if(iu){var lu=iu.length;uu=function(t){for(var e=t.length,n=[],i=0,r=iu[0];e>0&&r>0;)n.push(t.substring(e-=r,e+r)),r=iu[i=(i+1)%lu];return n.reverse().join(nu)}}$s.geo={},Ee.prototype={s:0,t:0,add:function(t){Se(t,this.t,cu),Se(cu.s,this.s,this),this.s?this.t+=cu.t:this.s=cu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cu=new Ee;$s.geo.stream=function(t,e){t&&hu.hasOwnProperty(t.type)?hu[t.type](t,e):Le(t,e)};var hu={Feature:function(t,e){Le(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Le(n[i].geometry,e)}},fu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ce(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ce(n[i],e,0)},Polygon:function(t,e){Te(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Te(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Le(n[i],e)}};$s.geo.area=function(t){return pu=0,$s.geo.stream(t,_u),pu};var pu,du=new Ee,_u={sphere:function(){pu+=4*Sa},point:u,lineStart:u,lineEnd:u,polygonStart:function(){du.reset(),_u.lineStart=Ae},polygonEnd:function(){var t=2*du;pu+=0>t?4*Sa+t:t,_u.lineStart=_u.lineEnd=_u.point=u}};$s.geo.bounds=function(){function t(t,e){y.push(b=[c=t,f=t]),h>e&&(h=e),e>p&&(p=e)}function e(e,n){var i=De([e*Da,n*Da]);if(g){var r=Oe(g,i),o=[r[1],-r[0],0],s=Oe(o,r);Ue(s),s=Ie(s);var u=e-d,l=u>0?1:-1,_=s[0]*ja*l,m=la(u)>180;if(m^(_>l*d&&l*e>_)){var v=s[1]*ja;
v>p&&(p=v)}else if(_=(_+360)%360-180,m^(_>l*d&&l*e>_)){var v=-s[1]*ja;h>v&&(h=v)}else h>n&&(h=n),n>p&&(p=n);m?d>e?a(c,e)>a(c,f)&&(f=e):a(e,f)>a(c,f)&&(c=e):f>=c?(c>e&&(c=e),e>f&&(f=e)):e>d?a(c,e)>a(c,f)&&(f=e):a(e,f)>a(c,f)&&(c=e)}else t(e,n);g=i,d=e}function n(){w.point=e}function i(){b[0]=c,b[1]=f,w.point=t,g=null}function r(t,n){if(g){var i=t-d;v+=la(i)>180?i+(i>0?360:-360):i}else _=t,m=n;_u.point(t,n),e(t,n)}function o(){_u.lineStart()}function s(){r(_,m),_u.lineEnd(),la(v)>Ta&&(c=-(f=180)),b[0]=c,b[1]=f,g=null}function a(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,f,p,d,_,m,g,v,y,b,w={point:t,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=o,w.lineEnd=s,v=0,_u.polygonStart()},polygonEnd:function(){_u.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=i,0>du?(c=-(f=180),h=-(p=90)):v>Ta?p=90:-Ta>v&&(h=-90),b[0]=c,b[1]=f}};return function(t){p=f=-(c=h=1/0),y=[],$s.geo.stream(t,w);var e=y.length;if(e){y.sort(u);for(var n,i=1,r=y[0],o=[r];e>i;++i)n=y[i],l(n[0],r)||l(n[1],r)?(a(r[0],n[1])>a(r[0],r[1])&&(r[1]=n[1]),a(n[0],r[1])>a(r[0],r[1])&&(r[0]=n[0])):o.push(r=n);for(var s,n,d=-1/0,e=o.length-1,i=0,r=o[e];e>=i;r=n,++i)n=o[i],(s=a(r[1],n[0]))>d&&(d=s,c=n[0],f=r[1])}return y=b=null,1/0===c||1/0===h?[[0/0,0/0],[0/0,0/0]]:[[c,h],[f,p]]}}(),$s.geo.centroid=function(t){mu=gu=vu=yu=bu=wu=xu=Mu=Pu=ku=Eu=0,$s.geo.stream(t,Su);var e=Pu,n=ku,i=Eu,r=e*e+n*n+i*i;return Aa>r&&(e=wu,n=xu,i=Mu,Ta>gu&&(e=vu,n=yu,i=bu),r=e*e+n*n+i*i,Aa>r)?[0/0,0/0]:[Math.atan2(n,e)*ja,F(i/Math.sqrt(r))*ja]};var mu,gu,vu,yu,bu,wu,xu,Mu,Pu,ku,Eu,Su={sphere:u,point:Fe,lineStart:He,lineEnd:Ze,polygonStart:function(){Su.lineStart=qe},polygonEnd:function(){Su.lineStart=He}},Lu=$e(Ve,tn,nn,[-Sa,-Sa/2]),Cu=1e9;$s.geo.clipExtent=function(){var t,e,n,i,r,o,s={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(a){return arguments.length?(o=sn(t=+a[0][0],e=+a[0][1],n=+a[1][0],i=+a[1][1]),r&&(r.valid=!1,r=null),s):[[t,e],[n,i]]}};return s.extent([[0,0],[960,500]])},($s.geo.conicEqualArea=function(){return un(ln)}).raw=ln,$s.geo.albers=function(){return $s.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},$s.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return e=null,n(o,s),e||(i(o,s),e)||r(o,s),e}var e,n,i,r,o=$s.geo.albers(),s=$s.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=$s.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?s:r>=.166&&.234>r&&i>=-.214&&-.115>i?a:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=s.stream(t),i=a.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),a.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),a.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var l=o.scale(),c=+e[0],h=+e[1];return n=o.translate(e).clipExtent([[c-.455*l,h-.238*l],[c+.455*l,h+.238*l]]).stream(u).point,i=s.translate([c-.307*l,h+.201*l]).clipExtent([[c-.425*l+Ta,h+.12*l+Ta],[c-.214*l-Ta,h+.234*l-Ta]]).stream(u).point,r=a.translate([c-.205*l,h+.212*l]).clipExtent([[c-.214*l+Ta,h+.166*l+Ta],[c-.115*l-Ta,h+.234*l-Ta]]).stream(u).point,t},t.scale(1070)};var Tu,Au,Du,ju,Ou,Nu,Ru={point:u,lineStart:u,lineEnd:u,polygonStart:function(){Au=0,Ru.lineStart=cn},polygonEnd:function(){Ru.lineStart=Ru.lineEnd=Ru.point=u,Tu+=la(Au/2)}},Uu={point:hn,lineStart:u,lineEnd:u,polygonStart:u,polygonEnd:u},Iu={point:dn,lineStart:_n,lineEnd:mn,polygonStart:function(){Iu.lineStart=gn},polygonEnd:function(){Iu.point=dn,Iu.lineStart=_n,Iu.lineEnd=mn}};$s.geo.path=function(){function t(t){return t&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),s&&s.valid||(s=r(o)),$s.geo.stream(t,s)),o.result()}function e(){return s=null,t}var n,i,r,o,s,a=4.5;return t.area=function(t){return Tu=0,$s.geo.stream(t,r(Ru)),Tu},t.centroid=function(t){return vu=yu=bu=wu=xu=Mu=Pu=ku=Eu=0,$s.geo.stream(t,r(Iu)),Eu?[Pu/Eu,ku/Eu]:Mu?[wu/Mu,xu/Mu]:bu?[vu/bu,yu/bu]:[0/0,0/0]},t.bounds=function(t){return Ou=Nu=-(Du=ju=1/0),$s.geo.stream(t,r(Uu)),[[Du,ju],[Ou,Nu]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||bn(t):me,e()):n},t.context=function(t){return arguments.length?(o=null==(i=t)?new fn:new vn(t),"function"!=typeof a&&o.pointRadius(a),e()):i},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),t):a},t.projection($s.geo.albersUsa()).context(null)},$s.geo.transform=function(t){return{stream:function(e){var n=new wn(e);for(var i in t)n[i]=t[i];return n}}},wn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},$s.geo.projection=Mn,$s.geo.projectionMutator=Pn,($s.geo.equirectangular=function(){return Mn(En)}).raw=En.invert=En,$s.geo.rotation=function(t){function e(e){return e=t(e[0]*Da,e[1]*Da),e[0]*=ja,e[1]*=ja,e}return t=Ln(t[0]%360*Da,t[1]*Da,t.length>2?t[2]*Da:0),e.invert=function(e){return e=t.invert(e[0]*Da,e[1]*Da),e[0]*=ja,e[1]*=ja,e},e},Sn.invert=En,$s.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=Ln(-t[0]*Da,-t[1]*Da,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=ja,t[1]*=ja}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=Dn((e=+i)*Da,r*Da),t):e},t.precision=function(i){return arguments.length?(n=Dn(e*Da,(r=+i)*Da),t):r},t.angle(90)},$s.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Da,r=t[1]*Da,o=e[1]*Da,s=Math.sin(i),a=Math.cos(i),u=Math.sin(r),l=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*s)*n+(n=l*c-u*h*a)*n),u*c+l*h*a)},$s.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return $s.range(Math.ceil(o/m)*m,r,m).map(f).concat($s.range(Math.ceil(l/g)*g,u,g).map(p)).concat($s.range(Math.ceil(i/d)*d,n,d).filter(function(t){return la(t%m)>Ta}).map(c)).concat($s.range(Math.ceil(a/_)*_,s,_).filter(function(t){return la(t%g)>Ta}).map(h))}var n,i,r,o,s,a,u,l,c,h,f,p,d=10,_=d,m=90,g=360,v=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(u).slice(1),f(r).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],l=+e[0][1],u=+e[1][1],o>r&&(e=o,o=r,r=e),l>u&&(e=l,l=u,u=e),t.precision(v)):[[o,l],[r,u]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(v)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],g=+e[1],t):[m,g]},t.minorStep=function(e){return arguments.length?(d=+e[0],_=+e[1],t):[d,_]},t.precision=function(e){return arguments.length?(v=+e,c=On(a,s,90),h=Nn(i,n,v),f=On(l,u,90),p=Nn(o,r,v),t):v},t.majorExtent([[-180,-90+Ta],[180,90-Ta]]).minorExtent([[-180,-80-Ta],[180,80+Ta]])},$s.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=Rn,r=Un;return t.distance=function(){return $s.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},$s.geo.interpolate=function(t,e){return In(t[0]*Da,t[1]*Da,e[0]*Da,e[1]*Da)},$s.geo.length=function(t){return Bu=0,$s.geo.stream(t,Fu),Bu};var Bu,Fu={sphere:u,point:u,lineStart:Bn,lineEnd:u,polygonStart:u,polygonEnd:u},zu=Fn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});($s.geo.azimuthalEqualArea=function(){return Mn(zu)}).raw=zu;var Hu=Fn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},me);($s.geo.azimuthalEquidistant=function(){return Mn(Hu)}).raw=Hu,($s.geo.conicConformal=function(){return un(zn)}).raw=zn,($s.geo.conicEquidistant=function(){return un(Hn)}).raw=Hn;var Zu=Fn(function(t){return 1/t},Math.atan);($s.geo.gnomonic=function(){return Mn(Zu)}).raw=Zu,Zn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ca]},($s.geo.mercator=function(){return qn(Zn)}).raw=Zn;var qu=Fn(function(){return 1},Math.asin);($s.geo.orthographic=function(){return Mn(qu)}).raw=qu;var Vu=Fn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});($s.geo.stereographic=function(){return Mn(Vu)}).raw=Vu,Vn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ca]},($s.geo.transverseMercator=function(){var t=qn(Vn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[-t[1],t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},t.rotate([0,0])}).raw=Vn,$s.geom={},$s.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r,o,s,a,u,l,c,h,f,p,d,_=_e(n),m=_e(i),g=t.length,v=g-1,y=[],b=[],w=0;if(_===Wn&&i===Gn)e=t;else for(o=0,e=[];g>o;++o)e.push([+_.call(this,r=t[o],o),+m.call(this,r,o)]);for(o=1;g>o;++o)(e[o][1]<e[w][1]||e[o][1]==e[w][1]&&e[o][0]<e[w][0])&&(w=o);for(o=0;g>o;++o)o!==w&&(u=e[o][1]-e[w][1],a=e[o][0]-e[w][0],y.push({angle:Math.atan2(u,a),index:o}));for(y.sort(function(t,e){return t.angle-e.angle}),p=y[0].angle,f=y[0].index,h=0,o=1;v>o;++o){if(s=y[o].index,p==y[o].angle){if(a=e[f][0]-e[w][0],u=e[f][1]-e[w][1],l=e[s][0]-e[w][0],c=e[s][1]-e[w][1],a*a+u*u>=l*l+c*c){y[o].index=-1;continue}y[h].index=-1}p=y[o].angle,h=o,f=s}for(b.push(w),o=0,s=0;2>o;++s)y[s].index>-1&&(b.push(y[s].index),o++);for(d=b.length;v>s;++s)if(!(y[s].index<0)){for(;!Kn(b[d-2],b[d-1],y[s].index,e);)--d;b[d++]=y[s].index}var x=[];for(o=d-1;o>=0;--o)x.push(t[b[o]]);return x}var n=Wn,i=Gn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},$s.geom.polygon=function(t){return da(t,Wu),t};var Wu=$s.geom.polygon.prototype=[];Wu.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},Wu.centroid=function(t){var e,n,i=-1,r=this.length,o=0,s=0,a=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=a,a=this[i],n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o*t,s*t]},Wu.clip=function(t){for(var e,n,i,r,o,s,a=Jn(t),u=-1,l=this.length-Jn(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,r=this[u],o=e[(i=e.length-a)-1],n=-1;++n<i;)s=e[n],$n(s,c,r)?($n(o,c,r)||t.push(Yn(o,s,c,r)),t.push(s)):$n(o,c,r)&&t.push(Yn(o,s,c,r)),o=s;a&&t.push(t[0]),c=r}return t};var Gu,Ku,$u,Yu,Ju,Xu=[],Qu=[];oi.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(ai),e.length},gi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},vi.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=xi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(bi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,wi(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(wi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,bi(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?xi(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,bi(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,wi(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,bi(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,wi(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,bi(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,wi(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},$s.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=a[0][0],r=a[0][1],o=a[1][0],s=a[1][1];return Mi(n(t),a).cells.forEach(function(n,a){var u=n.edges,l=n.site,c=e[a]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=i&&l.x<=o&&l.y>=r&&l.y<=s?[[i,s],[o,s],[o,r],[i,r]]:[];c.point=t[a]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ta)*Ta,y:Math.round(s(t,e)/Ta)*Ta,i:e}})}var i=Wn,r=Gn,o=i,s=r,a=tl;return t?e(t):(e.links=function(t){return Mi(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return Mi(n(t)).cells.forEach(function(n,i){for(var r,o,s=n.site,a=n.edges.sort(ai),u=-1,l=a.length,c=a[l-1].edge,h=c.l===s?c.r:c.l;++u<l;)r=c,o=h,c=a[u].edge,h=c.l===s?c.r:c.l,i<o.i&&i<h.i&&ki(s,o,h)<0&&e.push([t[i],t[o.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(o=_e(i=t),e):i},e.y=function(t){return arguments.length?(s=_e(r=t),e):r},e.clipExtent=function(t){return arguments.length?(a=null==t?tl:t,e):a===tl?null:a},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):a===tl?null:a&&a[1]},e)};var tl=[[-1e6,-1e6],[1e6,1e6]];$s.geom.delaunay=function(t){return $s.geom.voronoi().triangles(t)},$s.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,s,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(la(u-n)+la(c-i)<.01)l(t,e,n,i,r,o,s,a);else{var h=t.point;t.x=t.y=t.point=null,l(t,h,u,c,r,o,s,a),l(t,e,n,i,r,o,s,a)}else t.x=n,t.y=i,t.point=e}else l(t,e,n,i,r,o,s,a)}function l(t,e,n,i,r,s,a,u){var l=.5*(r+a),c=.5*(s+u),h=n>=l,f=i>=c,p=(f<<1)+h;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=Li()),h?r=l:a=l,f?s=c:u=c,o(t,e,n,i,r,s,a,u)}var c,h,f,p,d,_,m,g,v,y=_e(a),b=_e(u);if(null!=e)_=e,m=n,g=i,v=r;else if(g=v=-(_=m=1/0),h=[],f=[],d=t.length,s)for(p=0;d>p;++p)c=t[p],c.x<_&&(_=c.x),c.y<m&&(m=c.y),c.x>g&&(g=c.x),c.y>v&&(v=c.y),h.push(c.x),f.push(c.y);else for(p=0;d>p;++p){var w=+y(c=t[p],p),x=+b(c,p);_>w&&(_=w),m>x&&(m=x),w>g&&(g=w),x>v&&(v=x),h.push(w),f.push(x)}var M=g-_,P=v-m;M>P?v=m+M:g=_+P;var k=Li();if(k.add=function(t){o(k,t,+y(t,++p),+b(t,p),_,m,g,v)},k.visit=function(t){Ci(t,k,_,m,g,v)},p=-1,null==e){for(;++p<d;)o(k,t[p],h[p],f[p],_,m,g,v);--p}else t.forEach(k.add);return h=f=t=c=null,k}var s,a=Wn,u=Gn;return(s=arguments.length)?(a=Ei,u=Si,3===s&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==e?null:[[e,n],[i,r]]},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i-e,r-n]},o)},$s.interpolateRgb=Ti,$s.interpolateObject=Ai,$s.interpolateNumber=Di,$s.interpolateString=ji;var el=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;$s.interpolate=Oi,$s.interpolators=[function(t,e){var n=typeof e;return("string"===n?Ka.has(e)||/^(#|rgb\(|hsl\()/.test(e)?Ti:ji:e instanceof V?Ti:"object"===n?Array.isArray(e)?Ni:Ai:Di)(t,e)}],$s.interpolateArray=Ni;var nl=function(){return me},il=$s.map({linear:nl,poly:Hi,quad:function(){return Bi},cubic:function(){return Fi},sin:function(){return Zi},exp:function(){return qi},circle:function(){return Vi},elastic:Wi,back:Gi,bounce:function(){return Ki}}),rl=$s.map({"in":me,out:Ui,"in-out":Ii,"out-in":function(t){return Ii(Ui(t))}});$s.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=il.get(n)||nl,i=rl.get(i)||me,Ri(i(n.apply(null,Ys.call(arguments,1))))},$s.interpolateHcl=$i,$s.interpolateHsl=Yi,$s.interpolateLab=Ji,$s.interpolateRound=Xi,$s.transform=function(t){var e=Xs.createElementNS($s.ns.prefix.svg,"g");return($s.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Qi(n?n.matrix:ol)})(t)},Qi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ol={a:1,b:0,c:0,d:1,e:0,f:0};$s.interpolateTransform=ir,$s.layout={},$s.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(sr(t[n]));return e}},$s.layout.chord=function(){function t(){var t,l,h,f,p,d={},_=[],m=$s.range(o),g=[];for(n=[],i=[],t=0,f=-1;++f<o;){for(l=0,p=-1;++p<o;)l+=r[f][p];_.push(l),g.push($s.range(o)),t+=l}for(s&&m.sort(function(t,e){return s(_[t],_[e])}),a&&g.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),t=(La-c*o)/t,l=0,f=-1;++f<o;){for(h=l,p=-1;++p<o;){var v=m[f],y=g[v][p],b=r[v][y],w=l,x=l+=b*t;d[v+"-"+y]={index:v,subindex:y,startAngle:w,endAngle:x,value:b}}i[v]={index:v,startAngle:h,endAngle:l,value:(l-h)/t},l+=c}for(f=-1;++f<o;)for(p=f-1;++p<o;){var M=d[f+"-"+p],P=d[p+"-"+f];(M.value||P.value)&&n.push(M.value<P.value?{source:P,target:M}:{source:M,target:P})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,s,a,u,l={},c=0;return l.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,l):r},l.padding=function(t){return arguments.length?(c=t,n=i=null,l):c},l.sortGroups=function(t){return arguments.length?(s=t,n=i=null,l):s},l.sortSubgroups=function(t){return arguments.length?(a=t,n=null,l):a},l.sortChords=function(t){return arguments.length?(u=t,n&&e(),l):u},l.chords=function(){return n||t(),n},l.groups=function(){return i||t(),i},l},$s.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=1/Math.sqrt(o*o+s*s);if(_>(r-n)*a){var u=e.charge*a*a;return t.px-=o*u,t.py-=s*u,!0}if(e.point&&isFinite(a)){var u=e.pointCharge*a*a;t.px-=o*u,t.py-=s*u}}return!e.charge}}function e(t){t.px=$s.event.x,t.py=$s.event.y,a.resume()}var n,i,r,o,s,a={},u=$s.dispatch("start","tick","end"),l=[1,1],c=.9,h=sl,f=al,p=-30,d=.1,_=.8,m=[],g=[];return a.tick=function(){if((i*=.99)<.005)return u.end({type:"end",alpha:i=0}),!0;var e,n,a,h,f,_,v,y,b,w=m.length,x=g.length;for(n=0;x>n;++n)a=g[n],h=a.source,f=a.target,y=f.x-h.x,b=f.y-h.y,(_=y*y+b*b)&&(_=i*o[n]*((_=Math.sqrt(_))-r[n])/_,y*=_,b*=_,f.x-=y*(v=h.weight/(f.weight+h.weight)),f.y-=b*v,h.x+=y*(v=1-v),h.y+=b*v);if((v=i*d)&&(y=l[0]/2,b=l[1]/2,n=-1,v))for(;++n<w;)a=m[n],a.x+=(y-a.x)*v,a.y+=(b-a.y)*v;if(p)for(pr(e=$s.geom.quadtree(m),i,s),n=-1;++n<w;)(a=m[n]).fixed||e.visit(t(a));for(n=-1;++n<w;)a=m[n],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*c,a.y-=(a.py-(a.py=a.y))*c);u.tick({type:"tick",alpha:i})},a.nodes=function(t){return arguments.length?(m=t,a):m},a.links=function(t){return arguments.length?(g=t,a):g},a.size=function(t){return arguments.length?(l=t,a):l},a.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,a):h},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,a):f},a.friction=function(t){return arguments.length?(c=+t,a):c},a.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,a):p},a.gravity=function(t){return arguments.length?(d=+t,a):d},a.theta=function(t){return arguments.length?(_=+t,a):_},a.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(u.start({type:"start",alpha:i=t}),$s.timer(a.tick)),a):i},a.start=function(){function t(t,i){if(!n){for(n=new Array(u),a=0;u>a;++a)n[a]=[];for(a=0;l>a;++a){var r=g[a];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var o,s=n[e],a=-1,l=s.length;++a<l;)if(!isNaN(o=s[a][t]))return o;return Math.random()*i}var e,n,i,u=m.length,c=g.length,d=l[0],_=l[1];for(e=0;u>e;++e)(i=m[e]).index=e,i.weight=0;for(e=0;c>e;++e)i=g[e],"number"==typeof i.source&&(i.source=m[i.source]),"number"==typeof i.target&&(i.target=m[i.target]),++i.source.weight,++i.target.weight;for(e=0;u>e;++e)i=m[e],isNaN(i.x)&&(i.x=t("x",d)),isNaN(i.y)&&(i.y=t("y",_)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof h)for(e=0;c>e;++e)r[e]=+h.call(this,g[e],e);else for(e=0;c>e;++e)r[e]=h;if(o=[],"function"==typeof f)for(e=0;c>e;++e)o[e]=+f.call(this,g[e],e);else for(e=0;c>e;++e)o[e]=f;if(s=[],"function"==typeof p)for(e=0;u>e;++e)s[e]=+p.call(this,m[e],e);else for(e=0;u>e;++e)s[e]=p;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return n||(n=$s.behavior.drag().origin(me).on("dragstart.force",lr).on("drag.force",e).on("dragend.force",cr)),arguments.length?void this.on("mouseover.force",hr).on("mouseout.force",fr).call(n):n},$s.rebind(a,u,"on")};var sl=20,al=1;$s.layout.hierarchy=function(){function t(e,s,a){var u=r.call(n,e,s);if(e.depth=s,a.push(e),u&&(l=u.length)){for(var l,c,h=-1,f=e.children=new Array(l),p=0,d=s+1;++h<l;)c=f[h]=t(u[h],d,a),c.parent=e,p+=c.value;i&&f.sort(i),o&&(e.value=p)}else delete e.children,o&&(e.value=+o.call(n,e,s)||0);return e}function e(t,i){var r=t.children,s=0;if(r&&(a=r.length))for(var a,u=-1,l=i+1;++u<a;)s+=e(r[u],l);else o&&(s=+o.call(n,t,i)||0);return o&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var i=gr,r=_r,o=mr;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(o=t,n):o},n.revalue=function(t){return e(t,0),t},n},$s.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(s=o.length)){var s,a,u,l=-1;for(i=e.value?i/e.value:0;++l<s;)t(a=o[l],n,u=a.value*i,r),n+=u}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var s=i.call(this,n,o);return t(s[0],0,r[0],r[1]/e(s[0])),s}var i=$s.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},dr(n,i)},$s.layout.pie=function(){function t(o){var s=o.map(function(n,i){return+e.call(t,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),u=(("function"==typeof r?r.apply(this,arguments):r)-a)/$s.sum(s),l=$s.range(o.length);null!=n&&l.sort(n===ul?function(t,e){return s[e]-s[t]}:function(t,e){return n(o[t],o[e])});var c=[];return l.forEach(function(t){var e;c[t]={data:o[t],value:e=s[t],startAngle:a,endAngle:a+=e*u}}),c}var e=Number,n=ul,i=0,r=La;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var ul={};$s.layout.stack=function(){function t(a,u){var l=a.map(function(n,i){return e.call(t,n,i)}),c=l.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),h=n.call(t,c,u);l=$s.permute(l,h),c=$s.permute(c,h);var f,p,d,_=i.call(t,c,u),m=l.length,g=l[0].length;for(p=0;g>p;++p)for(r.call(t,l[0][p],d=_[p],c[0][p][1]),f=1;m>f;++f)r.call(t,l[f][p],d+=c[f-1][p][1],c[f][p][1]);return a}var e=me,n=xr,i=Mr,r=wr,o=yr,s=br;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:ll.get(e)||xr,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:cl.get(e)||Mr,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(r=e,t):r},t};var ll=$s.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(Pr),o=t.map(kr),s=$s.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,u=0,l=[],c=[];for(e=0;i>e;++e)n=s[e],u>a?(a+=o[n],l.push(n)):(u+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return $s.range(t.length).reverse()},"default":xr}),cl=$s.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,s=[],a=0,u=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>a&&(a=i),s.push(i)}for(n=0;o>n;++n)u[n]=(a-s[n])/2;return u},wiggle:function(t){var e,n,i,r,o,s,a,u,l,c=t.length,h=t[0],f=h.length,p=[];for(p[0]=u=l=0,n=1;f>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,o=0,a=h[n][0]-h[n-1][0];c>e;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;o+=s*t[e][n][1]}p[n]=u-=r?o/r*a:0,l>u&&(l=u)}for(n=0;f>n;++n)p[n]-=l;return p},expand:function(t){var e,n,i,r=t.length,o=t[0].length,s=1/r,a=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:Mr});$s.layout.histogram=function(){function t(t,o){for(var s,a,u=[],l=t.map(n,this),c=i.call(this,l,o),h=r.call(this,c,l,o),o=-1,f=l.length,p=h.length-1,d=e?1:1/f;++o<p;)s=u[o]=[],s.dx=h[o+1]-(s.x=h[o]),s.y=0;if(p>0)for(o=-1;++o<f;)a=l[o],a>=c[0]&&a<=c[1]&&(s=u[$s.bisect(h,a,1,p)-1],s.y+=d,s.push(t[o]));return u}var e=!0,n=Number,i=Cr,r=Sr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=_e(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return Lr(t,e)}:_e(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},$s.layout.tree=function(){function t(t,o){function s(t,e){var i=t.children,r=t._tree;if(i&&(o=i.length)){for(var o,a,l,c=i[0],h=c,f=-1;++f<o;)l=i[f],s(l,a),h=u(l,a,h),a=l;Ir(t);var p=.5*(c._tree.prelim+l._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-p):r.prelim=p}else e&&(r.prelim=e._tree.prelim+n(t,e))}function a(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;++r<i;)a(n[r],e)}}function u(t,e,i){if(e){for(var r,o=t,s=t,a=e,u=t.parent.children[0],l=o._tree.mod,c=s._tree.mod,h=a._tree.mod,f=u._tree.mod;a=Dr(a),o=Ar(o),a&&o;)u=Ar(u),s=Dr(s),s._tree.ancestor=t,r=a._tree.prelim+h-o._tree.prelim-l+n(a,o),r>0&&(Br(Fr(a,t,i),t,r),l+=r,c+=r),h+=a._tree.mod,l+=o._tree.mod,f+=u._tree.mod,c+=s._tree.mod;a&&!Dr(s)&&(s._tree.thread=a,s._tree.mod+=h-c),o&&!Ar(u)&&(u._tree.thread=o,u._tree.mod+=l-f,i=t)}return i}var l=e.call(this,t,o),c=l[0];Ur(c,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),s(c),a(c,-c._tree.prelim);var h=jr(c,Nr),f=jr(c,Or),p=jr(c,Rr),d=h.x-n(h,f)/2,_=f.x+n(f,h)/2,m=p.depth||1;return Ur(c,r?function(t){t.x*=i[0],t.y=t.depth*i[1],delete t._tree}:function(t){t.x=(t.x-d)/(_-d)*i[0],t.y=t.depth/m*i[1],delete t._tree}),l}var e=$s.layout.hierarchy().sort(null).value(null),n=Tr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},dr(t,e)},$s.layout.pack=function(){function t(t,o){var s=n.call(this,t,o),a=s[0],u=r[0],l=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(a.x=a.y=0,Ur(a,function(t){t.r=+c(t.value)}),Ur(a,Vr),i){var h=i*(e?1:Math.max(2*a.r/u,2*a.r/l))/2;Ur(a,function(t){t.r+=h}),Ur(a,Vr),Ur(a,function(t){t.r-=h})}return Kr(a,u/2,l/2,e?1:1/Math.max(2*a.r/u,2*a.r/l)),s}var e,n=$s.layout.hierarchy().sort(zr),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},dr(t,n)},$s.layout.cluster=function(){function t(t,o){var s,a=e.call(this,t,o),u=a[0],l=0;Ur(u,function(t){var e=t.children;e&&e.length?(t.x=Jr(e),t.y=Yr(e)):(t.x=s?l+=n(t,s):0,t.y=0,s=t)});var c=Xr(u),h=Qr(u),f=c.x-n(c,h)/2,p=h.x+n(h,c)/2;return Ur(u,r?function(t){t.x=(t.x-u.x)*i[0],t.y=(u.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(p-f)*i[0],t.y=(1-(u.y?t.y/u.y:1))*i[1]}),a}var e=$s.layout.hierarchy().sort(null).value(null),n=Tr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},dr(t,e)},$s.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var s,a,u,l=h(n),c=[],f=o.slice(),d=1/0,_="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/n.value),c.area=0;(u=f.length)>0;)c.push(s=f[u-1]),c.area+=s.area,"squarify"!==p||(a=i(c,_))<=d?(f.pop(),d=a):(c.area-=c.pop().area,r(c,_,l,!1),_=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(r(c,_,l,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,s=h(e),a=i.slice(),u=[];for(t(a,s.dx*s.dy/e.value),u.area=0;o=a.pop();)u.push(o),u.area+=o.area,null!=o.z&&(r(u,o.z?s.dx:s.dy,s,!a.length),u.length=u.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*d/i,i/(e*o*d)):1/0}function r(t,e,n,i){var r,o=-1,s=t.length,a=n.x,l=n.y,c=e?u(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<s;)r=t[o],r.x=a,r.y=l,r.dy=c,a+=r.dx=Math.min(n.x+n.dx-a,c?u(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<s;)r=t[o],r.x=a,r.y=l,r.dx=c,l+=r.dy=Math.min(n.y+n.dy-l,c?u(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function o(i){var r=s||a(i),o=r[0];return o.x=0,o.y=0,o.dx=l[0],o.dy=l[1],s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),f&&(s=r),r}var s,a=$s.layout.hierarchy(),u=Math.round,l=[1,1],c=null,h=to,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?to(e):eo(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return eo(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?to:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(f=t,s=null,o):f},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},dr(o,a)},$s.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=$s.random.normal.apply($s,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=$s.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},$s.scale={};var hl={floor:me,ceil:me};$s.scale.linear=function(){return uo([0,1],[0,1],Oi,!1)};var fl={s:1,g:1,p:1,r:1,e:1};
$s.scale.log=function(){return go($s.scale.linear().domain([0,1]),10,!0,[1,10])};var pl=$s.format(".0e"),dl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};$s.scale.pow=function(){return vo($s.scale.linear(),1,[0,1])},$s.scale.sqrt=function(){return $s.scale.pow().exponent(.5)},$s.scale.ordinal=function(){return bo([],{t:"range",a:[[]]})},$s.scale.category10=function(){return $s.scale.ordinal().range(_l)},$s.scale.category20=function(){return $s.scale.ordinal().range(ml)},$s.scale.category20b=function(){return $s.scale.ordinal().range(gl)},$s.scale.category20c=function(){return $s.scale.ordinal().range(vl)};var _l=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),ml=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),gl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),vl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);$s.scale.quantile=function(){return wo([],[])},$s.scale.quantize=function(){return xo(0,1,[0,1])},$s.scale.threshold=function(){return Mo([.5],[0,1])},$s.scale.identity=function(){return Po([0,1])},$s.svg={},$s.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),s=i.apply(this,arguments)+yl,a=r.apply(this,arguments)+yl,u=(s>a&&(u=s,s=a,a=u),a-s),l=Sa>u?"0":"1",c=Math.cos(s),h=Math.sin(s),f=Math.cos(a),p=Math.sin(a);return u>=bl?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+l+",1 "+o*f+","+o*p+"L"+t*f+","+t*p+"A"+t+","+t+" 0 "+l+",0 "+t*c+","+t*h+"Z":"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+l+",1 "+o*f+","+o*p+"L0,0Z"}var e=ko,n=Eo,i=So,r=Lo;return t.innerRadius=function(n){return arguments.length?(e=_e(n),t):e},t.outerRadius=function(e){return arguments.length?(n=_e(e),t):n},t.startAngle=function(e){return arguments.length?(i=_e(e),t):i},t.endAngle=function(e){return arguments.length?(r=_e(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+yl;return[Math.cos(o)*t,Math.sin(o)*t]},t};var yl=-Ca,bl=La-Ta;$s.svg.line=function(){return Co(me)};var wl=$s.map({linear:To,"linear-closed":Ao,step:Do,"step-before":jo,"step-after":Oo,basis:Fo,"basis-open":zo,"basis-closed":Ho,bundle:Zo,cardinal:Uo,"cardinal-open":No,"cardinal-closed":Ro,monotone:$o});wl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var xl=[0,2/3,1/3,0],Ml=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];$s.svg.line.radial=function(){var t=Co(Yo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},jo.reverse=Oo,Oo.reverse=jo,$s.svg.area=function(){return Jo(me)},$s.svg.area.radial=function(){var t=Jo(Yo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},$s.svg.chord=function(){function t(t,a){var u=e(this,o,t,a),l=e(this,s,t,a);return"M"+u.p0+i(u.r,u.p1,u.a1-u.a0)+(n(u,l)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,l.r,l.p0)+i(l.r,l.p1,l.a1-l.a0)+r(l.r,l.p1,u.r,u.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=a.call(t,r,i),s=u.call(t,r,i)+yl,c=l.call(t,r,i)+yl;return{r:o,a0:s,a1:c,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Sa)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=Rn,s=Un,a=Xo,u=So,l=Lo;return t.radius=function(e){return arguments.length?(a=_e(e),t):a},t.source=function(e){return arguments.length?(o=_e(e),t):o},t.target=function(e){return arguments.length?(s=_e(e),t):s},t.startAngle=function(e){return arguments.length?(u=_e(e),t):u},t.endAngle=function(e){return arguments.length?(l=_e(e),t):l},t},$s.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),s=n.call(this,t,r),a=(o.y+s.y)/2,u=[o,{x:o.x,y:a},{x:s.x,y:a},s];return u=u.map(i),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=Rn,n=Un,i=Qo;return t.source=function(n){return arguments.length?(e=_e(n),t):e},t.target=function(e){return arguments.length?(n=_e(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},$s.svg.diagonal.radial=function(){var t=$s.svg.diagonal(),e=Qo,n=t.projection;return t.projection=function(t){return arguments.length?n(ts(e=t)):e},t},$s.svg.symbol=function(){function t(t,i){return(kl.get(e.call(this,t,i))||is)(n.call(this,t,i))}var e=ns,n=es;return t.type=function(n){return arguments.length?(e=_e(n),t):e},t.size=function(e){return arguments.length?(n=_e(e),t):n},t};var kl=$s.map({circle:is,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Cl)),n=e*Cl;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ll),n=e*Ll/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ll),n=e*Ll/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});$s.svg.symbolTypes=kl.keys();var El,Sl,Ll=Math.sqrt(3),Cl=Math.tan(30*Da),Tl=[],Al=0;Tl.call=ya.call,Tl.empty=ya.empty,Tl.node=ya.node,Tl.size=ya.size,$s.transition=function(t){return arguments.length?El?t.transition():t:xa.transition()},$s.transition.prototype=Tl,Tl.select=function(t){var e,n,i,r=this.id,o=[];t=_(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]);for(var u=this[s],l=-1,c=u.length;++l<c;)(i=u[l])&&(n=t.call(i,i.__data__,l,s))?("__data__"in i&&(n.__data__=i.__data__),as(n,l,r,i.__transition__[r]),e.push(n)):e.push(null)}return rs(o,r)},Tl.selectAll=function(t){var e,n,i,r,o,s=this.id,a=[];t=m(t);for(var u=-1,l=this.length;++u<l;)for(var c=this[u],h=-1,f=c.length;++h<f;)if(i=c[h]){o=i.__transition__[s],n=t.call(i,i.__data__,h,u),a.push(e=[]);for(var p=-1,d=n.length;++p<d;)(r=n[p])&&as(r,p,s,o),e.push(r)}return rs(a,s)},Tl.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=S(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]);for(var n=this[o],a=0,u=n.length;u>a;a++)(i=n[a])&&t.call(i,i.__data__,a,o)&&e.push(i)}return rs(r,this.id)},Tl.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):C(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(i){i.__transition__[n].tween.set(t,e)})},Tl.attr=function(t,e){function n(){this.removeAttribute(a)}function i(){this.removeAttributeNS(a.space,a.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var s="transform"==t?ir:Oi,a=$s.ns.qualify(t);return os(this,"attr."+t,e,a.local?o:r)},Tl.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=$s.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Tl.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+="",function(){var i,r=ta.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=Oi(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return os(this,"style."+t,e,r)},Tl.styleTween=function(t,e,n){function i(i,r){var o=e.call(this,i,r,ta.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},Tl.text=function(t){return os(this,"text",t,ss)},Tl.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Tl.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=$s.ease.apply($s,arguments)),C(this,function(n){n.__transition__[e].ease=t}))},Tl.delay=function(t){var e=this.id;return C(this,"function"==typeof t?function(n,i,r){n.__transition__[e].delay=+t.call(n,n.__data__,i,r)}:(t=+t,function(n){n.__transition__[e].delay=t}))},Tl.duration=function(t){var e=this.id;return C(this,"function"==typeof t?function(n,i,r){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,i,r))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},Tl.each=function(t,e){var n=this.id;if(arguments.length<2){var i=Sl,r=El;El=n,C(this,function(e,i,r){Sl=e.__transition__[n],t.call(e,e.__data__,i,r)}),Sl=i,El=r}else C(this,function(i){var r=i.__transition__[n];(r.event||(r.event=$s.dispatch("start","end"))).on(t,e)});return this},Tl.transition=function(){for(var t,e,n,i,r=this.id,o=++Al,s=[],a=0,u=this.length;u>a;a++){s.push(t=[]);for(var e=this[a],l=0,c=e.length;c>l;l++)(n=e[l])&&(i=Object.create(n.__transition__[r]),i.delay+=i.duration,as(n,l,o,i)),t.push(n)}return rs(s,o)},$s.svg.axis=function(){function t(t){t.each(function(){var t,l=$s.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),f=null==u?h.ticks?h.ticks.apply(h,a):h.domain():u,p=null==e?h.tickFormat?h.tickFormat.apply(h,a):me:e,d=l.selectAll(".tick").data(f,h),_=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ta),m=$s.transition(d.exit()).style("opacity",Ta).remove(),g=$s.transition(d).style("opacity",1),v=io(h),y=l.selectAll(".domain").data([0]),b=(y.enter().append("path").attr("class","domain"),$s.transition(y));_.append("line"),_.append("text");var w=_.select("line"),x=g.select("line"),M=d.select("text").text(p),P=_.select("text"),k=g.select("text");switch(i){case"bottom":t=us,w.attr("y2",r),P.attr("y",Math.max(r,0)+s),x.attr("x2",0).attr("y2",r),k.attr("x",0).attr("y",Math.max(r,0)+s),M.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+v[0]+","+o+"V0H"+v[1]+"V"+o);break;case"top":t=us,w.attr("y2",-r),P.attr("y",-(Math.max(r,0)+s)),x.attr("x2",0).attr("y2",-r),k.attr("x",0).attr("y",-(Math.max(r,0)+s)),M.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+v[0]+","+-o+"V0H"+v[1]+"V"+-o);break;case"left":t=ls,w.attr("x2",-r),P.attr("x",-(Math.max(r,0)+s)),x.attr("x2",-r).attr("y2",0),k.attr("x",-(Math.max(r,0)+s)).attr("y",0),M.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-o+","+v[0]+"H0V"+v[1]+"H"+-o);break;case"right":t=ls,w.attr("x2",r),P.attr("x",Math.max(r,0)+s),x.attr("x2",r).attr("y2",0),k.attr("x",Math.max(r,0)+s).attr("y",0),M.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+o+","+v[0]+"H0V"+v[1]+"H"+o)}if(h.rangeBand){var E=h,S=E.rangeBand()/2;c=h=function(t){return E(t)+S}}else c.rangeBand?c=h:m.call(t,h);_.call(t,c),g.call(t,h)})}var e,n=$s.scale.linear(),i=Dl,r=6,o=6,s=3,a=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in jl?e+"":Dl,t):i},t.ticks=function(){return arguments.length?(a=arguments,t):a},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,o=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(){return arguments.length&&t},t};var Dl="bottom",jl={top:1,right:1,bottom:1,left:1};$s.svg.brush=function(){function t(o){o.each(function(){var o=$s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),s=o.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=o.selectAll(".resize").data(m,me);a.exit().remove(),a.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ol[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",t.empty()?"none":null);var c,h=$s.transition(o),f=$s.transition(s);u&&(c=io(u),f.attr("x",c[0]).attr("width",c[1]-c[0]),n(h)),l&&(c=io(l),f.attr("y",c[0]).attr("height",c[1]-c[0]),i(h)),e(h)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function i(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function r(){function r(){32==$s.event.keyCode&&(L||(y=null,T[0]-=c[1],T[1]-=f[1],L=2),h())}function p(){32==$s.event.keyCode&&2==L&&(T[0]+=c[1],T[1]+=f[1],L=0,h())}function m(){var t=$s.mouse(w),r=!1;b&&(t[0]+=b[0],t[1]+=b[1]),L||($s.event.altKey?(y||(y=[(c[0]+c[1])/2,(f[0]+f[1])/2]),T[0]=c[+(t[0]<y[0])],T[1]=f[+(t[1]<y[1])]):y=null),E&&g(t,u,0)&&(n(P),r=!0),S&&g(t,l,1)&&(i(P),r=!0),r&&(e(P),M({type:"brush",mode:L?"move":"resize"}))}function g(t,e,n){var i,r,a=io(e),u=a[0],l=a[1],h=T[n],p=n?f:c,m=p[1]-p[0];return L&&(u-=h,l-=m+h),i=(n?_:d)?Math.max(u,Math.min(l,t[n])):t[n],L?r=(i+=h)+m:(y&&(h=Math.max(u,Math.min(l,2*y[n]-i))),i>h?(r=i,i=h):r=h),p[0]!=i||p[1]!=r?(n?s=null:o=null,p[0]=i,p[1]=r,!0):void 0}function v(){m(),P.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),$s.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),M({type:"brushend"})}var y,b,w=this,x=$s.select($s.event.target),M=a.of(w,arguments),P=$s.select(w),k=x.datum(),E=!/^(n|s)$/.test(k)&&u,S=!/^(e|w)$/.test(k)&&l,L=x.classed("extent"),C=R(),T=$s.mouse(w),A=$s.select(ta).on("keydown.brush",r).on("keyup.brush",p);if($s.event.changedTouches?A.on("touchmove.brush",m).on("touchend.brush",v):A.on("mousemove.brush",m).on("mouseup.brush",v),P.interrupt().selectAll("*").interrupt(),L)T[0]=c[0]-T[0],T[1]=f[0]-T[1];else if(k){var D=+/w$/.test(k),j=+/^n/.test(k);b=[c[1-D]-T[0],f[1-j]-T[1]],T[0]=c[D],T[1]=f[j]}else $s.event.altKey&&(y=T.slice());P.style("pointer-events","none").selectAll(".resize").style("display",null),$s.select("body").style("cursor",x.style("cursor")),M({type:"brushstart"}),m()}var o,s,a=p(t,"brushstart","brush","brushend"),u=null,l=null,c=[0,0],f=[0,0],d=!0,_=!0,m=Nl[0];return t.event=function(t){t.each(function(){var t=a.of(this,arguments),e={x:c,y:f,i:o,j:s},n=this.__chart__||e;this.__chart__=e,El?$s.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,c=n.x,f=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Ni(c,e.x),i=Ni(f,e.y);return o=s=null,function(r){c=e.x=n(r),f=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,m=Nl[!u<<1|!l],t):u},t.y=function(e){return arguments.length?(l=e,m=Nl[!u<<1|!l],t):l},t.clamp=function(e){return arguments.length?(u&&l?(d=!!e[0],_=!!e[1]):u?d=!!e:l&&(_=!!e),t):u&&l?[d,_]:u?d:l?_:null},t.extent=function(e){var n,i,r,a,h;return arguments.length?(u&&(n=e[0],i=e[1],l&&(n=n[0],i=i[0]),o=[n,i],u.invert&&(n=u(n),i=u(i)),n>i&&(h=n,n=i,i=h),(n!=c[0]||i!=c[1])&&(c=[n,i])),l&&(r=e[0],a=e[1],u&&(r=r[1],a=a[1]),s=[r,a],l.invert&&(r=l(r),a=l(a)),r>a&&(h=r,r=a,a=h),(r!=f[0]||a!=f[1])&&(f=[r,a])),t):(u&&(o?(n=o[0],i=o[1]):(n=c[0],i=c[1],u.invert&&(n=u.invert(n),i=u.invert(i)),n>i&&(h=n,n=i,i=h))),l&&(s?(r=s[0],a=s[1]):(r=f[0],a=f[1],l.invert&&(r=l.invert(r),a=l.invert(a)),r>a&&(h=r,r=a,a=h))),u&&l?[[n,r],[i,a]]:u?[n,i]:l&&[r,a])},t.clear=function(){return t.empty()||(c=[0,0],f=[0,0],o=s=null),t},t.empty=function(){return!!u&&c[0]==c[1]||!!l&&f[0]==f[1]},$s.rebind(t,a,"on")};var Ol={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Nl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Rl=$s.time={},Ul=Date,Il=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];cs.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Bl.setUTCDate.apply(this._,arguments)},setDay:function(){Bl.setUTCDay.apply(this._,arguments)},setFullYear:function(){Bl.setUTCFullYear.apply(this._,arguments)},setHours:function(){Bl.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Bl.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Bl.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Bl.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Bl.setUTCSeconds.apply(this._,arguments)},setTime:function(){Bl.setTime.apply(this._,arguments)}};var Bl=Date.prototype,Fl="%a %b %e %X %Y",zl="%m/%d/%Y",Hl="%H:%M:%S",Zl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ql=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Vl=["January","February","March","April","May","June","July","August","September","October","November","December"],Wl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Rl.year=hs(function(t){return t=Rl.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Rl.years=Rl.year.range,Rl.years.utc=Rl.year.utc.range,Rl.day=hs(function(t){var e=new Ul(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Rl.days=Rl.day.range,Rl.days.utc=Rl.day.utc.range,Rl.dayOfYear=function(t){var e=Rl.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},Il.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=Rl[t]=hs(function(t){return(t=Rl.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Rl.year(t).getDay();return Math.floor((Rl.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Rl[t+"s"]=n.range,Rl[t+"s"].utc=n.utc.range,Rl[t+"OfYear"]=function(t){var n=Rl.year(t).getDay();return Math.floor((Rl.dayOfYear(t)+(n+e)%7)/7)}}),Rl.week=Rl.sunday,Rl.weeks=Rl.sunday.range,Rl.weeks.utc=Rl.sunday.utc.range,Rl.weekOfYear=Rl.sundayOfYear,Rl.format=ps;var Gl=_s(Zl),Kl=ms(Zl),$l=_s(ql),Yl=ms(ql),Jl=_s(Vl),Xl=ms(Vl),Ql=_s(Wl),tc=ms(Wl),ec=/^%/,nc={"-":"",_:" ",0:"0"},ic={a:function(t){return ql[t.getDay()]},A:function(t){return Zl[t.getDay()]},b:function(t){return Wl[t.getMonth()]},B:function(t){return Vl[t.getMonth()]},c:ps(Fl),d:function(t,e){return gs(t.getDate(),e,2)},e:function(t,e){return gs(t.getDate(),e,2)},H:function(t,e){return gs(t.getHours(),e,2)},I:function(t,e){return gs(t.getHours()%12||12,e,2)},j:function(t,e){return gs(1+Rl.dayOfYear(t),e,3)},L:function(t,e){return gs(t.getMilliseconds(),e,3)},m:function(t,e){return gs(t.getMonth()+1,e,2)},M:function(t,e){return gs(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return gs(t.getSeconds(),e,2)},U:function(t,e){return gs(Rl.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return gs(Rl.mondayOfYear(t),e,2)},x:ps(zl),X:ps(Hl),y:function(t,e){return gs(t.getFullYear()%100,e,2)},Y:function(t,e){return gs(t.getFullYear()%1e4,e,4)},Z:Fs,"%":function(){return"%"}},rc={a:vs,A:ys,b:Ms,B:Ps,c:ks,d:js,e:js,H:Ns,I:Ns,j:Os,L:Is,m:Ds,M:Rs,p:Bs,S:Us,U:ws,w:bs,W:xs,x:Es,X:Ss,y:Cs,Y:Ls,Z:Ts,"%":zs},oc=/^\s*\d+/,sc=$s.map({am:0,pm:1});ps.utc=Hs;var ac=Hs("%Y-%m-%dT%H:%M:%S.%LZ");ps.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Zs:ac,Zs.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Zs.toString=ac.toString,Rl.second=hs(function(t){return new Ul(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Rl.seconds=Rl.second.range,Rl.seconds.utc=Rl.second.utc.range,Rl.minute=hs(function(t){return new Ul(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Rl.minutes=Rl.minute.range,Rl.minutes.utc=Rl.minute.utc.range,Rl.hour=hs(function(t){var e=t.getTimezoneOffset()/60;return new Ul(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Rl.hours=Rl.hour.range,Rl.hours.utc=Rl.hour.utc.range,Rl.month=hs(function(t){return t=Rl.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Rl.months=Rl.month.range,Rl.months.utc=Rl.month.utc.range;var uc=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],lc=[[Rl.second,1],[Rl.second,5],[Rl.second,15],[Rl.second,30],[Rl.minute,1],[Rl.minute,5],[Rl.minute,15],[Rl.minute,30],[Rl.hour,1],[Rl.hour,3],[Rl.hour,6],[Rl.hour,12],[Rl.day,1],[Rl.day,2],[Rl.week,1],[Rl.month,1],[Rl.month,3],[Rl.year,1]],cc=[[ps("%Y"),Ve],[ps("%B"),function(t){return t.getMonth()}],[ps("%b %d"),function(t){return 1!=t.getDate()}],[ps("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[ps("%I %p"),function(t){return t.getHours()}],[ps("%I:%M"),function(t){return t.getMinutes()}],[ps(":%S"),function(t){return t.getSeconds()}],[ps(".%L"),function(t){return t.getMilliseconds()}]],hc=Ws(cc);lc.year=Rl.year,Rl.scale=function(){return qs($s.scale.linear(),lc,hc)};var fc={range:function(t,e,n){return $s.range(+t,+e,n).map(Vs)},floor:me,ceil:me},pc=lc.map(function(t){return[t[0].utc,t[1]]}),dc=[[Hs("%Y"),Ve],[Hs("%B"),function(t){return t.getUTCMonth()}],[Hs("%b %d"),function(t){return 1!=t.getUTCDate()}],[Hs("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[Hs("%I %p"),function(t){return t.getUTCHours()}],[Hs("%I:%M"),function(t){return t.getUTCMinutes()}],[Hs(":%S"),function(t){return t.getUTCSeconds()}],[Hs(".%L"),function(t){return t.getUTCMilliseconds()}]],_c=Ws(dc);return pc.year=Rl.year.utc,Rl.scale.utc=function(){return qs($s.scale.linear(),pc,_c)},$s.text=ge(function(t){return t.responseText}),$s.json=function(t,e){return ve(t,"application/json",Gs,e)},$s.html=function(t,e){return ve(t,"text/html",Ks,e)},$s.xml=ge(function(t){return t.responseXML}),$s}()},{}],39:[function(t,e){var n=t("synthetic-dom-events"),i=function(t,e,n,i){return t.addEventListener(e,n,i||!1)},r=function(t,e,n,i){return t.removeEventListener(e,n,i||!1)},o=function(t,e,n,o){function s(i){r(t,e,s,o),n(i)}i(t,e,s,o)},s=function(t,e,i){var r=n(e,i);t.dispatchEvent(r)};document.addEventListener||(i=function(t,e,n){return t.attachEvent("on"+e,n)}),document.removeEventListener||(r=function(t,e,n){return t.detachEvent("on"+e,n)}),document.dispatchEvent||(s=function(t,e,i){var r=n(e,i);return t.fireEvent("on"+r.type,r)}),e.exports={on:i,off:r,once:o,emit:s}},{"synthetic-dom-events":40}],40:[function(t,e){function n(t,e){return(t.ctrlKey!=(e.ctrlKey||!1)||t.altKey!=(e.altKey||!1)||t.shiftKey!=(e.shiftKey||!1)||t.metaKey!=(e.metaKey||!1)||t.keyCode!=(e.keyCode||0)||t.charCode!=(e.charCode||0))&&(t=document.createEvent("Event"),t.initEvent(e.type,e.bubbles,e.cancelable),t.ctrlKey=e.ctrlKey||!1,t.altKey=e.altKey||!1,t.shiftKey=e.shiftKey||!1,t.metaKey=e.metaKey||!1,t.keyCode=e.keyCode||0,t.charCode=e.charCode||0),t}var i=document||{},r=(i.documentElement||{},!0);try{i.createEvent("KeyEvents")}catch(o){r=!1}var s=function(t,e){e=e||{};var o=c(t),s=o;"KeyboardEvent"===o&&r&&(o="KeyEvents",s="KeyEvent");var a=i.createEvent(o),l="init"+s,h="function"==typeof a[l]?l:"initEvent",f=u[h],p=[],d={};e.type=t;for(var _=0;_<f.length;++_){var m=f[_],g=e[m];void 0===g&&(g=a[m]),d[m]=!0,p.push(g)}a[h].apply(a,p),"KeyboardEvent"===o&&(a=n(a,e));for(var m in e)d[m]||(a[m]=e[m]);return a},a=function(t,e){e=e||{};var n=i.createEventObject();n.type=t;for(var r in e)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports=i.createEvent?s:a;var u=t("./init.json"),l=t("./types.json"),c=function(){var t={};for(var e in l)for(var n=l[e],i=0;i<n.length;i++)t[n[i]]=e;return function(e){return t[e]||"Event"}}()},{"./init.json":41,"./types.json":42}],41:[function(t,e){e.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],42:[function(t,e){e.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],43:[function(t,e){function n(t,e){var n;for(n in e)r(t,n,e[n])}function i(t,e){return function(n,i){o(n,t,arguments.length>1?i:e)}}function r(t,e,n){t.style[s(e)]=n}function o(t){return 3==arguments.length?r(t,arguments[1],arguments[2]):n(t,arguments[1])}var s=t("to-camel-case");e.exports=o,e.exports.hide=i("display","none"),e.exports.show=i("display","initial")},{"to-camel-case":44}],44:[function(t,e){function n(t){return i(t).replace(/\s(\w)/g,function(t,e){return e.toUpperCase()})}var i=t("to-space-case");e.exports=n},{"to-space-case":45}],45:[function(t,e){function n(t){return i(t).replace(/[\W_]+(.|$)/g,function(t,e){return e?" "+e:""})}var i=t("to-no-case");e.exports=n},{"to-no-case":46}],46:[function(t,e){function n(t){return o.test(t)?t.toLowerCase():(a.test(t)&&(t=i(t)),s.test(t)&&(t=r(t)),t.toLowerCase())}function i(t){return t.replace(u,function(t,e){return e?" "+e:""})}function r(t){return t.replace(l,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}e.exports=n;var o=/\s/,s=/[a-z][A-Z]/,a=/[\W_]/,u=/[\W_]+(.|$)/g,l=/(.)([A-Z]+)/g},{}],47:[function(t,e){!function(t,n){"undefined"!=typeof e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()}("domready",function(){var t,e=[],n=document,i=n.documentElement.doScroll,r="DOMContentLoaded",o=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(r,t=function(){for(n.removeEventListener(r,t),o=1;t=e.shift();)t()}),function(t){o?t():e.push(t)}})},{}],48:[function(t,e){!function(t,n,i){var r=t.L,o={};o.version="0.7.2","object"==typeof e&&"object"==typeof e.exports?e.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=r,this},t.L=o,o.Util={extend:function(t){var e,n,i,r,o=Array.prototype.slice.call(arguments,1);for(n=0,i=o.length;i>n;n++){r=o[n]||{};for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e])}return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(n){return n[e]=n[e]||++t,n[e]}}(),invokeEach:function(t,e,n){var i,r;if("object"==typeof t){r=Array.prototype.slice.call(arguments,3);for(i in t)e.apply(n,[i,t[i]].concat(r));return!0}return!1},limitExecByInterval:function(t,e,n){var i,r;return function o(){var s=arguments;return i?void(r=!0):(i=!0,setTimeout(function(){i=!1,r&&(o.apply(n,s),r=!1)},e),void t.apply(n,s))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var r=e[n];if(r===i)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var n,i,r=["webkit","moz","o","ms"];for(n=0;n<r.length&&!i;n++)i=t[r[n]+e];return i}function n(e){var n=+new Date,r=Math.max(0,16-(n-i));return i=n+r,t.setTimeout(e,r)}var i=0,r=t.requestAnimationFrame||e("RequestAnimationFrame")||n,s=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,i,s,a){return e=o.bind(e,i),s&&r===n?void e():r.call(t,e,a)},o.Util.cancelAnimFrame=function(e){e&&s.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=e,e.prototype=i;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&(e[r]=this[r]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=o.extend({},i.options,t.options)),o.extend(i,t),i._initHooks=[];var s=this;return e.__super__=s.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;e>t;t++)i._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var s="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addEventListener,this,e,n))return this;
var i,r,a,u,l,c,h,f=this[s]=this[s]||{},p=n&&n!==this&&o.stamp(n);for(t=o.Util.splitWords(t),i=0,r=t.length;r>i;i++)a={action:e,context:n||this},u=t[i],p?(l=u+"_idx",c=l+"_len",h=f[l]=f[l]||{},h[p]||(h[p]=[],f[c]=(f[c]||0)+1),h[p].push(a)):(f[u]=f[u]||[],f[u].push(a));return this},hasEventListeners:function(t){var e=this[s];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[s])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,r,a,u,l,c,h,f,p,d=this[s],_=n&&n!==this&&o.stamp(n);for(t=o.Util.splitWords(t),i=0,r=t.length;r>i;i++)if(a=t[i],c=a+"_idx",h=c+"_len",f=d[c],e){if(u=_&&f?f[_]:d[a]){for(l=u.length-1;l>=0;l--)u[l].action!==e||n&&u[l].context!==n||(p=u.splice(l,1),p[0].action=o.Util.falseFn);n&&f&&0===u.length&&(delete f[_],d[h]--)}}else delete d[a],delete d[c],delete d[h];return this},clearAllEventListeners:function(){return delete this[s],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,r,a,u,l=o.Util.extend({},e,{type:t,target:this}),c=this[s];if(c[t])for(n=c[t].slice(),i=0,r=n.length;r>i;i++)n[i].action.call(n[i].context,l);a=c[t+"_idx"];for(u in a)if(n=a[u].slice())for(i=0,r=n.length;r>i;i++)n[i].action.call(n[i].context,l);return this},addOneTimeEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=o.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var e="ActiveXObject"in t,r=e&&!n.addEventListener,s=navigator.userAgent.toLowerCase(),a=-1!==s.indexOf("webkit"),u=-1!==s.indexOf("chrome"),l=-1!==s.indexOf("phantom"),c=-1!==s.indexOf("android"),h=-1!==s.search("android [23]"),f=-1!==s.indexOf("gecko"),p=typeof orientation!=i+"",d=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints&&!t.PointerEvent,_=t.PointerEvent&&t.navigator.pointerEnabled&&t.navigator.maxTouchPoints||d,m="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,g=n.documentElement,v=e&&"transition"in g.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!h,b="MozPerspective"in g.style,w="OTransition"in g.style,x=!t.L_DISABLE_3D&&(v||y||b||w)&&!l,M=!t.L_NO_TOUCH&&!l&&function(){var t="ontouchstart";if(_||t in g)return!0;var e=n.createElement("div"),i=!1;return e.setAttribute?(e.setAttribute(t,"return;"),"function"==typeof e[t]&&(i=!0),e.removeAttribute(t),e=null,i):!1}();o.Browser={ie:e,ielt9:r,webkit:a,gecko:f&&!a&&!t.opera&&!e,android:c,android23:h,chrome:u,ie3d:v,webkit3d:y,gecko3d:b,opera3d:w,any3d:x,mobile:p,mobileWebkit:p&&a,mobileWebkit3d:p&&y,mobileOpera:p&&t.opera,touch:M,msPointer:d,pointer:_,retina:m}}(),o.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;r>i;i++)this.extend(n[i])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,n=this.max,i=t.min,r=t.max,s=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?n.getElementById(t):t},getStyle:function(t,e){var i=t.style[e];if(!i&&t.currentStyle&&(i=t.currentStyle[e]),(!i||"auto"===i)&&n.defaultView){var r=n.defaultView.getComputedStyle(t,null);i=r?r[e]:null}return"auto"===i?null:i},getViewportOffset:function(t){var e,i=0,r=0,s=t,a=n.body,u=n.documentElement;do{if(i+=s.offsetTop||0,r+=s.offsetLeft||0,i+=parseInt(o.DomUtil.getStyle(s,"borderTopWidth"),10)||0,r+=parseInt(o.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,e=o.DomUtil.getStyle(s,"position"),s.offsetParent===a&&"absolute"===e)break;if("fixed"===e){i+=a.scrollTop||u.scrollTop||0,r+=a.scrollLeft||u.scrollLeft||0;break}if("relative"===e&&!s.offsetLeft){var l=o.DomUtil.getStyle(s,"width"),c=o.DomUtil.getStyle(s,"max-width"),h=s.getBoundingClientRect();("none"!==l||"none"!==c)&&(r+=h.left+s.clientLeft),i+=h.top+(a.scrollTop||u.scrollTop||0);break}s=s.offsetParent}while(s);s=t;do{if(s===a)break;i-=s.scrollTop||0,r-=s.scrollLeft||0,s=s.parentNode}while(s);return new o.Point(r,i)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(n.body,"direction")),o.DomUtil._docIsLtr},create:function(t,e,i){var r=n.createElement(t);return r.className=e,i&&i.appendChild(r),r},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=o.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=o.Util.splitWords(e),r=0,s=n.length;s>r;r++)t.classList.add(n[r]);else if(!o.DomUtil.hasClass(t,e)){var a=o.DomUtil._getClass(t);o.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):o.DomUtil._setClass(t,o.Util.trim((" "+o.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(r){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var e=n.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,n="translate"+(e?"3d":"")+"(",i=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){var n=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),i=" scale("+t+") ";return n+i},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&o.Browser.any3d?t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in n)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)}});else{var e=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(e){var t=n.documentElement.style;this._userSelect=t[e],t[e]="none"}},enableTextSelection:function(){e&&(n.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==i&&(this.alt=parseFloat(n))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,n=o.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*n,r=(t.lng-this.lng)*n,s=this.lat*n,a=t.lat*n,u=Math.sin(i/2),l=Math.sin(r/2),c=u*u+l*l*Math.cos(s)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var n=this.lng;return t=t||-180,e=e||180,n=(n+e)%(e-t)+(t>n||n===e?e:t),new o.LatLng(this.lat,n)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new o.LatLng(t[0],t[1],t[2]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===i?null:new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;r>i;i++)this.extend(n[i])},o.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=o.latLng(t);return t=null!==e?e:o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-i,e.lng-r),new o.LatLng(n.lat+i,n.lng+r))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),s=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=t.lng*e,s=i*e;return s=Math.log(Math.tan(Math.PI/4+s/2)),new o.Point(r,s)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(i,n)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return o.point(e,e)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),n=6378137;return e.multiplyBy(n)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===i?this.getZoom():e,this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),s=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=s.subtract(r).multiplyBy(1-1/i),u=this.containerPointToLatLng(r.add(a));return this.setView(u,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var n=o.point(e.paddingTopLeft||e.padding||[0,0]),i=o.point(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i)),s=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),u=this.project(t.getNorthEast(),r),l=this.unproject(a.add(u).divideBy(2).add(s),r);return r=e&&e.maxZoom?Math.min(e.maxZoom,r):r,this.setView(l,r,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=o.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),r=n.divideBy(2).round(),s=i.subtract(r);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new o.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=o.latLngBounds(t);var i,r=this.getMinZoom()-(e?1:0),s=this.getMaxZoom(),a=this.getSize(),u=t.getNorthWest(),l=t.getSouthEast(),c=!0;n=o.point(n||[0,0]);do r++,i=this.project(l,r).subtract(this.project(u,r)).add(n),c=e?i.x<a.x||i.y<a.y:a.contains(i);while(c&&s>=r);return c&&e?null:e?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;n>e;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var r=this._zoom!==e;i||(this.fire("movestart"),r&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(r||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,r=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(n=Math.max(n,o.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e),r!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var n,i,r=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=r.length;i>n;n++)o.DomEvent[e](this._container,r[n],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),r=this.layerPointToLatLng(i);this.fire(e,{latlng:r,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),s=new o.Bounds(i.subtract(r),i.add(r)),a=this._getBoundsOffset(s,n,e);return this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new o.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),r=this.project(e.getSouthEast(),n).subtract(t.max),s=this._rebound(i.x,-r.x),a=this._rebound(i.y,-r.y);return new o.Point(s,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=this.R_MAJOR,s=this.R_MINOR,a=t.lng*e*r,u=i*e,l=s/r,c=Math.sqrt(1-l*l),h=c*Math.sin(u);h=Math.pow((1-h)/(1+h),.5*c);var f=Math.tan(.5*(.5*Math.PI-u))/h;return u=-r*Math.log(f),new o.Point(a,u)},unproject:function(t){for(var e,n=o.LatLng.RAD_TO_DEG,i=this.R_MAJOR,r=this.R_MINOR,s=t.x*n/i,a=r/i,u=Math.sqrt(1-a*a),l=Math.exp(-t.y/i),c=Math.PI/2-2*Math.atan(l),h=15,f=1e-7,p=h,d=.1;Math.abs(d)>f&&--p>0;)e=u*Math.sin(c),d=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*u))-c,c+=d;return new o.LatLng(c*n,s)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,n=.5/(Math.PI*e);return new o.Transformation(n,.5,-n,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,r,o=t.children,s=-e(1/0,-1/0);for(i=0,r=o.length;r>i;i++)o[i]!==this._container&&(n=parseInt(o[i].style.zIndex,10),isNaN(n)||(s=e(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;
return n&&e>n&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var r=o.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(t){var e,i,r,s=[],a=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(i=t.min.x;i<=t.max.x;i++)r=new o.Point(i,e),this._tileShouldBeLoaded(r)&&s.push(r);var u=s.length;if(0!==u){s.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var l=n.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=u,i=0;u>i;i++)this._addTile(s[i],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=e.tileSize,r=t.multiplyBy(i),o=r.add([i,i]),s=this._map.unproject(r),a=this._map.unproject(o);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,r;for(r in this._tiles)e=r.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(r)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();o.DomUtil.setPosition(i,n,o.Browser.chrome),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=o.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==i&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=o.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;n.width=n.height=e.detectRetina&&o.Browser.retina?2*i:i;for(var r in e)this.options.hasOwnProperty(r)||"crs"===r||(n[r]=e[r]);this.wmsParams=n,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),r=i.add([n,n]),s=this._crs.project(e.unproject(i,t.z)),a=this._crs.project(e.unproject(r,t.z)),u=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[a.y,s.x,s.y,a.x].join(","):[s.x,a.y,a.x,s.y].join(","),l=o.Util.template(this._url,{s:this._getSubdomain(t)});return l+o.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+u},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=o.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),r=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(r,t.zoom,t.center),u=e._latLngToNewLayerPoint(s,t.zoom,t.center)._subtract(a),l=a._add(u._multiplyBy(.5*(1-1/i)));n.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,n){return new o.ImageOverlay(t,e,n)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i;return i=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n,i=this.options,r=o.point(i[e+"Size"]);n=o.point("shadow"===e?i.shadowAnchor||i.iconAnchor:i.iconAnchor),!n&&r&&(n=r.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return e=e||n.createElement("img"),e.src=t,e},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var n=o.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,e,i,r,o,s=n.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=s.length;e>t;t++)if(i=s[t].src,r=i.match(a))return o=i.split(a)[0],(o?o+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",r=t.icon.createIcon(this._icon),s=!1;r!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(r.title=t.title),t.alt&&(r.alt=t.alt)),o.DomUtil.addClass(r,i),t.keyboard&&(r.tabIndex="0"),this._icon=r,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(r,"mouseover",this._bringToFront,this).on(r,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),u=!1;a!==this._shadow&&(this._removeShadow(),u=!0),a&&o.DomUtil.addClass(a,i),this._shadow=a,t.opacity<1&&this._updateOpacity();var l=this._map._panes;s&&l.markerPane.appendChild(this._icon),a&&u&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)o.DomEvent.on(t,e[n],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:n.createElement("div"),i=this.options;return e.innerHTML=i.html!==!1?i.html:"",i.bgPos&&(e.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=o.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",i),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var r=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",i);o.DomEvent.disableClickPropagation(r),this._contentNode=o.DomUtil.create("div",e+"-content",r),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(r,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",i),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",o.DomUtil.addClass(t,s)):o.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(o.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(i),s=o.point(this.options.autoPanPadding),a=o.point(this.options.autoPanPaddingTopLeft||s),u=o.point(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),c=0,h=0;r.x+n+u.x>l.x&&(c=r.x+n-l.x+u.x),r.x-c-a.x<0&&(c=r.x-a.x),r.y+e+u.y>l.y&&(h=r.y+e-l.y+u.y),r.y-h-a.y<0&&(h=r.y-a.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof o.Popup)){var i=t;t=new o.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=o.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(o.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=o.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;n>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=o.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,n=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),n=o.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),r=i.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(i,r)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!n.createElementNS||!n.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return n.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),r=e.layerPointToLatLng(i);this.fire(t.type,{latlng:r,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,r=n.y-e.y,s=this._pathRoot,a=this._panes.overlayPane;o.Browser.mobileWebkit&&a.removeChild(s),o.DomUtil.setPosition(s,e),s.setAttribute("width",i),s.setAttribute("height",r),s.setAttribute("viewBox",[e.x,e.y,i,r].join(" ")),o.Browser.mobileWebkit&&a.appendChild(s)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=n.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(i){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return n.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return n.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return n.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,t.dashStyle=n.dashArray?o.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):"",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=n.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()
}}}),o.Browser.canvas=function(){return!!n.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,n,i,r,s;for(this._ctx.beginPath(),t=0,n=this._parts.length;n>t;t++){for(e=0,i=this._parts[t].length;i>e;e++)r=this._parts[t][e],s=(0===e?"move":"line")+"To",this._ctx[s](r.x,r.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=n.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;o.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,r=typeof Uint8Array!=i+""?Uint8Array:Array,o=new r(n);o[0]=o[n-1]=1,this._simplifyDPStep(t,o,e,0,n-1);var s,a=[];for(s=0;n>s;s++)o[s]&&a.push(t[s]);return a},_simplifyDPStep:function(t,e,n,i,r){var o,s,a,u=0;for(s=i+1;r-1>=s;s++)a=this._sqClosestPointOnSegment(t[s],t[i],t[r],!0),a>u&&(o=s,u=a);u>n&&(e[o]=1,this._simplifyDPStep(t,e,n,i,o),this._simplifyDPStep(t,e,n,o,r))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;o>i;i++)this._sqDist(t[i],t[r])>e&&(n.push(t[i]),r=i);return o-1>r&&n.push(t[o-1]),n},clipSegment:function(t,e,n,i){var r,o,s,a=i?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(a|u))return[t,e];if(a&u)return!1;r=a||u,o=this._getEdgeIntersection(t,e,r,n),s=this._getBitCode(o,n),r===a?(t=o,a=s):(e=o,u=s)}},_getEdgeIntersection:function(t,e,n,i){var r=e.x-t.x,s=e.y-t.y,a=i.min,u=i.max;return 8&n?new o.Point(t.x+r*(u.y-t.y)/s,u.y):4&n?new o.Point(t.x+r*(a.y-t.y)/s,a.y):2&n?new o.Point(u.x,t.y+s*(u.x-t.x)/r):1&n?new o.Point(a.x,t.y+s*(a.x-t.x)/r):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var r,s=e.x,a=e.y,u=n.x-s,l=n.y-a,c=u*u+l*l;return c>0&&(r=((t.x-s)*u+(t.y-a)*l)/c,r>1?(s=n.x,a=n.y):r>0&&(s+=u*r,a+=l*r)),u=t.x-s,l=t.y-a,i?u*u+l*l:new o.Point(s,a)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";e>t;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,r=this._parts,s=null,a=0,u=r.length;u>a;a++)for(var l=r[a],c=1,h=l.length;h>c;c++){e=l[c-1],n=l[c];var f=o.LineUtil._sqClosestPointOnSegment(t,e,n,!0);i>f&&(i=f,s=o.LineUtil._sqClosestPointOnSegment(t,e,n))}return s&&(s.distance=Math.sqrt(i)),s},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,r=e?t:[];for(n=0,i=t.length;i>n;n++){if(o.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;r[n]=o.latLng(t[n])}return r},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=o.Path.VML,i=0,r=t.length,s="";r>i;i++)e=t[i],n&&e._round(),s+=(i?"L":"M")+e.x+" "+e.y;return s},_clipPoints:function(){var t,e,n,i=this._originalPoints,r=i.length;if(this.options.noClip)return void(this._parts=[i]);this._parts=[];var s=this._parts,a=this._map._pathViewport,u=o.LineUtil;for(t=0,e=0;r-1>t;t++)n=u.clipSegment(i[t],i[t+1],a,t),n&&(s[e]=s[e]||[],s[e].push(n[0]),(n[1]!==i[t+1]||t===r-2)&&(s[e].push(n[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,n=0,i=t.length;i>n;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var n,i,r,s,a,u,l,c,h,f=[1,4,2,8],p=o.LineUtil;for(i=0,l=t.length;l>i;i++)t[i]._code=p._getBitCode(t[i],e);for(s=0;4>s;s++){for(c=f[s],n=[],i=0,l=t.length,r=l-1;l>i;r=i++)a=t[i],u=t[r],a._code&c?u._code&c||(h=p._getEdgeIntersection(u,a,c,e),h._code=p._getBitCode(h,e),n.push(h)):(u._code&c&&(h=p._getEdgeIntersection(u,a,c,e),h._code=p._getBitCode(h,e),n.push(h)),n.push(a));t=n}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){o.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;n>e;e++)i=this._holes[e]=this._convertLatLngs(this._holes[e]),i[0].equals(i[i.length-1])&&i.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,n,i;for(t=0,n=this._holes.length;n>t;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;i>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;i>n;n++){var r=o.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);r.length&&e.push(r)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){i>n?t.setLatLngs(e[n++]):this.removeLayer(t)},this);i>n;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,n){o.Path.prototype.initialize.call(this,n),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new o.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),o.circle=function(t,e,n){return new o.Circle(t,e,n)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return o.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var n,i,r,s,a,u,l,c=this.options.weight/2;for(o.Browser.touch&&(c+=10),n=0,s=this._parts.length;s>n;n++)for(l=this._parts[n],i=0,a=l.length,r=a-1;a>i;r=i++)if((e||0!==i)&&(u=o.LineUtil.pointToSegmentDistance(t,l[r],l[i]),c>=u))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,n,i,r,s,a,u,l,c=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(r=0,u=this._parts.length;u>r;r++)for(e=this._parts[r],s=0,l=e.length,a=l-1;l>s;a=s++)n=e[s],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=o.Util.isArray(t)?t:t.features;if(r){for(e=0,n=r.length;n>e;e++)i=r[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(r[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var a=o.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng,s);return a.feature=o.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,n,i){var r,s,a,u,l="Feature"===t.type?t.geometry:t,c=l.coordinates,h=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return r=n(c),e?e(t,r):new o.Marker(r);case"MultiPoint":for(a=0,u=c.length;u>a;a++)r=n(c[a]),h.push(e?e(t,r):new o.Marker(r));return new o.FeatureGroup(h);case"LineString":return s=this.coordsToLatLngs(c,0,n),new o.Polyline(s,i);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return s=this.coordsToLatLngs(c,1,n),new o.Polygon(s,i);case"MultiLineString":return s=this.coordsToLatLngs(c,1,n),new o.MultiPolyline(s,i);case"MultiPolygon":return s=this.coordsToLatLngs(c,2,n),new o.MultiPolygon(s,i);case"GeometryCollection":for(a=0,u=l.geometries.length;u>a;a++)h.push(this.geometryToLayer({geometry:l.geometries[a],type:"Feature",properties:t.properties},e,n,i));return new o.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,r,o,s=[];for(r=0,o=t.length;o>r;r++)i=e?this.coordsToLatLngs(t[r],e-1,n):(n||this.coordsToLatLng)(t[r]),s.push(i);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==i&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(o.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,n,i=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)n=o.GeoJSON.latLngsToCoords(this._holes[t]),n.push(n[0]),i.push(n);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:t,coordinates:e})}}o.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var e,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return t("MultiPoint").call(this);var r=n&&"GeometryCollection"===n.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),i.push(r?e.geometry:o.GeoJSON.asFeature(e)))}),r?o.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,n,i){var r,s,a,u=o.stamp(n),l="_leaflet_"+e+u;return t[l]?this:(r=function(e){return n.call(i||t,e||o.DomEvent._getEvent())},o.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,r,u):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,r,u),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",r,!1),t.addEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?(s=r,a="mouseenter"===e?"mouseover":"mouseout",r=function(e){return o.DomEvent._checkMouse(t,e)?s(e):void 0},t.addEventListener(a,r,!1)):"click"===e&&o.Browser.android?(s=r,r=function(t){return o.DomEvent._filterClick(t,s)},t.addEventListener(e,r,!1)):t.addEventListener(e,r,!1):"attachEvent"in t&&t.attachEvent("on"+e,r),t[l]=r,this))},removeListener:function(t,e,n){var i=o.stamp(n),r="_leaflet_"+e+i,s=t[r];return s?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):t.removeEventListener(e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[r]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,n=o.Draggable.START.length-1;n>=0;n--)o.DomEvent.on(t,o.Draggable.START[n],e);return o.DomEvent.on(t,"click",o.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new o.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_getEvent:function(){var e=t.event;if(!e)for(var n=arguments.callee.caller;n&&(e=n.arguments[0],!e||t.Event!==e.constructor);)n=n.caller;return e},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=o.DomEvent._lastClick&&n-o.DomEvent._lastClick;return i&&i>100&&500>i||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=n,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!(t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(o.DomEvent.stopPropagation(t),o.Draggable._disabled||(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),this._moving)))){var e=t.touches?t.touches[0]:t;this._startPoint=new o.Point(e.clientX,e.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(n,o.Draggable.MOVE[t.type],this._onMove,this).on(n,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new o.Point(e.clientX,e.clientY),r=i.subtract(this._startPoint);(r.x||r.y)&&(o.Browser.touch&&Math.abs(r.x)+Math.abs(r.y)<3||(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(r),o.DomUtil.addClass(n.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.DomUtil.removeClass(n.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in o.Draggable.MOVE)o.DomEvent.off(n,o.Draggable.MOVE[t],this._onMove).off(n,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,r=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),r)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,u=n.easeLinearity,l=s.multiplyBy(u/a),c=l.distanceTo([0,0]),h=Math.min(n.inertiaMaxSpeed,c),f=l.multiplyBy(h/c),p=h/(n.inertiaDeceleration*u),d=f.multiplyBy(-p/2).round();d.x&&d.y?(d=e._limitOffset(d,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(d,{duration:p,easeLinearity:u,noMoveStart:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function r(t){var e;if(o.Browser.pointer?(d.push(t.pointerId),e=d.length):e=t.touches.length,!(e>1)){var n=Date.now(),i=n-(a||n);u=t.touches?t.touches[0]:t,l=i>0&&c>=i,a=n}}function s(t){if(o.Browser.pointer){var n=d.indexOf(t.pointerId);if(-1===n)return;d.splice(n,1)}if(l){if(o.Browser.pointer){var i,r={};for(var s in u)i=u[s],r[s]="function"==typeof i?i.bind(u):i;u=r}u.type="dblclick",e(u),a=null}}var a,u,l=!1,c=250,h="_leaflet_",f=this._touchstart,p=this._touchend,d=[];t[h+f+i]=r,t[h+p+i]=s;var _=o.Browser.pointer?n.documentElement:t;return t.addEventListener(f,r,!1),_.addEventListener(p,s,!1),o.Browser.pointer&&_.addEventListener(o.DomEvent.POINTER_CANCEL,s,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_";return t.removeEventListener(this._touchstart,t[i+this._touchstart+e],!1),(o.Browser.pointer?n.documentElement:t).removeEventListener(this._touchend,t[i+this._touchend+e],!1),o.Browser.pointer&&n.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,t[i+this._touchend+e],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,i,r){var s="_leaflet_",a=this._pointers,u=function(t){o.DomEvent.preventDefault(t);for(var e=!1,n=0;n<a.length;n++)if(a[n].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],i(t)};if(t[s+"touchstart"+r]=u,t.addEventListener(this.POINTER_DOWN,u,!1),!this._pointerDocumentListener){var l=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};n.documentElement.addEventListener(this.POINTER_UP,l,!1),n.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){function r(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s[e]=t;break}t.touches=s.slice(),t.changedTouches=[t],n(t)}}var o="_leaflet_",s=this._pointers;return t[o+"touchmove"+i]=r,t.addEventListener(this.POINTER_MOVE,r,!1),this},addPointerListenerEnd:function(t,e,n,i){var r="_leaflet_",o=this._pointers,s=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],n(t)};return t[r+"touchend"+i]=s,t.addEventListener(this.POINTER_UP,s,!1),t.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(t,e,n){var i="_leaflet_",r=t[i+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,r,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,r,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,r,!1),t.removeEventListener(this.POINTER_CANCEL,r,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),r=e.mouseEventToLayerPoint(t.touches[1]),s=e._getCenterLayerPoint();this._startCenter=i.add(r)._divideBy(2),this._startDist=i.distanceTo(r),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),o.DomEvent.on(n,"touchmove",this._onTouchMove,this).on(n,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1))&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(n,"touchmove",this._onTouchMove).off(n,"touchend",this._onTouchEnd);
var e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),r=t.getZoom(),s=t.getScaleZoom(this._scale)-r,a=s>0?Math.ceil(s):Math.floor(s),u=t._limitZoom(r+a),l=t.getZoomScale(u)/this._scale;t._animateZoom(i,u,e,l)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new o.Point(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&o.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),o.DomEvent.on(n,"touchmove",this._onMove,this).on(n,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(n,"touchmove",this._onMove,this).off(n,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&o.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(e,i){var r=n.createEvent("MouseEvents");r._simulated=!0,i.target._simulatedClick=!0,r.initMouseEvent(e,!0,!0,t,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(r)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void o.DomEvent.on(n,"mousemove",this._onMouseMove,this).on(n,"mouseup",this._onMouseUp,this).on(n,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),r=i.subtract(e),s=new o.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));o.DomUtil.setPosition(n,s),this._moved=!0,n.style.width=Math.max(0,Math.abs(r.x)-4)+"px",n.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(n,"mousemove",this._onMouseMove).off(n,"mouseup",this._onMouseUp).off(n,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var e=n.body,i=n.documentElement,r=e.scrollTop||i.scrollTop,o=e.scrollLeft||i.scrollLeft;this._map._container.focus(),t.scrollTo(o,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;n>e;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;n>e;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;n>e;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;n>e;e++)i[r.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;n>e;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;n>e;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(n,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(n,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=o.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&o.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return o.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),n=t._controlCorners[e];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,r){var s=n+t+" "+n+r;e[t+r]=o.DomUtil.create("div",s,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=o.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,r,s){var a=o.DomUtil.create("a",n,i);a.innerHTML=t,a.href="#",a.title=e;var u=o.DomEvent.stopPropagation;return o.DomEvent.on(a,"click",u).on(a,"mousedown",u).on(a,"dblclick",u).on(a,"click",o.DomEvent.preventDefault).on(a,"click",r,s).on(a,"click",this._refocusOnMap,s),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=o.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180),i=n*(t.getNorthEast().lng-t.getSouthWest().lng)/180,r=this._map.getSize(),o=this.options,s=0;r.x>0&&(s=i*(o.maxWidth/r.x)),this._updateScales(o,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,r=3.2808399*t,o=this._iScale;r>5280?(e=r/5280,n=this._getRoundNum(e),o.style.width=this._getScaleWidth(n/e)+"px",o.innerHTML=n+" mi"):(i=this._getRoundNum(r),o.style.width=this._getScaleWidth(i/r)+"px",o.innerHTML=i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){o.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",o.Browser.touch?o.DomEvent.on(i,"click",o.DomEvent.stop).on(i,"click",this._expand,this):o.DomEvent.on(i,"focus",this._expand,this),o.DomEvent.on(n,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",n),this._separator=o.DomUtil.create("div",t+"-separator",n),this._overlaysList=o.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=o.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(i+=' checked="checked"'),i+="/>";var r=n.createElement("div");return r.innerHTML=i,r.firstChild},_addItem:function(t){var e,i=n.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?(e=n.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers",r),e.layerId=o.stamp(t.layer),o.DomEvent.on(e,"click",this._onInputClick,this);var s=n.createElement("span");s.innerHTML=" "+t.name,i.appendChild(e),i.appendChild(s);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(i),i},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),r=i.length;for(this._handlingClick=!0,t=0;r>t;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,n){return new o.Control.Layers(t,e,n)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,n,i,r=this._el,s=t.getComputedStyle(r);if(o.Browser.any3d){if(i=s[o.DomUtil.TRANSFORM].match(this._transformRe),!i)return;e=parseFloat(i[1]),n=parseFloat(i[2])}else e=parseFloat(s.left),n=parseFloat(s.top);return new o.Point(e,n,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate},n.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(n)?(this.panBy(n,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i),o=this._getCenterLayerPoint()._add(r);return n.animate===!0||this.getSize().contains(r)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,o,i,null,!0),!0):!1},_animateZoom:function(t,e,n,i,r,s,a){a||(this._animatingZoom=!0),o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),o.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:r,backwards:s})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=o.DomUtil.TRANSFORM,i=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[n],r=o.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?r+" "+i:i+" "+r},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);return e&&n>.5&&.5>i?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),r=0;for(e=0,n=i.length;n>e;e++)i[e].complete&&r++;return r/n},_stopLoadingImages:function(t){var e,n,i,r=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=r.length;n>e;e++)i=r[e],i.complete||(i.onload=o.Util.falseFn,i.onerror=o.Util.falseFn,i.src=o.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),n=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new o.LatLng(e,n),r=180*t.coords.accuracy/40075017,s=r/Math.cos(o.LatLng.DEG_TO_RAD*e),a=o.latLngBounds([e-r,n-s],[e+r,n+s]),u=this._locateOptions;if(u.setView){var l=Math.min(this.getBoundsZoom(a),u.maxZoom);this.setView(i,l)}var c={latlng:i,bounds:a,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(c[h]=t.coords[h]);this.fire("locationfound",c)}})}(window,document)},{}],49:[function(t,e,n){!function(t,e){if("object"==typeof n&&n)e(n);else{var i={};e(i),"function"==typeof define&&define.amd?define(i):t.Mustache=i}}(this,function(t){function e(t,e){return p.call(t,e)}function n(t){return!e(d,t)}function i(t){return"function"==typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t){return String(t).replace(/[&<>"'\/]/g,function(t){return g[t]})}function s(t){if(!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);return[new RegExp(r(t[0])+"\\s*"),new RegExp("\\s*"+r(t[1]))]}function a(e,i){function o(){if(E&&!S)for(;k.length;)delete P[k.pop()];else k=[];E=!1,S=!1}i=i||t.tags,e=e||"","string"==typeof i&&(i=i.split(y));for(var a,h,f,p,d,_,m=s(i),g=new c(e),M=[],P=[],k=[],E=!1,S=!1;!g.eos();){if(a=g.pos,f=g.scanUntil(m[0]))for(var L=0,C=f.length;C>L;++L)p=f.charAt(L),n(p)?k.push(P.length):S=!0,P.push(["text",p,a,a+1]),a+=1,"\n"===p&&o();if(!g.scan(m[0]))break;if(E=!0,h=g.scan(x)||"name",g.scan(v),"="===h?(f=g.scanUntil(b),g.scan(b),g.scanUntil(m[1])):"{"===h?(f=g.scanUntil(new RegExp("\\s*"+r("}"+i[1]))),g.scan(w),g.scanUntil(m[1]),h="&"):f=g.scanUntil(m[1]),!g.scan(m[1]))throw new Error("Unclosed tag at "+g.pos);if(d=[h,f,a,g.pos],P.push(d),"#"===h||"^"===h)M.push(d);else if("/"===h){if(_=M.pop(),!_)throw new Error('Unopened section "'+f+'" at '+a);if(_[1]!==f)throw new Error('Unclosed section "'+_[1]+'" at '+a)}else"name"===h||"{"===h||"&"===h?S=!0:"="===h&&(m=s(i=f.split(y)))}if(_=M.pop())throw new Error('Unclosed section "'+_[1]+'" at '+g.pos);return l(u(P))}function u(t){for(var e,n,i=[],r=0,o=t.length;o>r;++r)e=t[r],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}function l(t){for(var e,n,i=[],r=i,o=[],s=0,a=t.length;a>s;++s)switch(e=t[s],e[0]){case"#":case"^":r.push(e),o.push(e),r=e[4]=[];break;case"/":n=o.pop(),n[5]=e[2],r=o.length>0?o[o.length-1][4]:i;break;default:r.push(e)}return i}function c(t){this.string=t,this.tail=t,this.pos=0}function h(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function f(){this.cache={}}var p=RegExp.prototype.test,d=/\S/,_=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===_.call(t)},g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},v=/\s*/,y=/\s+/,b=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(t){var e=this.tail.match(t);if(e&&0===e.index){var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},c.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},h.prototype.push=function(t){return new h(t,this)},h.prototype.lookup=function(t){var e;if(t in this.cache)e=this.cache[t];else{for(var n=this;n;){if(t.indexOf(".")>0){e=n.view;for(var r=t.split("."),o=0;null!=e&&o<r.length;)e=e[r[o++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this.cache[t]=e}return i(e)&&(e=e.call(this.view)),e},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(t,e){var n=this.cache,i=n[t];return null==i&&(i=n[t]=a(t,e)),i},f.prototype.render=function(t,e,n){var i=this.parse(t),r=e instanceof h?e:new h(e);return this.renderTokens(i,r,n,t)},f.prototype.renderTokens=function(e,n,r,o){function s(t){return c.render(t,n,r)}for(var a,u,l="",c=this,h=0,f=e.length;f>h;++h)switch(a=e[h],a[0]){case"#":if(u=n.lookup(a[1]),!u)continue;if(m(u))for(var p=0,d=u.length;d>p;++p)l+=this.renderTokens(a[4],n.push(u[p]),r,o);else if("object"==typeof u||"string"==typeof u)l+=this.renderTokens(a[4],n.push(u),r,o);else if(i(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,o.slice(a[3],a[5]),s),null!=u&&(l+=u)}else l+=this.renderTokens(a[4],n,r,o);break;case"^":u=n.lookup(a[1]),(!u||m(u)&&0===u.length)&&(l+=this.renderTokens(a[4],n,r,o));break;case">":if(!r)continue;u=i(r)?r(a[1]):r[a[1]],null!=u&&(l+=this.renderTokens(this.parse(u),n,r,u));break;case"&":u=n.lookup(a[1]),null!=u&&(l+=u);break;case"name":u=n.lookup(a[1]),null!=u&&(l+=t.escape(u));break;case"text":l+=a[1]}return l},t.name="mustache.js",t.version="0.8.1",t.tags=["{{","}}"];var M=new f;t.clearCache=function(){return M.clearCache()},t.parse=function(t,e){return M.parse(t,e)},t.render=function(t,e,n){return M.render(t,e,n)},t.to_html=function(e,n,r,o){var s=t.render(e,n,r);return i(o)?void o(s):s},t.escape=o,t.Scanner=c,t.Context=h,t.Writer=f})},{}],50:[function(t,e){"use strict";var n=t("./parser"),i=0,r=document.__counter=(parseInt(document.__counter||-1,36)+1).toString(36),o="uid:"+r,s=function(t,e){if(t===window)return"window";if(t===document)return"document";if(t===document.documentElement)return"html";if(e){var n=t.getAttribute(o);return n||(n=(i++).toString(36),t.setAttribute(o,n)),n}return t[o]||(t[o]=(i++).toString(36))},a=function(t){return s(t,!0)},u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=0,c={GET_ELEMENT_BY_ID:function(t,e){return e="slick_"+l++,t.innerHTML='<a id="'+e+'"></a>',!!this.getElementById(e)},QUERY_SELECTOR:function(t){return t.innerHTML="_<style>:nth-child(2){}</style>",t.innerHTML='<a class="MiX"></a>',1===t.querySelectorAll(".MiX").length},EXPANDOS:function(t,e){return e="slick_"+l++,t._custom_property_=e,t._custom_property_===e},MATCHES_SELECTOR:function(t){t.className="MiX";var e=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector;if(e)try{e.call(t,":slick")}catch(n){return e.call(t,".MiX")?e:!1}return!1},GET_ELEMENTS_BY_CLASS_NAME:function(t){return t.innerHTML='<a class="f"></a><a class="b"></a>',1!==t.getElementsByClassName("b").length?!1:(t.firstChild.className="b",2!==t.getElementsByClassName("b").length?!1:(t.innerHTML='<a class="a"></a><a class="f b a"></a>',2!==t.getElementsByClassName("a").length?!1:!0))},GET_ATTRIBUTE:function(t){var e="fus ro dah";return t.innerHTML='<a class="'+e+'"></a>',t.firstChild.getAttribute("class")===e}},h=function(t){this.document=t;var e=this.root=t.documentElement;this.tested={},this.uniqueID=this.has("EXPANDOS")?s:a,this.getAttribute=this.has("GET_ATTRIBUTE")?function(t,e){return t.getAttribute(e)}:function(t,e){return t=t.getAttributeNode(e),t&&t.specified?t.value:null},this.hasAttribute=e.hasAttribute?function(t,e){return t.hasAttribute(e)}:function(t,e){return t=t.getAttributeNode(e),!(!t||!t.specified)},this.contains=t.contains&&e.contains?function(t,e){return t.contains(e)}:e.compareDocumentPosition?function(t,e){return t===e||!!(16&t.compareDocumentPosition(e))
}:function(t,e){do if(e===t)return!0;while(e=e.parentNode);return!1},this.sorter=e.compareDocumentPosition?function(t,e){return t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:t===e?0:1:0}:"sourceIndex"in e?function(t,e){return t.sourceIndex&&e.sourceIndex?t.sourceIndex-e.sourceIndex:0}:t.createRange?function(t,e){if(!t.ownerDocument||!e.ownerDocument)return 0;var n=t.ownerDocument.createRange(),i=e.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,0),i.setStart(e,0),i.setEnd(e,0),n.compareBoundaryPoints(Range.START_TO_END,i)}:null,this.failed={};var n=this.has("MATCHES_SELECTOR");n&&(this.matchesSelector=function(t,e){if(this.failed[e])return null;try{return n.call(t,e)}catch(i){return m.debug&&console.warn("matchesSelector failed on "+e),this.failed[e]=!0,null}}),this.has("QUERY_SELECTOR")&&(this.querySelectorAll=function(t,e){if(this.failed[e])return!0;var n,i,r,o,s;if(t!==this.document&&(o=e[0].combinator,i=t.getAttribute("id"),r=e,i||(s=t,i="__slick__",s.setAttribute("id",i)),e="#"+i+" "+r,(o.indexOf("~")>-1||o.indexOf("+")>-1)&&(t=t.parentNode,t||(n=!0))),!n)try{n=t.querySelectorAll(e.toString())}catch(a){m.debug&&console.warn("querySelectorAll failed on "+(r||e)),n=this.failed[r||e]=!0}return s&&s.removeAttribute("id"),n})};h.prototype.has=function(t){var e=this.tested,n=e[t];if(null!=n)return n;var i=this.root,r=this.document,o=r.createElement("div");o.setAttribute("style","display: none;"),i.appendChild(o);var s=c[t],a=!1;if(s)try{a=s.call(r,o)}catch(u){}return m.debug&&!a&&console.warn("document has no "+t),i.removeChild(o),e[t]=a};var f={" ":function(t,e,n){var i,r,o=!e.id,s=!e.tag,a=!e.classes;if(e.id&&t.getElementById&&this.has("GET_ELEMENT_BY_ID")&&(i=t.getElementById(e.id),i&&i.getAttribute("id")===e.id&&(r=[i],o=!0,"*"===e.tag&&(s=!0))),!r&&(e.classes&&t.getElementsByClassName&&this.has("GET_ELEMENTS_BY_CLASS_NAME")?(r=t.getElementsByClassName(e.classList),a=!0,"*"===e.tag&&(s=!0)):(r=t.getElementsByTagName(e.tag),"*"!==e.tag&&(s=!0)),!r||!r.length))return!1;for(var u=0;i=r[u++];)(s&&o&&a&&!e.attributes&&!e.pseudos||this.match(i,e,s,o,a))&&n(i);return!0},">":function(t,e,n){if(t=t.firstChild)do 1==t.nodeType&&this.match(t,e)&&n(t);while(t=t.nextSibling)},"+":function(t,e,n){for(;t=t.nextSibling;)if(1==t.nodeType){this.match(t,e)&&n(t);break}},"^":function(t,e,n){t=t.firstChild,t&&(1===t.nodeType?this.match(t,e)&&n(t):f["+"].call(this,t,e,n))},"~":function(t,e,n){for(;t=t.nextSibling;)1===t.nodeType&&this.match(t,e)&&n(t)},"++":function(t,e,n){f["+"].call(this,t,e,n),f["!+"].call(this,t,e,n)},"~~":function(t,e,n){f["~"].call(this,t,e,n),f["!~"].call(this,t,e,n)},"!":function(t,e,n){for(;t=t.parentNode;)t!==this.document&&this.match(t,e)&&n(t)},"!>":function(t,e,n){t=t.parentNode,t!==this.document&&this.match(t,e)&&n(t)},"!+":function(t,e,n){for(;t=t.previousSibling;)if(1==t.nodeType){this.match(t,e)&&n(t);break}},"!^":function(t,e,n){t=t.lastChild,t&&(1==t.nodeType?this.match(t,e)&&n(t):f["!+"].call(this,t,e,n))},"!~":function(t,e,n){for(;t=t.previousSibling;)1===t.nodeType&&this.match(t,e)&&n(t)}};h.prototype.search=function(t,e,i){t?!t.nodeType&&t.document&&(t=t.document):t=this.document;var r=n(e);if(!r||!r.length)throw new Error("invalid expression");i||(i=[]);var o,a=u(i)?function(t){i[i.length]=t}:function(t){i[i.length++]=t};if(r.length>1){o={};var l=a;a=function(t){var e=s(t);o[e]||(o[e]=!0,l(t))}}var c,h,p;t:for(var d=0;e=r[d++];)if(m.noQSA||!this.querySelectorAll||(h=this.querySelectorAll(t,e),h===!0))if(1===e.length)p=e[0],f[p.combinator].call(this,t,p,a);else{for(var _,g,v,y=[t],b=function(t){var e=s(t);v[e]||(v[e]=!0,g[g.length]=t)},w=0;p=e[w++];){g=[],v={};for(var x=0;_=y[x++];)f[p.combinator].call(this,_,p,b);if(!g.length)continue t;y=g}if(0===d)i=g;else for(var M=0;M<g.length;M++)a(g[M])}else if(h&&h.length)for(var w=0;c=h[w++];)c.nodeName>"@"&&a(c);return o&&i&&i.length>1&&this.sort(i),i},h.prototype.sort=function(t){return this.sorter?Array.prototype.sort.call(t,this.sorter):t};var p={empty:function(){return!(this&&1===this.nodeType||(this.innerText||this.textContent||"").length)},not:function(t){return!m.match(this,t)},contains:function(t){return(this.innerText||this.textContent||"").indexOf(t)>-1},"first-child":function(){for(var t=this;t=t.previousSibling;)if(1==t.nodeType)return!1;return!0},"last-child":function(){for(var t=this;t=t.nextSibling;)if(1==t.nodeType)return!1;return!0},"only-child":function(){for(var t=this;t=t.previousSibling;)if(1==t.nodeType)return!1;for(var e=this;e=e.nextSibling;)if(1==e.nodeType)return!1;return!0},"first-of-type":function(){for(var t=this,e=t.nodeName;t=t.previousSibling;)if(t.nodeName==e)return!1;return!0},"last-of-type":function(){for(var t=this,e=t.nodeName;t=t.nextSibling;)if(t.nodeName==e)return!1;return!0},"only-of-type":function(){for(var t=this,e=this.nodeName;t=t.previousSibling;)if(t.nodeName==e)return!1;for(var n=this;n=n.nextSibling;)if(n.nodeName==e)return!1;return!0},enabled:function(){return!this.disabled},disabled:function(){return this.disabled},checked:function(){return this.checked||this.selected},selected:function(){return this.selected},focus:function(){var t=this.ownerDocument;return t.activeElement===this&&(this.href||this.type||m.hasAttribute(this,"tabindex"))},root:function(){return this===this.ownerDocument.documentElement}};h.prototype.match=function(t,e,n,i,r){if(!m.noQSA&&this.matchesSelector){var o=this.matchesSelector(t,e);if(null!==o)return o}if(!n&&e.tag){var s=t.nodeName.toLowerCase();if("*"===e.tag){if("@">s)return!1}else if(s!=e.tag)return!1}if(!i&&e.id&&t.getAttribute("id")!==e.id)return!1;var a,u;if(!r&&e.classes){var l=this.getAttribute(t,"class");if(!l)return!1;for(u in e.classes)if(!RegExp("(^|\\s)"+e.classes[u]+"(\\s|$)").test(l))return!1}var c,h;if(e.attributes)for(a=0;u=e.attributes[a++];){var f=u.operator,d=u.escapedValue;if(c=u.name,h=u.value,f){var _=this.getAttribute(t,c);if(null==_)return!1;switch(f){case"^=":if(!RegExp("^"+d).test(_))return!1;break;case"$=":if(!RegExp(d+"$").test(_))return!1;break;case"~=":if(!RegExp("(^|\\s)"+d+"(\\s|$)").test(_))return!1;break;case"|=":if(!RegExp("^"+d+"(-|$)").test(_))return!1;break;case"=":if(_!==h)return!1;break;case"*=":if(-1===_.indexOf(h))return!1;break;default:return!1}}else if(!this.hasAttribute(t,c))return!1}if(e.pseudos)for(a=0;u=e.pseudos[a++];){if(c=u.name,h=u.value,p[c])return p[c].call(t,h);if(null!=h){if(this.getAttribute(t,c)!==h)return!1}else if(!this.hasAttribute(t,c))return!1}return!0},h.prototype.matches=function(t,e){var i=n(e);if(1===i.length&&1===i[0].length)return this.match(t,i[0][0]);if(!m.noQSA&&this.matchesSelector){var r=this.matchesSelector(t,i);if(null!==r)return r}for(var o,s=this.search(this.document,e,{length:0}),a=0;o=s[a++];)if(t===o)return!0;return!1};var d={},_=function(t){var e=t||document;if(e.ownerDocument?e=e.ownerDocument:e.document&&(e=e.document),9!==e.nodeType)throw new TypeError("invalid document");var n=s(e);return d[n]||(d[n]=new h(e))},m=function(t,e){return m.search(t,e)};m.search=function(t,e,n){return _(e).search(e,t,n)},m.find=function(t,e){return _(e).search(e,t)[0]||null},m.getAttribute=function(t,e){return _(t).getAttribute(t,e)},m.hasAttribute=function(t,e){return _(t).hasAttribute(t,e)},m.contains=function(t,e){return _(t).contains(t,e)},m.matches=function(t,e){return _(t).matches(t,e)},m.sort=function(t){return t&&t.length>1&&_(t[0]).sort(t),t},m.parse=n,e.exports=m},{"./parser":52}],51:[function(t,e){(function(n){"use strict";e.exports="document"in n?t("./finder"):{parse:t("./parser")}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./finder":50,"./parser":52}],52:[function(t,e){"use strict";var n=/([-.*+?^${}()|[\]\/\\])/g,i=/\\/g,r=function(t){return(t+"").replace(n,"\\$1")},o=function(t){return(t+"").replace(i,"")},s=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+r(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),a=function(t){this.combinator=t||" ",this.tag="*"};a.prototype.toString=function(){if(!this.raw){var t,e,n="";if(n+=this.tag||"*",this.id&&(n+="#"+this.id),this.classes&&(n+="."+this.classList.join(".")),this.attributes)for(t=0;e=this.attributes[t++];)n+="["+e.name+(e.operator?e.operator+'"'+e.value+'"':"")+"]";if(this.pseudos)for(t=0;e=this.pseudos[t++];)n+=":"+e.name,e.value&&(n+="("+e.value+")");this.raw=n}return this.raw};var u=function(){this.length=0};u.prototype.toString=function(){if(!this.raw){for(var t,e="",n=0;t=this[n++];)1!==n&&(e+=" ")," "!==t.combinator&&(e+=t.combinator+" "),e+=t;this.raw=e}return this.raw};var l=function(t,e,n,i,s,l,c,h,f,p,d,_,m,g,v,y){var b,w;if((e||!this.length)&&(b=this[this.length++]=new u,e))return"";if(b||(b=this[this.length-1]),(n||i||!b.length)&&(w=b[b.length++]=new a(n)),w||(w=b[b.length-1]),s)w.tag=o(s);else if(l)w.id=o(l);else if(c){var x=o(c),M=w.classes||(w.classes={});if(!M[x]){M[x]=r(c);var P=w.classList||(w.classList=[]);P.push(x),P.sort()}}else m?(y=y||v,(w.pseudos||(w.pseudos=[])).push({type:1==_.length?"class":"element",name:o(m),escapedName:r(m),value:y?o(y):null,escapedValue:y?r(y):null})):h&&(d=d?r(d):null,(w.attributes||(w.attributes=[])).push({operator:f,name:o(h),escapedName:r(h),value:d?o(d):null,escapedValue:d?r(d):null}));return""},c=function(t){this.length=0;for(var e,n=this,i=t;t;){if(e=t.replace(s,function(){return l.apply(n,arguments)}),e===t)throw new Error(i+" is an invalid expression");t=e}};c.prototype.toString=function(){if(!this.raw){for(var t,e=[],n=0;t=this[n++];)e.push(t);this.raw=e.join(", ")}return this.raw};var h={},f=function(t){return null==t?null:(t=(""+t).replace(/^\s+|\s+$/g,""),h[t]||(h[t]=new c(t)))};e.exports=f},{}],53:[function(t,e,n){(function(){var t=this,i=t._,r={},o=Array.prototype,s=Object.prototype,a=Function.prototype,u=o.push,l=o.slice,c=o.concat,h=s.toString,f=s.hasOwnProperty,p=o.forEach,d=o.map,_=o.reduce,m=o.reduceRight,g=o.filter,v=o.every,y=o.some,b=o.indexOf,w=o.lastIndexOf,x=Array.isArray,M=Object.keys,P=a.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=k),n._=k):t._=k,k.VERSION="1.6.0";var E=k.each=k.forEach=function(t,e,n){if(null==t)return t;if(p&&t.forEach===p)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(n,t[i],i,t)===r)return}else for(var s=k.keys(t),i=0,o=s.length;o>i;i++)if(e.call(n,t[s[i]],s[i],t)===r)return;return t};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(E(t,function(t,r,o){i.push(e.call(n,t,r,o))}),i)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),_&&t.reduce===_)return i&&(e=k.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(E(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError(S);return n},k.reduceRight=k.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return i&&(e=k.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=k.keys(t);o=s.length}if(E(t,function(a,u,l){u=s?s[--o]:--o,r?n=e.call(i,n,t[u],u,l):(n=t[u],r=!0)}),!r)throw new TypeError(S);return n},k.find=k.detect=function(t,e,n){var i;return L(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(E(t,function(t,r,o){e.call(n,t,r,o)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},k.every=k.all=function(t,e,n){e||(e=k.identity);var i=!0;return null==t?i:v&&t.every===v?t.every(e,n):(E(t,function(t,o,s){return(i=i&&e.call(n,t,o,s))?void 0:r}),!!i)};var L=k.some=k.any=function(t,e,n){e||(e=k.identity);var i=!1;return null==t?i:y&&t.some===y?t.some(e,n):(E(t,function(t,o,s){return i||(i=e.call(n,t,o,s))?r:void 0}),!!i)};k.contains=k.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):L(t,function(t){return t===e})},k.invoke=function(t,e){var n=l.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return E(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;a>r&&(i=t,r=a)}),i},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,r=1/0;return E(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;r>a&&(i=t,r=a)}),i},k.shuffle=function(t){var e,n=0,i=[];return E(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var C=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=C(e),k.pluck(k.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,i){var r={};return n=C(n),E(e,function(o,s){var a=n.call(i,o,s,e);t(r,a,o)}),r}};k.groupBy=T(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=T(function(t,e,n){t[e]=n}),k.countBy=T(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){n=C(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},k.toArray=function(t){return t?k.isArray(t)?l.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:l.call(t,0,e)},k.initial=function(t,e,n){return l.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var A=function(t,e,n){return e&&k.every(t,k.isArray)?c.apply(n,t):(E(t,function(t){k.isArray(t)||k.isArguments(t)?e?u.apply(n,t):A(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return A(t,e,[])},k.without=function(t){return k.difference(t,l.call(arguments,1))},k.partition=function(t,e){var n=[],i=[];return E(t,function(t){(e(t)?n:i).push(t)}),[n,i]},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var r=n?k.map(t,n,i):t,o=[],s=[];return E(r,function(n,i){(e?i&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(t[i]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=l.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=c.apply(o,l.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(w&&t.lastIndexOf===w)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o};var D=function(){};k.bind=function(t,e){var n,i;if(P&&t.bind===P)return P.apply(t,l.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=l.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(l.call(arguments)));D.prototype=t.prototype;var r=new D;D.prototype=null;var o=t.apply(r,n.concat(l.call(arguments)));return Object(o)===o?o:r}},k.partial=function(t){var e=l.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,o=i.length;o>r;r++)i[r]===k&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},k.bindAll=function(t){var e=l.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return E(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(l.call(arguments,1)))},k.throttle=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:k.now(),s=null,o=t.apply(i,r),i=r=null};return function(){var l=k.now();a||n.leading!==!1||(a=l);var c=e-(l-a);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,a=l,o=t.apply(i,r),i=r=null):s||n.trailing===!1||(s=setTimeout(u,c)),o}},k.debounce=function(t,e,n){var i,r,o,s,a,u=function(){var l=k.now()-s;e>l?i=setTimeout(u,e-l):(i=null,n||(a=t.apply(o,r),o=r=null))};return function(){o=this,r=arguments,s=k.now();var l=n&&!i;return i||(i=setTimeout(u,e)),l&&(a=t.apply(o,r),o=r=null),a}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(M)return M(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return E(l.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=c.apply(o,l.call(arguments,1));return E(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=c.apply(o,l.call(arguments,1));for(var i in t)k.contains(n,i)||(e[i]=t[i]);return e},k.defaults=function(t){return E(l.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var j=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=h.call(t);if(r!=h.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var u=0,l=!0;if("[object Array]"==r){if(u=t.length,l=u==e.length)for(;u--&&(l=j(t[u],e[u],n,i)););}else{for(var c in t)if(k.has(t,c)&&(u++,!(l=k.has(e,c)&&j(t[c],e[c],n,i))))break;if(l){for(c in e)if(k.has(e,c)&&!u--)break;l=!u}}return n.pop(),i.pop(),l};k.isEqual=function(t,e){return j(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=x||function(t){return"[object Array]"==h.call(t)},k.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return f.call(t,e)},k.noConflict=function(){return t._=i,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=k.invert(O.escape);var N={escape:new RegExp("["+k.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(O.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return O[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){E(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),F.call(this,n.apply(k,t))}})};var R=0;k.uniqueId=function(t){var e=++R+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||U).source,(n.interpolate||U).source,(n.evaluate||U).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(B,function(t){return"\\"+I[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,k);var u=function(t){return i.call(this,t,k)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},k.chain=function(t){return k(t).chain()};var F=function(t){return this._chain?k(t).chain():t};k.mixin(k),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],F.call(this,n)}}),E(["concat","join","slice"],function(t){var e=o[t];k.prototype[t]=function(){return F.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this)},{}],54:[function(t){"use strict";var e=t("domready"),n=t("./dgua"),i=t("slick");e(function(){if(i.find("#dgu-analytics")){var t=new n.Application("#dgu-analytics");t.init()}})},{"./dgua":55,domready:47,slick:51}],55:[function(t,e){"use strict";e.exports={Application:t("./dgua/application")}},{"./dgua/application":56}],56:[function(t,e){"use strict";var n=t("./components"),i=t("./data"),r=t("./util/bind"),o=t("underscore"),s=t("slick"),a=function(t){this._selector=t,this._messageHandlers={}};a.prototype={nToDisplay:5,init:function(){this._element=s.find(this._selector);var t=this._element.dataset,e={datasetsFilename:t.dguaDatasetsFilename,publishersFilename:t.dguaPublishersFilename,mappingFilename:t.dguaMappingFilename,statsFilename:t.dguaStatsFilename,countriesFilename:t.dguaCountriesFilename,referrersFilename:t.dguaReferrersFilename};i.Repository.loadDataSources(e,r(this,function(t){var e=new n.Dashboard(this,t),i=new n.Countries(this,t),o=new n.PublishersDatasets(this,t),s=new n.Social(this,t),a=new n.Platforms(this,t),u=new n.TabbedNavigation(this,[["Overview",r(e,e.render)],["Datasets",r(o,o.render)],["Countries",r(i,i.render)],["Platforms",r(a,a.render)],["Social",r(s,s.render)]]);u.render(this._selector),this.registerMessageHandler("switchTab",function(t){u.select(t)})}))},registerMessageHandler:function(t,e){this._messageHandlers[t]||(this._messageHandlers[t]=[]),this._messageHandlers[t].push(e)},sendMessage:function(){var t=Array.prototype.slice.apply(arguments),e=t.shift();this._messageHandlers[e]&&this._messageHandlers[e].forEach(function(e){e.apply(null,t)})},_topN:function(t){return o.first(t,this._nToDisplay)}},e.exports=a},{"./components":57,"./data":82,"./util/bind":92,slick:51,underscore:53}],57:[function(t,e){"use strict";e.exports={PublishersDatasets:t("./components/publishers_datasets"),PublishersColumn:t("./components/publishers_column"),VisitableList:t("./components/visitable_list"),VisitablePie:t("./components/visitable_pie"),Countries:t("./components/countries"),GroupPie:t("./components/group_pie"),SeriesLine:t("./components/series_line"),PercentagePullQuote:t("./components/percentage_pull_quote"),TabbedNavigation:t("./components/tabbed_navigation"),Social:t("./components/social"),Platforms:t("./components/platforms"),Dashboard:t("./components/dashboard")}},{"./components/countries":58,"./components/dashboard":60,"./components/group_pie":63,"./components/percentage_pull_quote":68,"./components/platforms":69,"./components/publishers_column":71,"./components/publishers_datasets":72,"./components/series_line":73,"./components/social":74,"./components/tabbed_navigation":77,"./components/visitable_list":79,"./components/visitable_pie":80}],58:[function(t,e){"use strict";var n=t("../util/render"),i=t("./world_map"),r=t("./group_pie"),o=t("./series_line"),s=t("../util/color_key"),a=t("./percentage_pull_quote"),u=t("./country_summary"),l=t("../util/colors"),c=t("../util/bind"),h=t("dom-style"),f=t("slick"),p=t("ampersand-dom"),d=t("dom-events"),_=function(t,e){this._app=t,this._repo=e,this._app.registerMessageHandler("countrySelected",c(this,this._onCountrySelected))};_.prototype={_template:'<div class="card">\n  <div class="back_button">\n  </div>\n  <div class="pure-g home_away">\n    <div class="pure-u-1-3 pure-u-md-1-3 uk_outline">\n      <img src="img/uk.gif" alt="The United Kingdom" />\n    </div>\n    <div class="pure-u-2-3 pure-u-md-2-3 home_away_stats">\n      <div class="pure-g">\n        <div class="pure-u-1-3 pure-u-md-1-3 home_away_pullquote_container">\n        </div>\n        \n        <div class="pure-u-2-3 pure-u-md-2-3 home_away_timeline_container">\n        </div>\n      </div>\n      <div class="home_away_pie_container">\n      </div>\n    </div>\n  </div>\n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1 world_map">\n      <div class="world_map_container">\n      </div>\n    </div>\n  </div>\n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1 country_details">\n      <div class="country_summary_container">\n      </div>\n    </div>\n  </div>\n</div>\n',_worldMapSelector:".world_map_container",_homeAwayPieSelector:".home_away_pie_container",_homeAwayTimelineSelector:".home_away_timeline_container",_homeAwayPullquoteSelector:".home_away_pullquote_container",_homeAwaySectionSelector:".home_away",_countrySummarySelector:".country_summary_container",_backButtonSelector:".back_button",render:function(t){this._selector=t,n.toSelector(this._template,t);var e=this._repo.getStatistic("Country"),u=new i(this._app,this._repo,e),c=e.oneVsAll("United Kingdom"),h=new s(c.keys(),[l.complement,l.neutral]);c=c.map(function(t,e){return h.withColor(t,e)});var f=new o(this._app,c.series("United Kingdom")),p=new r(c,{rotation:1*Math.PI}),d=c.last().proportionally().series()[0].value(),_=new a(d,"of visits come from the UK");u.render(t+" "+this._worldMapSelector),_.render(t+" "+this._homeAwayPullquoteSelector),p.render(t+" "+this._homeAwayPieSelector),f.render(t+" "+this._homeAwayTimelineSelector)},_onCountrySelected:function(t,e){t?(this._hideHomeAwaySection(),this._showBackButton(),this._showCountrySection(t,e)):(this._hideCountrySection(),this._hideBackButton(),this._showHomeAwaySection())},_hideHomeAwaySection:function(){var t=f.find(this._homeAwaySectionSelector);this._homeAwaySectionHeight=t.offsetHeight,h(t,{position:"relative",height:this._homeAwaySectionHeight+"px",transition:"height 500ms, opacity 500ms"}),window.setTimeout(function(){h(t,{height:"0px",opacity:0})},50)},_showHomeAwaySection:function(){var t=f.find(this._homeAwaySectionSelector);window.setTimeout(c(this,function(){h(t,{height:this._homeAwaySectionHeight+"px",opacity:"1.0"})},50))},_showCountrySection:function(t){var e=this._repo.getStatistic("Country").oneVsAll(t),n=new u(this._app,t,e);n.render(this._selector+" "+this._countrySummarySelector)},_hideCountrySection:function(){var t=f.find(this._countrySummarySelector);p.text(t,"")},_showBackButton:function(){var t=f.find(this._backButtonSelector),e=document.createElement("a");p.text(e,"« Back"),p.setAttribute(e,"href","#"),d.on(e,"click",c(this,function(t){t.preventDefault(),this._app.sendMessage("countrySelected",null)})),t.appendChild(e)},_hideBackButton:function(){var t=f.find(this._backButtonSelector);p.text(t,"")}},e.exports=_},{"../util/bind":92,"../util/color_key":93,"../util/colors":94,"../util/render":97,"./country_summary":59,"./group_pie":63,"./percentage_pull_quote":68,"./series_line":73,"./world_map":81,"ampersand-dom":1,"dom-events":39,"dom-style":43,slick:51}],59:[function(t,e){"use strict";var n=t("../util/render"),i=t("./group_pie"),r=t("./series_line"),o=t("./percentage_pull_quote"),s=t("../util/color_key"),a=t("../util/colors"),u=t("../util/bind"),l=function(t,e,n){this._app=t,this._name=e,this._statistics=n};l.prototype={_template:'<div class="country_summary">\n  <div class="pure-g">\n    <div class="pure-u-1-4 pure-u-md-1-4">\n      <div class="pie_chart">\n      </div>\n    </div>\n    <div class="pure-u-3-4 pure-u-md-3-4">\n      <h2 class="country_name">{{name}}</h2>\n      <div class="pure-g">\n        <div class="pure-u-1-4 pure-u-md-1-4">\n          <div class="pull_quote">\n          </div>\n        </div>\n        <div class="pure-u-3-4 pure-u-md-3-4">\n          <div class="time_series">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n',_timeSeriesSelector:".time_series",_pieChartSelector:".pie_chart",_pullQuoteSelector:".pull_quote",render:function(t){n.toSelector(this._template,t,{name:this._name});
var e=new s(this._statistics.keys(),[a.base,a.neutral]),l=this._statistics.map(u(e,e.withColor)),c=l.last().map(u(e,e.withColor)),h=l.series(this._name),f=new r(this._app,h),p=new i(c),d=c.proportionally().series()[0].value(),_=new o(d,"of all visits");f.render(t+" "+this._timeSeriesSelector),_.render(t+" "+this._pullQuoteSelector),p.render(t+" "+this._pieChartSelector)}},e.exports=l},{"../util/bind":92,"../util/color_key":93,"../util/colors":94,"../util/render":97,"./group_pie":63,"./percentage_pull_quote":68,"./series_line":73}],60:[function(t,e){"use strict";var n=t("../util/render"),i=t("../util/bind"),r=t("slick"),o=t("dom-events"),s=t("underscore"),a=t("./visitable_list"),u=t("./world_map"),l=t("../util/with_visit_proportions"),c=t("./platforms"),h=t("./group_pie"),f=t("../util/colors"),p=t("../util/color_key"),d=t("./group_key_with_percentage"),_=t("./group_histogram"),m=t("dom-style"),g=function(t,e){this._app=t,this._repo=e};g.prototype={_template:'<div class="dashboard">\n  <div class="pure-g row row-1">\n    <div class="pure-u-1-2 pure-u-md-1-2">\n      <div class="card">\n        <h2>Datasets</h2>\n        <h3>Most popular:</h3>\n        <div class="datasets_container">\n\n        </div>\n        <div class="link">\n          <a href="#" class="datasets_link">Datasets &raquo;</a>\n        </div>\n      </div>\n    </div>\n    <div class="pure-u-1-2 pure-u-md-1-2">\n      <div class="card">\n        <h2>Countries</h2>\n        <div class="countries_container">\n\n        </div>\n        <div class="link">\n          <a href="#" class="countries_link">Countries &raquo;</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="pure-g row row-2">\n    <div class="pure-u-1-2 pure-u-md-1-2">\n      <div class="card">\n        <h2>Platforms</h2>\n        <div class="platforms_chart_container">\n\n        </div>\n        <div class="platforms_key_container">\n\n        </div>\n        <div class="link">\n          <a href="#" class="platforms_link">Platforms &raquo;</a>\n        </div>\n      </div>\n    </div>\n    <div class="pure-u-1-2 pure-u-md-1-2">\n      <div class="card">\n        <h2>Social</h2>\n        <h3>Top traffic sources:</h3>\n        <div class="social_chart_container">\n\n        </div>\n        <div class="social_key_container">\n\n        </div>\n        <div class="link">\n          <a href="#" class="social_link">Social &raquo;</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',render:function(t){n.toSelector(this._template,t),this._selector=t,this._element=r.find(t),this._setupLinks(),this._setupGraphics(),this._normaliseHeights()},_setupLinks:function(){o.on(r.find(".datasets_link",this._element),"click",i(this,function(t){t.preventDefault(),this._app.sendMessage("switchTab","Datasets")})),o.on(r.find(".countries_link",this._element),"click",i(this,function(t){t.preventDefault(),this._app.sendMessage("switchTab","Countries")})),o.on(r.find(".platforms_link",this._element),"click",i(this,function(t){t.preventDefault(),this._app.sendMessage("switchTab","Platforms")})),o.on(r.find(".social_link",this._element),"click",i(this,function(t){t.preventDefault(),this._app.sendMessage("switchTab","Social")}))},_setupGraphics:function(){var t=l(s.first(this._repo.getDatasetsByVisits(),3),this._repo.getTotalDatasetVisits()),e=new a(this._app,t,{color:!1});e.render(this._selector+"  .datasets_container");var n=this._repo.getStatistic("Country"),i=new u(this._app,this._repo,n,{withoutUK:!1});i.render(this._selector+" .countries_container");var r=this._repo.getStatistic("Operating Systems").partition(c.mobile,"Mobile","Desktop"),o=new p(r.keys(),[f[5],f[4]]);r=r.map(function(t,e){return o.withColor(t,e)});var m=new h(r);m.render(this._selector+" .platforms_chart_container");var g=new d(r);g.render(this._selector+" .platforms_key_container");var v=this._repo.getStatistic("Social sources").proportionally().topN(4,!0),y=new p(v.keys(),f);v=v.map(function(t,e){return y.withColor(t,e)});var b=new _(v);b.render(this._selector+" .social_chart_container");var w=new d(v);w.render(this._selector+" .social_key_container")},_normaliseHeights:function(){s.each(r.search(".row"),function(t){var e=r.search(".card",t),n=s.max(s.map(e,function(t){return t.offsetHeight}));s.each(e,function(t){m(t,{height:n+"px"})})})}},e.exports=g},{"../util/bind":92,"../util/color_key":93,"../util/colors":94,"../util/render":97,"../util/with_visit_proportions":99,"./group_histogram":61,"./group_key_with_percentage":62,"./group_pie":63,"./platforms":69,"./visitable_list":79,"./world_map":81,"dom-events":39,"dom-style":43,slick:51,underscore:53}],61:[function(t,e){"use strict";var n=t("slick"),i=t("d3-browserify"),r=t("ampersand-dom"),o=t("../util/bind"),s=function(t){this._statistics=t,this._yScale=i.scale.linear().domain([0,t.max().value()])};s.prototype={_scale:.56,_margin:4,render:function(t){this._element=n.find(t);var e=this._element.offsetWidth,s=this._scale*e;r.setAttribute(this._element,"style","height:"+s+"px;"),this._yScale=this._yScale.range([0,s]);var a=i.select(this._element).append("svg").attr("width",e).attr("height",s).append("g"),u=e/this._statistics.size()-this._margin,l=a.selectAll(".bar").data(this._statistics.series()).enter().append("g").attr("transform",o(this,function(t,e){return"translate("+e*(u+this._margin)+",0)"}));l.append("rect").attr("y",o(this,function(t){return s-this._yScale(t.value())})).attr("height",o(this,function(t){return this._yScale(t.value())})).attr("width",u).attr("fill",function(t){return t.color()})}},e.exports=s},{"../util/bind":92,"ampersand-dom":1,"d3-browserify":38,slick:51}],62:[function(t,e){"use strict";var n=t("underscore"),i=t("../util/render"),r=t("../util/bind"),o=function(t,e){e||(e={}),this._legendCallback=e.legend,this._linkCallback=e.link,this._statistics=t,this._rowHeight=e.rowHeight,this._rowMargin=e.rowMargin,this._chip=void 0===e.chip?!0:e.chip};o.prototype={_template:'<div class="group_key_with_percentage">\n  <table>\n    {{#series}}\n      \n    <tr class="series {{className}}">\n        {{#color}}\n          <td class="chip" style="background-color: {{color}}"></td>\n        {{/color}}\n        <td class="name"\n          {{#rowHeight}} \n          style="line-height: {{rowHeight}}px; margin:0 0 {{rowMargin}}px 0; padding: 0;"\n          {{/rowHeight}}\n        >\n          {{#url}}\n            <a href="{{url}}">{{name}}</a>\n          {{/url}}\n          {{^url}}\n            {{name}}\n          {{/url}}\n        </td>\n        <td class="percentage"\n          {{#rowHeight}} \n          style="line-height: {{rowHeight}}px; margin:0 0 {{rowMargin}}px 0; padding: 0;"\n          {{/rowHeight}}\n        >{{percentage}}</td>\n      </tr>\n    {{/series}}\n  </table>\n</div>\n',render:function(t){i.toSelector(this._template,t,this._templateParams())},_templateParams:function(){return{series:this._formattedSeries()}},_formattedSeries:function(){var t=this._statistics.last().proportionally(),e=n.map(t.keys(),function(e){return[e,t.series(e)]});return n.map(e,r(this,this._formatSeries))},_formatSeries:function(t){var e=this._statistics.series(t[0]);return{name:this._legendCallback?this._legendCallback(t[0]):t[0],url:this._linkCallback?this._linkCallback(t[0]):void 0,color:this._chip&&e.color&&e.color(),className:e.color&&this._chip?"with_chip":"",percentage:this._formatPercentage(t[1].value()),rowHeight:this._rowHeight,rowMargin:this._rowMargin}},_formatPercentage:function(t){return(100*t).toFixed(2)+"%"}},e.exports=o},{"../util/bind":92,"../util/render":97,underscore:53}],63:[function(t,e){"use strict";var n=t("slick"),i=t("d3-browserify"),r=t("ampersand-dom"),o=t("../util/colors"),s=function(t,e){e||(e={}),this._group=t,this._rotation=e.rotation||0};s.prototype={_scale:.8,_backgroundColor:"#fff",render:function(t){this._element=n.find(t);var e=this._element.offsetWidth;r.setAttribute(this._element,"style","height:"+this._scale*e+"px;"),this._radius=e/2;var s=i.select(this._element).append("svg").attr("width",e).attr("height",e).append("g").attr("transform","translate("+e/2+","+this._scale*e/2+") scale("+this._scale+")");this._layout=i.layout.pie().startAngle(this._rotation).endAngle(2*Math.PI+this._rotation).sort(null).value(function(t){return t.value()}),this._arc=i.svg.arc().outerRadius(this._radius).innerRadius(0),this._slice=s.datum(this._group.series()).selectAll("path").data(this._layout).enter().append("path").style("fill",function(t){return t.data.color?t.data.color():o.neutral}).style("stroke",this._backgroundColor).style("stroke-width",1).attr("d",this._arc)}},e.exports=s},{"../util/colors":94,"ampersand-dom":1,"d3-browserify":38,slick:51}],64:[function(t,e){"use strict";var n=t("d3-browserify"),i=t("slick"),r=t("ampersand-dom"),o=t("../util/colors"),s=t("../util/bind"),a=t("../util/render"),u=t("./group_key_with_percentage"),l=function(t,e){e||(e={}),this._statistics=t,this._xScale=n.scale.linear().domain([0,t.max().value()]),this._rtl=e.rtl,this._labels=e.labels};l.prototype={_scale:.56,_margin:4,_template:'<div class="horizontal_histogram pure-g">\n  {{#labels_left}}\n  <div class="pure-u-1-2 pure-u-md-1-2">\n    <div class="labels left">\n    </div>\n  </div>\n  {{/labels_left}}\n  <div class="chart {{chart_pure_class}}">\n  </div>\n  {{#labels_right}}\n  <div class="pure-u-1-2 pure-u-md-1-2">\n    <div class="labels right">\n    </div>\n  </div>\n  {{/labels_right}}\n</div>\n',render:function(t){this._selector=t,a.toSelector(this._template,t,this.params()),this._chartElement=i.find(t+" .chart"),this._width=this._chartElement.offsetWidth,this._height=this._scale*this._width,r.setAttribute(this._chartElement,"style","height:"+this._height+"px;"),this.xScale=this._xScale.range([0,this._width]),this._renderBars(),this._labels&&this._renderLabels()},_renderBars:function(){var t=n.select(this._chartElement).append("svg").attr("width",this._width).attr("height",this._height).append("g"),e=this._height/this._statistics.size()-this._margin,i=t.selectAll(".bar").data(this._statistics.series()).enter().append("g").attr("transform",s(this,function(t,n){var i=this._rtl?this._width-this._xScale(t.value()):0,r=n*(e+this._margin);return"translate("+i+", "+r+")"}));i.append("rect").attr("height",e).attr("width",s(this,function(t){return this._xScale(t.value())})).attr("fill",function(t){return t.color?t.color():o.neutral})},_renderLabels:function(){var t=this._height/this._statistics.size(),e=new u(this._statistics,{chip:!1,rowHeight:t,rowMargin:this._margin});e.render(this._selector+" .labels")},params:function(){return{labels_left:this._labels&&!this._rtl,labels_right:this._labels&&this._rtl,chart_pure_class:this._labels?"pure-u-1-2 pure-u-md-1-2":"pure-u-1 pure-u-md-1"}}},e.exports=l},{"../util/bind":92,"../util/colors":94,"../util/render":97,"./group_key_with_percentage":62,"ampersand-dom":1,"d3-browserify":38,slick:51}],65:[function(t,e){"use strict";var n=t("d3-browserify"),i=t("slick"),r=t("dom-style"),o=t("underscore"),s=function(t,e,n){n||(n={}),this._vis=t,this._contentComponent=e,this._width=n.width||"25%"};s.prototype={render:function(t,e,s){o.each(i.search(".hover"),function(t){t.remove()}),n.select(t).append("div").attr("class","hover"),this._element=i.find(".hover"),r(this._element,{top:s+"px",width:this._width});var a=window.innerWidth;a/2>e?r(this._element,{left:e+"px"}):r(this._element,{right:a-e+"px"}),this._contentComponent.render(t+" .hover")},destroy:function(){this._element.remove()}},e.exports=s},{"d3-browserify":38,"dom-style":43,slick:51,underscore:53}],66:[function(t,e){"use strict";var n=t("../util/bind"),i=t("../util/render"),r=t("./group_key_with_percentage"),o=t("../util/color_key"),s=t("../util/colors"),a=t("./group_histogram"),u=function(t,e,n){this._app=t,this._repo=e;var i=new o(n.keys(),s);this._statistics=n.map(function(t,e){return i.withColor(t,e)})};u.prototype={_template:'<div class="card">\n  <h2>Most shared datasets</h2>\n  <div class="pure-g">\n    <div class="pure-u-2-3 pure-u-md-2-3 key_container">\n    </div>\n    <div class="pure-u-1-3 pure-u-md-1-3 hist_container">\n    </div>\n  </div>\n</div>\n',_keySelector:".key_container",_histSelector:".hist_container",render:function(t){i.toSelector(this._template,t);var e=new r(this._statistics,{link:n(this,function(t){return this._repo.getDatasetById(t).url()}),legend:n(this,function(t){return this._repo.getDatasetById(t).title()})});e.render(t+" "+this._keySelector);var o=new a(this._statistics);o.render(t+" "+this._histSelector)}},e.exports=u},{"../util/bind":92,"../util/color_key":93,"../util/colors":94,"../util/render":97,"./group_histogram":61,"./group_key_with_percentage":62}],67:[function(t,e){"use strict";var n=t("../util/render"),i=function(t,e,n){this._value=t,this._text=e,this._preText=n};i.prototype={_template:'<div class="number_pull_quote">\n  {{#pre_text}}\n    <div class="pre_text">{{pre_text}}</div>\n  {{/pre_text}}\n  <div class="figure n">{{number}}</div>\n  <div class="text">{{text}}</div>\n</div>\n',render:function(t){n.toSelector(this._template,t,{pre_text:this._preText,number:this._value.toLocaleString(),text:this._text})}},e.exports=i},{"../util/render":97}],68:[function(t,e){"use strict";var n=t("../util/render"),i=function(t,e){this._value=t,this._text=e};i.prototype={_template:'<div class="percentage_pull_quote">\n  <div class="figure"><span class="n">{{percentage}}</span>%</div>\n  <div class="text">{{text}}</div>\n</div>\n',render:function(t){n.toSelector(this._template,t,{percentage:(100*this._value).toFixed(2),text:this._text})}},e.exports=i},{"../util/render":97}],69:[function(t,e){"use strict";var n=t("../util/render"),i=t("../util/colors"),r=t("../util/color_key"),o=t("../util/decorate_with"),s=t("./proportional_series_area"),a=t("./percentage_pull_quote"),u=t("ampersand-dom"),l=t("slick"),c=t("../util/bind"),h=t("./horizontal_histogram"),f=function(t,e){this._application=t,this._repo=e,this._application.registerMessageHandler("statisticHighlighted",c(this,this._renderSections))};f.mobile=["Android","BlackBerry","Chrome OS","SymbianOS","Windows Phone","iOS","Nokia","Firefox OS","Series40","Samsung"],f.desktopBrowsers=["Chrome","Firefox","IE with Chrome Frame","Internet Explorer","Mozilla Compatible Agent","Opera","Safari","Safari (in-app)","SeaMonkey","Camino","Playstation 3","Mozilla","Maxthon","YaBrowser","(not set)","Konqueror","Links","SiteCon Browser","Iron"],f.prototype={_template:'<div class="card platforms">\n  <div class="pure-g">\n    <div class="pure-u-1-3 pure-u-md-1-6 computers_icon_container">\n      <div class="icon">\n        <img src="img/computer.png" alt="Computers" />\n      </div>\n    </div>\n    <div class="pure-u-2-3 pure-u-md-5-6 computers_data_container">\n      <h2>Computers</h2>\n      <div class="pure-g">\n        <div class="pure-u-1-2 pure-u-md-1-2 computers_browsers_histogram_container">\n\n        </div>\n        <div class="pure-u-1-2 pure-u-md-1-2">\n          <div class="computers_quote_container">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1">\n      <div class="timeseries_container">\n\n      </div>\n    </div>\n  </div>\n  <div class="pure-g">\n    <div class="pure-u-2-3 pure-u-md-5-6 mobile_data_container">\n      <h2>Phones and Tablets</h2>\n      <div class="pure-g">\n        <div class="pure-u-1-2 pure-u-md-1-2 mobile_quote_container">\n        </div>\n        <div class="pure-u-1-2 pure-u-md-1-2 mobile_histogram_container">\n        </div>\n      </div>\n    </div>\n    <div class="pure-u-1-3 pure-u-md-1-6 mobile_icon_container">\n      <div class="icon right">\n        <img src="img/tablet.png" alt="Phones and Tablets"/>\n      </div>\n    </div>\n  </div>\n  <div class="attribution">Icons designed by and &copy; <a href="http://thenounproject.com/bluevurt/">Patrick Morrison</a>. Used under the terms of the Creative Commons <a href="http://creativecommons.org/licenses/by/3.0/us/">CC-BY 3.0</a> licence.\n</div>\n',_lineSelector:".timeseries_container",_computersQuoteSelector:".computers_quote_container",_mobileQuoteSelector:".mobile_quote_container",_computersBrowsersHistSelector:".computers_browsers_histogram_container",_mobileHistSelector:".mobile_histogram_container",_aspect:.375,render:function(t){this._selector=t,n.toSelector(this._template,t);var e=this._repo.getStatistic("Totals").series("Total visits"),r=this._repo.getStatistic("Operating Systems").merge(f.mobile).asProportionOfSeries(e);r=o(r,{color:function(){return i[4]}});var a=new s(this._application,r,{aspect:this._aspect,complementColor:i[5],notHighlightedColor:i.neutral});a.render(t+" "+this._lineSelector),this._defaultStat=r.last(),this._renderSections()},_renderSections:function(t){if(l.find(this._selector+" "+this._computersQuoteSelector)){t||(t=this._defaultStat),u.text(l.find(this._selector+" "+this._computersQuoteSelector),"");var e=new a(t.map(function(t){return 1-t}).value());e.render(this._selector+" "+this._computersQuoteSelector),u.text(l.find(this._selector+" "+this._mobileQuoteSelector),"");var n=new a(t.value());n.render(this._selector+" "+this._mobileQuoteSelector),u.text(l.find(this._selector+" "+this._computersBrowsersHistSelector),"");var o=this._repo.getStatistic("Browsers").filter(f.desktopBrowsers).at(t.time()).topN(4,!0),s=new r(o.keys(),i);o=o.map(function(t,e){return s.withColor(t,e)});var c=new h(o,{labels:!0});c.render(this._selector+" "+this._computersBrowsersHistSelector),u.text(l.find(this._selector+" "+this._mobileHistSelector),"");var p=this._repo.getStatistic("Operating Systems").filter(f.mobile).at(t.time()).topN(4,!0),d=new r(p.keys(),i);p=p.map(function(t,e){return d.withColor(t,e)});var _=new h(p,{labels:!0,rtl:!0});_.render(this._selector+" "+this._mobileHistSelector)}}},e.exports=f},{"../util/bind":92,"../util/color_key":93,"../util/colors":94,"../util/decorate_with":95,"../util/render":97,"./horizontal_histogram":64,"./percentage_pull_quote":68,"./proportional_series_area":70,"ampersand-dom":1,slick:51}],70:[function(t,e){"use strict";var n=t("slick"),i=t("d3-browserify"),r=t("ampersand-dom"),o=t("../util/bind"),s=function(t,e,n){n||(n={}),this._app=t,this._series=e,this._aspect=n.aspect||.1,this._complementColor=n.complementColor,this._notHighlightedColor=n.notHighlightedColor};s.prototype={_vMargin:16,_hMargin:32,render:function(t){this._element=n.find(t);var e=this._element.offsetWidth;this._width=e-2*this._hMargin,this._height=this._aspect*e-2*this._vMargin,r.setAttribute(this._element,"style","height:"+this._aspect*e+"px;"),this._x=i.scale.ordinal().domain(this._series.times()).rangeRoundBands([0,this._width],.1),this._axisX=i.time.scale().range([0,this._width]).domain([this._series.startTime(),this._series.endTime()]),this._y=i.scale.linear().range([0,this._height]).domain([0,1]),this._axisY=i.scale.linear().range([0,this._height]).domain([1,0]),this._svg=i.select(this._element).append("svg").attr("width",this._width+2*this._hMargin).attr("height",this._height+2*this._vMargin).append("g").attr("transform","translate("+this._hMargin+","+this._vMargin+")"),this._container=this._svg.append("g"),this._renderAxes(),this._renderChunks()},_renderAxes:function(){var t=i.svg.axis().scale(this._axisX).tickSize(4),e=i.svg.axis().scale(this._axisY).ticks(5).orient("left").tickFormat(i.format(".0%"));this._svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this._height+")").call(t),this._svg.append("g").attr("class","y axis").call(e)},_renderChunks:function(){this._svg.selectAll(".datum").data(this._series.statistics()).enter().append("g").attr("transform",o(this,function(t){return"translate("+this._x(t.time())+",0)"})).attr("class","bar").call(o(this,function(t){this._seriesRect=t.append("rect").attr("x",0).attr("width",this._x.rangeBand()).attr("height",o(this,function(t){return this._y(t.value())})).attr("y",o(this,function(t){return this._height-this._y(t.value())})).attr("fill",this._series.color()).on("mouseover",o(this,this._onMouseOver)).on("mouseout",o(this,this._onMouseOut)),this._complementRect=t.append("rect").attr("x",0).attr("width",this._x.rangeBand()).attr("height",o(this,function(t){return this._height-this._y(t.value())-3})).attr("y",0).attr("fill",this._complementColor).on("mouseover",o(this,this._onMouseOver)).on("mouseout",o(this,this._onMouseOut))}))},_onMouseOver:function(t){this._mouseOutDebounce=!1,this._seriesRect.attr("fill",o(this,function(e){return e.period()==t.period()?this._series.color():this._notHighlightedColor})),this._complementRect.attr("fill",o(this,function(e){return e.period()==t.period()?this._complementColor:this._notHighlightedColor})),this._app.sendMessage("statisticHighlighted",t)},_onMouseOut:function(){this._mouseOutDebounce=!0,window.setTimeout(o(this,function(){this._mouseOutDebounce&&(this._seriesRect.attr("fill",this._series.color()),this._complementRect.attr("fill",this._complementColor),this._app.sendMessage("statisticHighlighted",null)),this._mouseOutDebounce=!1}),50)}},e.exports=s},{"../util/bind":92,"ampersand-dom":1,"d3-browserify":38,slick:51}],71:[function(t,e){"use strict";var n=t("../util/render"),i=function(t,e,n){this._app=t,this._pieChart=e,this._list=n};i.prototype={_template:'<div class="pie_container">\n</div>\n<div class="list_container">\n</div>\n',_pieChartSelector:".pie_container",_listSelector:".list_container",render:function(t){n.toSelector(this._template,t),this._pieChart.render(t+" "+this._pieChartSelector),this._list.render(t+" "+this._listSelector)}},e.exports=i},{"../util/render":97}],72:[function(t,e){"use strict";var n=t("../util/render"),i=t("underscore"),r=t("ampersand-dom"),o=t("dom-style"),s=t("slick"),a=t("../util/bind"),u=t("dom-events"),l=t("../components/visitable_list"),c=t("../components/visitable_pie"),h=t("../components/publishers_column"),f=t("../util/color_key"),p=t("../util/with_visit_proportions"),d=t("../util/with_other_publisher"),_=t("../models/other_publisher"),m=function(t,e){this._app=t,this._repo=e,this._app.registerMessageHandler("selectPublisher",a(this,this._onSelectPublisher))};m.prototype={_template:'<div class="title_area card pure-g" style="display: none">\n  <div class="pure-u-11-12 pure-u-md-11-12">\n      <h2>Publisher: <span class="title"></span></h2>\n  </div>\n  <div class="pure-u-1-12 pure-u-md-1-12">\n    <div class="back_link"><a href="#">&laquo; Back</a></div>\n  </div>\n</div>\n<div class="pure-g">\n  <div class="pure-u-1-2 pure-u-md-1-2">\n    <div class="card">\n      <h2>Top Publishers</h2>\n      <div class="publishers">\n      </div>\n    </div>\n  </div>\n  <div class="pure-u-1-2 pure-u-md-1-2">\n    <div class="card">\n      <h2>Top Datasets</h2>\n      <h3 class="dept_name"></h3>\n      <div class="datasets">\n      </div>\n    </div>\n  </div>\n</div>\n',_publishersColumnSelector:".publishers",_datasetsColumnSelector:".datasets",_titleAreaSelector:".title_area",_titleSelector:".title",_backLinkSelector:".back_link a",render:function(t){this._element=s.find(t);var e=this._repo.getPublishersByVisits();this._topPublishers=this._topN(e),this._otherPublisher=new _(i.difference(e,this._topPublishers));var r=this._topPublishers.concat(this._otherPublisher);r=p(r,this._repo.getTotalPublisherVisits());var o=p(d(this._topN(this._repo.getDatasetsByVisits()),this._topPublishers,this._otherPublisher),this._repo.getTotalDatasetVisits());this._publisherColorKey=new f(i.map(r,function(t){return t.id()})),r=i.map(r,a(this,function(t){return this._publisherColorKey.withColor(t,t.id())})),this._topDatasets=i.map(o,a(this,function(t){return this._publisherColorKey.withColor(t,t.publisher().id())})),this._datasetsColumn=new l(this._app,this._topDatasets);var m=new l(this._app,r,{links:!1,onClick:a(this,function(t){this._app.sendMessage("selectPublisher",t.publisher())}),onHover:a(this,function(t){this._app.sendMessage("highlightPublisher",t.publisher())})}),g=new c(this._app,r);this._publishersColumn=new h(this._app,g,m),n.toSelector(this._template,t),this._publishersColumn.render(t+"  "+this._publishersColumnSelector),this._datasetsColumn.render(t+"  "+this._datasetsColumnSelector);var v=s.find(this._backLinkSelector,this._element);u.on(v,"click",a(this,function(t){t.preventDefault(),this._app.sendMessage("selectPublisher",null)}))},_onSelectPublisher:function(t){var e=s.find(this._titleAreaSelector,this._element);if(t){o(e,{display:"block"});var n=s.find(this._titleSelector,this._element);r.text(n,t.title());var u="Other"==t.title()?10:this._app.nToDisplay;this._datasetsColumn.update(i.map(d(this._topN(t.datasets(),u),this._topPublishers,this._otherPublisher),a(this,function(t){return this._publisherColorKey.withColor(t,t.publisher().id())})))}else o(e,{display:"none"}),this._datasetsColumn.update(this._topDatasets)},_topN:function(t,e){return i.first(t,e||this._app.nToDisplay)}},e.exports=m},{"../components/publishers_column":71,"../components/visitable_list":79,"../components/visitable_pie":80,"../models/other_publisher":88,"../util/bind":92,"../util/color_key":93,"../util/render":97,"../util/with_other_publisher":98,"../util/with_visit_proportions":99,"ampersand-dom":1,"dom-events":39,"dom-style":43,slick:51,underscore:53}],73:[function(t,e){"use strict";var n=t("slick"),i=t("d3-browserify"),r=t("ampersand-dom"),o=t("../util/bind"),s=t("../util/decorate_with"),a=function(t,e,n){n||(n={}),this._app=t,this._series=e,this._aspect=n.aspect||.1,this._points=n.points,this._mouseOver=n.mouseOver,this._yScale=n.yScale};a.prototype={_hMargin:32,_vMargin:16,render:function(t){this._element=n.find(t);var e=this._element.offsetWidth;this._width=e-2*this._hMargin,this._height=this._aspect*e-2*this._vMargin,r.setAttribute(this._element,"style","height:"+this._aspect*e+"px;"),this._x=i.time.scale().range([0,this._width]).domain([this._series.startTime(),this._series.endTime()]),this._y=i.scale.linear().range([0,this._height]).domain([this._series.maxOfSeries().value(),0]),this._svg=i.select(this._element).append("svg").attr("width",this._width+2*this._hMargin).attr("height",this._height+2*this._vMargin).append("g").attr("transform","translate("+this._hMargin+","+this._vMargin+")"),this._container=this._svg.append("g"),this._renderAxes(),this._renderLine(),this._points&&this._renderPoints(),this._mouseOver&&this._setupListeners()},_renderAxes:function(){var t=i.svg.axis().scale(this._x).tickSize(4),e=i.svg.axis().scale(this._y).orient("left");this._yScale?e.ticks(4).tickFormat(i.format(".0%")):e.ticks(0).tickSize(0),this._svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this._height+")").call(t),this._svg.append("g").attr("class","y axis").call(e)},_renderLine:function(){var t=i.svg.line().interpolate("monotone").x(o(this,function(t){return this._x(t.time())})).y(o(this,function(t){return this._y(t.value())}));this._container.append("path").datum(this._series.statistics()).attr("class","line").attr("stroke",this._series.color()).attr("stroke-width","2").attr("d",t).attr("fill","none")},_renderPoints:function(){this._container.selectAll(".point").data(this._series.statistics()).enter().append("circle").attr("class","point").attr("stroke","none").attr("fill",this._series.color()).attr("r",4).attr("cx",o(this,function(t){return this._x(t.time())})).attr("cy",o(this,function(t){return this._y(t.value())}))},_setupListeners:function(){this._mouseOverlay||(this._mouseOverlay=this._svg.append("rect").attr("fill","none").attr("pointer-events","all").attr("stroke","none").attr("class","overlay").attr("width",this._width).attr("height",this._height).on("mousemove",o(this,this._mouseMoveGraph)).on("mouseout",o(this,this._mouseOutGraph)).node())},_mouseMoveGraph:function(){var t=i.mouse(this._mouseOverlay)[0],e=this._x.invert(t),n=this._series.closestStat(e);n=s(n,{x:o(this,function(){return this._element.offsetLeft+this._hMargin+this._x(n.time())}),y:o(this,function(){return this._element.offsetTop+this._vMargin+this._y(n.value())})}),this._renderHighlight(n),this._app.sendMessage("statisticHighlighted",n)},_mouseOutGraph:function(){this._clearHighlight(),this._app.sendMessage("statisticHighlighted",null)},_clearHighlight:function(){this._container.selectAll(".highlight").data([]).exit().remove()},_renderHighlight:function(t){this._clearHighlight(),this._container.selectAll(".highlight").data([t]).enter().append("circle").attr("class","highlight").attr("fill","none").attr("stroke",this._series.color()).attr("stroke-width",3).attr("r",8).attr("cx",o(this,function(t){return this._x(t.time())})).attr("cy",o(this,function(t){return this._y(t.value())}))}},e.exports=a},{"../util/bind":92,"../util/decorate_with":95,"ampersand-dom":1,"d3-browserify":38,slick:51}],74:[function(t,e){"use strict";var n=t("../util/render"),i=t("./top_traffic_sources"),r=t("./most_shared"),o=t("./percentage_pull_quote"),s=t("./number_pull_quote"),a=t("./social_time_series"),u=t("../util/decorate_with"),l=t("../util/colors"),c=function(t,e){this._app=t,this._repo=e};c.prototype={_template:'<div class="social">\n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1 social_timeseries_container">\n    </div>\n  </div>\n\n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1 most_shared_datasets_container">\n    </div>\n  </div>\n\n  <div class="pure-g">\n    <div class="pure-u-2-3 pure-u-md-2-3 top_traffic_sources_container">\n    </div>\n    <div class="pure-u-1-3 pure-u-md-1-3 pullquote_wrapper">\n      <div class="card">\n        <div class="pullquote_container">\n        </div>\n        <div class="numberquote_container">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',_topSourcesSelector:".top_traffic_sources_container",_mostReferredSelector:".most_shared_datasets_container",_pullquoteContainer:".pullquote_container",_numberQuoteContainer:".numberquote_container",_socialTimeseriesContainer:".social_timeseries_container",_topN:4,render:function(t){n.toSelector(this._template,t);var e=this._repo.getStatistic("Social sources"),c=this._repo.getMostReferred("All"),h=this._repo.getStatistic("Totals").series("Total visits"),f=e.sum().asProportionOfSeries(h),p=new i(this._app,e.topN(this._topN,!0));p.render(t+" "+this._topSourcesSelector);var d=new r(this._app,this._repo,c);d.render(t+" "+this._mostReferredSelector);var _=new o(f.last().value(),"of visits in the last month come from links on social media. That's: ");_.render(t+" "+this._pullquoteContainer);var m=new s(e.sum().last().value(),"visits in total.");m.render(t+" "+this._numberQuoteContainer),f=u(f,{color:function(){return l[2]}});var g=new a(this._app,this._repo,f);g.render(t+" "+this._socialTimeseriesContainer)}},e.exports=c},{"../util/colors":94,"../util/decorate_with":95,"../util/render":97,"./most_shared":66,"./number_pull_quote":67,"./percentage_pull_quote":68,"./social_time_series":76,"./top_traffic_sources":78}],75:[function(t,e){"use strict";var n=t("../util/bind"),i=t("../util/render"),r=t("../util/colors"),o=t("../util/decorate_with"),s=t("./group_pie"),a=t("./percentage_pull_quote"),u=t("./group_key_with_percentage"),l=function(t,e,n){this._app=t,this._repo=e,this._statistic=n};l.prototype={_template:'<div class="social_month_summary">\n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1">\n      <h3 class="date">{{date}}</h3>\n    </div>\n  </div>\n  \n  <div class="pure-g pie_wrapper">\n    <div class="pure-u-1-2 pure-u-md-1-2">\n      <div class="pie">\n      </div>\n    </div>\n    <div class="pure-u-1-2 pure-u-md-1-2">\n      <div class="quote"> \n      </div>\n    </div>\n  </div>\n\n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1">\n      <h4>Top Sources:</h4>\n      <div class="sources">\n      </div>\n    </div>\n  </div>\n  \n  <div class="pure-g">\n    <div class="pure-u-1 pure-u-md-1">\n      <h4>Popular Datasets:</h4>\n      <div class="datasets">\n      </div>\n    </div>\n  </div>\n</div>\n',_months:["January","February","March","April","May","June","July","August","September","October","November","December"],_topN:4,render:function(t){i.toSelector(this._template,t,this._params());
var e=this._repo.getStatistic("Social sources").at(this._statistic.time()),l=this._repo.getStatistic("Totals").series("Total visits").at(this._statistic.time()),c=this._repo.getMostReferred(this._statistic.period()),h=e.sum().proportionally(l.value()),f=h.toProportionalGroup(1,"Referred traffic").map(function(t,e){return o(t,{color:function(){return"Referred traffic"==e?r[2]:r.neutral}})}),p=new a(h.value(),"of visits came from links on social media.");p.render(t+" .quote");var d=new s(f);d.render(t+" .pie");var _=new u(e.topN(this._topN));_.render(t+" .sources");var m=new u(c.topN(this._topN),{legend:n(this,function(t){return this._repo.getDatasetById(t).title()})});m.render(t+" .datasets")},_params:function(){return{date:this._date()}},_date:function(){var t=new Date(this._statistic.time());return this._months[t.getMonth()]+" "+t.getFullYear()}},e.exports=l},{"../util/bind":92,"../util/colors":94,"../util/decorate_with":95,"../util/render":97,"./group_key_with_percentage":62,"./group_pie":63,"./percentage_pull_quote":68}],76:[function(t,e){"use strict";var n=t("../util/render"),i=t("./series_line"),r=t("dom-style"),o=t("slick"),s=t("../util/bind"),a=t("./hover_box"),u=t("./social_month_summary"),l=function(t,e,n){this._app=t,this._repo=e,this._series=n,this._app.registerMessageHandler("statisticHighlighted",s(this,this._highlightStat))};l.prototype={_innerSelector:".social_timeseries",_aspect:.375,_template:'<div class="social_timeseries card">\n  <div class="line_container">\n  </div>\n</div>\n',_lineSelector:".line_container",render:function(t){this._selector=t,n.toSelector(this._template,t);var e=o.find(this._innerSelector),s=e.offsetWidth,a=this._aspect*s;r(e,{height:a+"px"});var u=new i(this._app,this._series,{aspect:this._aspect,points:!0,mouseOver:!0,yScale:!0});u.render(t+" "+this._lineSelector)},_highlightStat:function(t){if(o.find(this._selector+" "+this._lineSelector)&&(this._activeHover&&this._activeHover.destroy(),t)){var e=new u(this._app,this._repo,t);this._activeHover=new a(this._app,e),this._activeHover.render(this._selector,t.x(),t.y())}}},e.exports=l},{"../util/bind":92,"../util/render":97,"./hover_box":65,"./series_line":73,"./social_month_summary":75,"dom-style":43,slick:51}],77:[function(t,e){"use strict";var n=t("../util/render"),i=t("../util/bind"),r=t("slick"),o=t("ampersand-dom"),s=t("dom-events"),a=t("underscore"),u=function(t,e){this._app=t,this._tabs=e};u.prototype={_template:'<div class="tabbed_navigation">\n  <ul class="tabs">\n    {{#tabs}}\n      <li class="tab-{{id}}">{{title}}</li>\n    {{/tabs}}\n    <li class="clear">\n    </li>\n  </ul>\n  <div class="tabs_buffer"></div>\n  <div class="tab_content">\n  </div>\n</div>\n',_contentSelector:".tab_content",render:function(t){this._selector=t,this._element=n.toSelector(this._template,t,this._templateParams()),this._selectTab(0),this._setupClickHandlers()},select:function(t){var e=a.map(this._tabs,function(t){return t[0]}),n=a.indexOf(e,t);this._selectTab(n)},_templateParams:function(){return{tabs:a.map(this._tabs,function(t,e){return{title:t[0],id:e}})}},_setupClickHandlers:function(){var t=r.search(".tabs li",this._element);a.each(t,i(this,function(t,e){s.on(t,"click",i(this,function(t){t.preventDefault(),this._selectTab(e)}))}))},_selectTab:function(t){var e=r.find(this._contentSelector,this._element);o.text(e,"");var n=r.search(".tabs li",this._element);a.each(n,function(t){o.removeClass(t,"selected")});var i=r.find(".tabs li.tab-"+t,this._element);o.addClass(i,"selected"),this._tabs[t][1](this._selector+" "+this._contentSelector)}},e.exports=u},{"../util/bind":92,"../util/render":97,"ampersand-dom":1,"dom-events":39,slick:51,underscore:53}],78:[function(t,e){"use strict";var n=t("../util/render"),i=t("./group_key_with_percentage"),r=t("./group_pie"),o=t("../util/color_key"),s=t("../util/colors"),a=function(t,e){this._app=t;var n=new o(e.keys(),s);this._statistics=e.map(function(t,e){return n.withColor(t,e)})};a.prototype={_template:'<div class="card">\n  <h2>Top traffic sources</h2>\n  <div class="pure-g">\n    <div class="pure-u-1-2 pure-u-md-1-2 pie_container">\n    </div>\n    <div class="pure-u-1-2 pure-u-md-1-2 key_container">\n    </div>\n  </div>\n</div>\n',_pieSelector:".pie_container",_keySelector:".key_container",render:function(t){n.toSelector(this._template,t);var e=new r(this._statistics),o=new i(this._statistics);e.render(t+" "+this._pieSelector),o.render(t+" "+this._keySelector)}},e.exports=a},{"../util/color_key":93,"../util/colors":94,"../util/render":97,"./group_key_with_percentage":62,"./group_pie":63}],79:[function(t,e){"use strict";var n=t("../util/bind"),i=t("../util/render"),r=t("ampersand-dom"),o=t("slick"),s=t("underscore"),a=t("dom-events"),u=function(t,e,i){i||(i={}),this._app=t,this._visitables=e,this._links=void 0===i.links?!0:i.links,this._showColor=void 0===i.color?!0:i.color,this._onClick=i.onClick,this._onHover=i.onHover,this._app.registerMessageHandler("highlightPublisher",n(this,this._onHighlightPublisher))};u.prototype={_itemTemplate:'<li style="border-left-color: {{color}};" class="publisher-{{publisher_id}} visitable clickable {{class_name}}">\n  <div class="title">\n    {{#url}}\n      <a href="{{url}}">{{title}}</a>\n    {{/url}}\n    {{^url}}\n      {{title}}\n    {{/url}}\n  </div>\n  <div class="subtitle">\n    {{subtitle}}\n  </div>\n  <ul class="stats">\n    <li class="visits_proportion">\n      <span class="n">{{visits_proportion}}</span> of all visits\n    </li>\n    <li class="visits">\n      <span class="n">{{visits}}</span> visits\n    </li>\n    <li class="views">\n      <span class="n">{{views}}</span> views\n    </li>\n  </ul>\n</li>\n',render:function(t){var e=o.find(t);this._element=document.createElement("ul"),r.addClass(this._element,"visitable_list"),e.appendChild(this._element),this._renderVisitables()},_renderVisitables:function(){r.text(this._element,""),s.each(this._visitables,n(this,function(t){var e=i.toNode(this._itemTemplate,this._templateParameters(t));this._element.appendChild(e),this._onHover&&a.on(e,"mouseover",n(this,function(){this._onHover(t)})),this._onClick&&a.on(e,"click",n(this,function(e){e.preventDefault(),this._onClick(t)}))}))},_templateParameters:function(t){return{url:this._links&&t.url(),title:t.title(),subtitle:t.subtitle(),visits_proportion:(100*t.visitsProportion()).toFixed(1)+"%",visits:t.visits(),views:t.views(),class_name:this._showColor||"no_color",color:t.color&&t.color(),publisher_id:t.publisher().id()}},update:function(t){this._visitables=t,this._renderVisitables()},_onHighlightPublisher:function(t){var e=o.search(".visitable",this._element);s.each(e,function(e){r.removeClass(e,"highlighted"),r.removeClass(e,"not-highlighted"),t&&(r.hasClass(e,"publisher-"+t.id())?r.addClass(e,"highlighted"):r.addClass(e,"not-highlighted"))})}},e.exports=u},{"../util/bind":92,"../util/render":97,"ampersand-dom":1,"dom-events":39,slick:51,underscore:53}],80:[function(t,e){"use strict";var n=t("slick"),i=t("d3-browserify"),r=t("ampersand-dom"),o=t("../util/bind"),s=t("underscore"),a=t("../util/colors"),u=function(t,e){this._app=t,this._visitables=e,this._app.registerMessageHandler("highlightPublisher",o(this,this._onHighlightPublisher)),this._app.registerMessageHandler("selectPublisher",o(this,this._onSelectPublisher))};u.prototype={_notHighlightedColor:a.neutral,_backgroundColor:a.background,_scale:.8,render:function(t){this._element=n.find(t);var e=this._element.offsetWidth;r.setAttribute(this._element,"style","height:"+this._scale*e+"px;"),this._radius=e/2;var s=i.select(this._element).append("svg").attr("width",e).attr("height",e).append("g").attr("transform","translate("+e/2+","+this._scale*e/2+") scale("+this._scale+")");this._layout=i.layout.pie().sort(null).value(function(t){return t.visits()}),this._arc=i.svg.arc().outerRadius(this._radius).innerRadius(0),this._slice=s.datum(this._visitables).selectAll("path").data(this._layout).enter().append("path").style("fill",function(t){return t.data.color()}).style("stroke",this._backgroundColor).style("stroke-width",1).attr("d",this._arc).attr("class","clickable").on("mouseover",o(this,this._onMouseOver)).on("mouseout",o(this,this._onMouseOut)).on("mousedown",o(this,this._onClick))},_onHighlightPublisher:function(t){t||(t=this._selectedPublisher),t?this._slice.style("fill",o(this,function(e){return s.contains([t.id(),this._selectedPublisher&&this._selectedPublisher.id()],e.data.publisher().id())?e.data.color():this._notHighlightedColor})):this._slice.style("fill",function(t){return t.data.color()}),this._slice.attr("d",this._arc)},_onSelectPublisher:function(t){this._selectedPublisher=t,this._onHighlightPublisher(t)},_onMouseOver:function(t){this._app.sendMessage("highlightPublisher",t.data)},_onClick:function(t){this._app.sendMessage("selectPublisher",t.data)},_onMouseOut:function(){this._app.sendMessage("highlightPublisher",null)}},e.exports=u},{"../util/bind":92,"../util/colors":94,"ampersand-dom":1,"d3-browserify":38,slick:51,underscore:53}],81:[function(t,e){"use strict";var n=t("leaflet"),i=t("slick"),r=t("../util/bind"),o=t("../util/colors"),s=t("underscore"),a=function(t,e,n,i){void 0===i&&(i={}),this._app=t,this._repo=e,this._statistics=n,this._markers={},this._withoutUK=void 0===i.withoutUK?!0:i.withoutUK,this._app.registerMessageHandler("countrySelected",r(this,this._onCountrySelected))};a.prototype={_maxRadius:100,render:function(t){var e=i.find(t);this._map=n.map(e,{attributionControl:!1}),this._map.setView([23,18],2),n.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}).addTo(this._map),this._withoutUK&&(this._statistics=this._statistics.without("United Kingdom")),this._statistics.last().proportionally().sqrt().each(r(this,function(t,e){var i=this._repo.getCountry(t);if(i){var s=e.value()*this._maxRadius,a=n.circleMarker([i.latitude(),i.longitude()],{radius:s,color:o.base});this._markers[t]=a,a.addEventListener("click",r(this,function(){this._onMarkerClick(t)})),a.addTo(this._map)}}))},_onMarkerClick:function(t){this._app.sendMessage("countrySelected",t)},_onCountrySelected:function(t){if(this._map.eachLayer(r(this,function(t){s.contains(s.values(this._markers),t)&&this._map.removeLayer(t)})),t){var e=this._markers[t];this._map.addLayer(e)}else s.each(s.values(this._markers),r(this,function(t){this._map.addLayer(t)}))}},e.exports=a},{"../util/bind":92,"../util/colors":94,leaflet:48,slick:51,underscore:53}],82:[function(t,e){"use strict";e.exports={Repository:t("./data/repository")}},{"./data/repository":83}],83:[function(t,e){"use strict";var n=t("d3-browserify"),i=t("../util/bind"),r=t("bluebird"),o=t("../util/promises"),s=t("underscore"),a=t("../models"),u=function(t){this._datasetsFilename=t.datasetsFilename,this._publishersFilename=t.publishersFilename,this._mappingFilename=t.mappingFilename,this._statsFilename=t.statsFilename,this._countriesFilename=t.countriesFilename,this._referredDatasetsFilename=t.referrersFilename,this._statisticsByName={},this._countriesByName={},this._datasetsById={},this._datasetsByPublisher={},this._publishersById={},this._datasetPublisherIdsMapping={},this._referredDatasetsByPeriod={}};u.prototype={loadSources:function(t){var e=this._loadCsvPromise(this._datasetsFilename),n=this._loadCsvPromise(this._publishersFilename),r=this._loadCsvPromise(this._mappingFilename),a=this._loadCsvPromise(this._statsFilename),u=this._loadCsvPromise(this._countriesFilename),l=this._loadCsvPromise(this._referredDatasetsFilename);o.fanIn([e,n,r,a,u,l],i(this,function(e){s.each(e[5],i(this,this._loadReferredDataset)),s.each(e[4],i(this,this._loadCountry)),s.each(e[3],i(this,this._loadStat)),s.each(e[2],i(this,this._loadMapping)),s.each(e[1],i(this,this._loadPublisher)),s.each(e[0],i(this,this._loadDataset)),t(this)}))},getStatistic:function(t){return this._statisticsByName[t]},getCountry:function(t){return this._countriesByName[t]},getTotalDatasetVisits:function(){return s.reduce(s.values(this._datasetsById),function(t,e){return t+e.visits()},0)},getTotalPublisherVisits:function(){return s.reduce(s.values(this._publishersById),function(t,e){return t+e.visits()},0)},getDatasetById:function(t){return this._datasetsById[t]},getPublisherById:function(t){return this._publishersById[t]},getDatasetsByVisits:function(){return s.sortBy(s.values(this._datasetsById),function(t){return-t.visits()})},getPublishersByVisits:function(){return s.sortBy(s.values(this._publishersById),function(t){return-t.visits()})},getMostReferred:function(t){return this._referredDatasetsByPeriod[t]},_getDatasetsForPublisher:function(t){var e=this._datasetsByPublisher[t.id()];return e?s.sortBy(e,function(t){return-t.visits()}):void 0},_getPublisherForDataset:function(t){var e=this._datasetPublisherIdsMapping[t.id()];return e?this.getPublisherById(e):void 0},_loadReferredDataset:function(t){var e=this._referredDatasetsByPeriod[t["Period Name"]];e||(e=this._referredDatasetsByPeriod[t["Period Name"]]=new a.Group);var n=new a.Statistic(t["Period Name"],t["Referred Visits"]);e.add(t["Dataset Name"],n)},_loadMapping:function(t){this._datasetPublisherIdsMapping[t["Dataset Name"]]=t["Publisher Name"]},_loadDataset:function(t){var e=new a.Dataset(t,i(this,this._getPublisherForDataset)),n=e.id();if(e.publisher()){var r=this._datasetsByPublisher[e.publisher().id()];r.push(e)}this._datasetsById[n]=e},_loadPublisher:function(t){var e=new a.Publisher(t,i(this,this._getDatasetsForPublisher)),n=e.id();this._datasetsByPublisher[n]=[],this._publishersById[n]=e},_loadStat:function(t){var e=t.Statistic,n=t.Key,i=t.Period,r=t.Value,o=new a.Statistic(i,r);this._statisticsByName[e]||(this._statisticsByName[e]=new a.Group);var s=this._statisticsByName[e];s.series(n)||s.add(n,new a.Series);var u=s.series(n);u.add(o)},_loadCountry:function(t){var e=new a.Country(t);this._countriesByName[e.name()]=e},_loadCsvPromise:function(t){return new r(i(this,function(e,i){n.csv(t,function(t,n){t?i(t):e(n)})}))}},u.loadDataSources=function(t,e){var n=new u(t);n.loadSources(function(){e(n)})},e.exports=u},{"../models":84,"../util/bind":92,"../util/promises":96,bluebird:4,"d3-browserify":38,underscore:53}],84:[function(t,e){"use strict";e.exports={Dataset:t("./models/dataset"),Publisher:t("./models/publisher"),Statistic:t("./models/statistic"),Country:t("./models/country"),Series:t("./models/series"),Group:t("./models/group")}},{"./models/country":85,"./models/dataset":86,"./models/group":87,"./models/publisher":89,"./models/series":90,"./models/statistic":91}],85:[function(t,e){"use strict";var n=function(t){this._data=t};n.prototype={name:function(){return this._data.Country},latitude:function(){return this._data.Latitude},longitude:function(){return this._data.Longitude}},e.exports=n},{}],86:[function(t,e){"use strict";var n=function(t,e){this._data=t,this._getPublisher=e};n.prototype={id:function(){return this._data["Dataset Name"]},title:function(){return this._data["Dataset Title"]},subtitle:function(){return this.publisher().title()},url:function(){return"http://data.gov.uk/dataset/"+this.id()},visits:function(){return parseInt(this._data.Visits)},views:function(){return this._data.Views},publisher:function(){return this._getPublisher(this)}},e.exports=n},{}],87:[function(t,e){"use strict";var n=t("underscore"),i=t("../util/bind"),r=function(t){this._series={},n.each(t,i(this,function(e){this.add(e,t[e])}))};r.prototype={add:function(t,e){this._series[t]=e},keys:function(){return n.keys(this._series)},series:function(t){return t?this._series[t]:n.values(this._series)},size:function(){return n.size(this._series)},total:function(){return n.reduce(this._series,function(t,e){return t.total().merge(e.total())})},min:function(){return n.min(n.map(this._series,function(t){return t.min()}),function(t){return t.value()})},max:function(){return n.max(n.map(this._series,function(t){return t.max()}),function(t){return t.value()})},first:function(){return this.map(function(t){return t.first()})},last:function(){return this.map(function(t){return t.last()})},length:function(){return n.max(n.map(this._series,function(t){return t.length()}),function(t){return t.value()})},log:function(){return this.map(function(t){return t.log()})},dampen:function(t){return this.map(function(e){return e.dampen(t)})},sqrt:function(){return this.map(function(t){return t.sqrt()})},proportionally:function(){var t=this.total().value();return this.map(function(e){return e.proportionally(t)})},each:function(t){n.each(n.keys(this._series),i(this,function(e){t(e,this._series[e])}))},without:function(t){return this.map(function(e,n){return n!=t?e:void 0})},merge:function(t){t||(t=n.keys(this._series));var e=n.map(t,i(this,function(t){return this._series[t]}));return n.reduce(e,function(t,e){return t.merge(e)})},filter:function(t){return this.map(function(e,i){return n.contains(t,i)?e:void 0})},complement:function(t){return this.filter(n.difference(this.keys(),t))},oneVsAll:function(t){return this.partition([t],t,"Others")},partition:function(t,e,o){var s=n.difference(this.keys(),t),a=n.map(t,i(this,function(t){return this.series(t)})),u=n.reduce(a,function(t,e){return t.merge(e)}),l=n.map(s,i(this,function(t){return this.series(t)})),c=n.reduce(l,function(t,e){return t.merge(e)}),h=new r;return h.add(e,u),h.add(o,c),h},topN:function(t,e){var o=n.first(n.sortBy(n.keys(this._series),i(this,function(t){return-this._series[t].value()})),t),s=new r;if(n.each(o,i(this,function(t){s.add(t,this._series[t])})),e){var a=n.difference(this._series,n.map(o,i(this,function(t){return this._series[t]}))),u=n.reduce(a,function(t,e){return t.merge(e)});s.add("Others",u)}return s},map:function(t){return n.reduce(n.keys(this._series),i(this,function(e,n){var i=t(this._series[n],n);return i&&e.add(n,i),e}),new r)},sum:function(){return n.reduce(this.series(),function(t,e){return t.merge(e)})},at:function(t){return this.map(function(e){return e.at(t)})}},e.exports=r},{"../util/bind":92,underscore:53}],88:[function(t,e){"use strict";var n=t("underscore"),i=t("../util/with_visit_proportions"),r=function(t){this._publishers=t};r.prototype={id:function(){return-1},title:function(){return"Other"},subtitle:function(){return""},url:function(){return void 0},visits:function(){return n.reduce(this._publishers,function(t,e){return t+e.visits()},0)},views:function(){return n.reduce(this._publishers,function(t,e){return t+e.views()},0)},datasets:function(){return i(n.sortBy(n.flatten(n.map(this._publishers,function(t){return t.datasets()})),function(t){return 0-t.visits()}),this.visits())},publisher:function(){return this}},e.exports=r},{"../util/with_visit_proportions":99,underscore:53}],89:[function(t,e){"use strict";var n=t("../util/with_visit_proportions"),i=function(t,e){this._data=t,this._getDatasets=e};i.prototype={id:function(){return this._data["Publisher Name"]},title:function(){return this._data["Publisher Title"]},subtitle:function(){return""},url:function(){return"/publisher/"+this.id()},visits:function(){return parseInt(this._data.Visits)},views:function(){return parseInt(this._data.Views)},datasets:function(){return n(this._getDatasets(this),this.visits())},publisher:function(){return this}},e.exports=i},{"../util/with_visit_proportions":99}],90:[function(t,e){"use strict";var n=t("underscore"),i=t("../util/bind"),r=function(t){this._data={},n.each(t,i(this,function(t){this.add(t)}))};r.prototype={add:function(t){var e=t.time();this._data[e]=t},at:function(t){return this._data[t]},value:function(){return this.total().value()},map:function(t){return n.map(this.times(),i(this,function(e){return t(this.at(e))}))},statistics:function(){return this.map(function(t){return t})},closestStat:function(t){var e=n.min(this.times(),function(e){return Math.abs(t-e)});return this.at(e)},values:function(){return this.map(function(t){return t.value()})},periods:function(){return this.map(function(t){return t.period()})},times:function(){return n.keys(this._data).sort()},total:function(){return n.reduce(this.statistics(),function(t,e){return t.total().merge(e.total())})},min:function(){return this.total().min()},max:function(){return this.total().max()},minOfSeries:function(){return n.min(this.map(function(t){return t.min()}),function(t){return t.value()})},maxOfSeries:function(){return n.max(this.map(function(t){return t.max()}),function(t){return t.value()})},first:function(){return this.statistics()[0].first()},startTime:function(){return this.first().time()},endTime:function(){return this.last().time()},last:function(){return this.statistics()[n.size(this._data)-1].last()},length:function(){return this.periods().length},proportionally:function(t){return new r(this.map(function(e){return e.proportionally(t)}))},asProportionOfSeries:function(t){var e=n.map(this.times(),i(this,function(e){var n=this.at(e),i=t.at(e);return n.proportionally(i.value())}));return new r(e)},log:function(){return new r(this.map(function(t){return t.log()}))},dampen:function(t){return new r(this.map(function(e){return e.dampen(t)}))},sqrt:function(){return new r(this.map(function(t){return t.sqrt()}))},merge:function(t){var e=n.union(this.times(),t.times()),o=n.map(e,i(this,function(e){var n=this.at(e),i=t.at(e);return n&&i?n.merge(i):n?n:i?i:void 0})),s=new r(o);return s}},e.exports=r},{"../util/bind":92,underscore:53}],91:[function(t,e){"use strict";var n=t("./group"),i=function(t,e){this._period=t,this._value=e};i.prototype={period:function(){return this._period},time:function(){return Date.parse(this._period)},value:function(){return parseFloat(this._value)},min:function(){return this},max:function(){return this},total:function(){return this},first:function(){return this},last:function(){return this},proportionally:function(t){return this.map(function(e){return e/t})},log:function(){return this.map(function(t){return Math.log(t)})},dampen:function(t){return this.map(function(e){return Math.pow(e,t-1)/t})},sqrt:function(){return this.map(function(t){return Math.sqrt(t)})},merge:function(t){return this.map(function(e){return e+t.value()})},toProportionalGroup:function(t,e,i){var r=new n;return r.add(e,this),r.add(i||"Others",this.map(function(e){return t-e})),r},map:function(t){return new i(this.period(),t(this.value()))}},e.exports=i},{"./group":87}],92:[function(t,e){"use strict";e.exports=function(t,e){return function(){return e.apply(t,arguments)}}},{}],93:[function(t,e){"use strict";var n=t("underscore"),i=t("./decorate_with"),r=t("./colors"),o=function(t,e){this._colors=e?e:r,this._items=t};o.prototype={withColor:function(t,e){e||(e=t);var n=this.color(e);return i(t,{color:function(){return n}})},color:function(t){return this._colors[n.indexOf(this._items,t)]}},e.exports=o},{"./colors":94,"./decorate_with":95,underscore:53}],94:[function(t,e){var n="#9bc658",i="#C42718",r=[n,"#FFF300","#5140FF",i,"#856499","#56C8F9"];r.base=n,r.complement=i,r.neutral="#ddd",r.background="#fff",e.exports=r},{}],95:[function(t,e){"use strict";var n=function(t,e){for(var n in t)this[n]=this._forward(t,t[n]);for(var i in e)this[i]=this._forward(this,e[i])};n.prototype={_forward:function(t,e){return function(){return e.apply(t,arguments)}}},e.exports=function(t,e){return new n(t,e)}},{}],96:[function(t,e){"use strict";var n=t("underscore"),i=t("bluebird"),r={fanIn:function(t,e){n.reduce(t,function(t,e){return new i(function(n){e.then(function(e){t.then(function(t){n(t.concat([e]))})})})},new i(function(t){t([])})).then(e)}};e.exports=r},{bluebird:4,underscore:53}],97:[function(t,e){"use strict";var n=t("mustache"),i=t("slick"),r=function(t,e){return e||(e={}),n.render(t,e)},o=function(t,e,n,i){var o=r(t,n),s=i?e.innerHTML+o:o;return e.innerHTML=s,e},s=function(t,e,n,r){var s=i.find(e);return o(t,s,n,r)},a=function(t,e){var n=r(t,e),i=document.createElement("div");return i.innerHTML=n,i.firstChild};e.exports={toSelector:s,toString:r,toElement:o,toNode:a}},{mustache:49,slick:51}],98:[function(t,e){"use strict";var n=t("./decorate_with"),i=t("underscore"),r=function(t,e,r){return i.map(t,function(t){return n(t,{publisher:function(){return i.contains(e,this._getPublisher(this))?this._getPublisher(this):r}})})};e.exports=r},{"./decorate_with":95,underscore:53}],99:[function(t,e){"use strict";var n=t("underscore"),i=t("./decorate_with");e.exports=function(t,e){return n.map(t,function(t){return i(t,{visitsProportion:function(){return this.visits()/e}})})}},{"./decorate_with":95,underscore:53}]},{},[54]);
//# sourceMappingURL=application.js.map